# æ•°ç»„ç³»åˆ—

## åè½¬æ•°ç»„çš„æ–¹å¼å’Œæ—¶é—´å¤æ‚åº¦

### åŒæŒ‡é’ˆæ³•

ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«ä»æ•°ç»„çš„å¤´å’Œå°¾å¼€å§‹ï¼Œé€ä¸€äº¤æ¢æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œç›´åˆ°ä¸¤ä¸ªæŒ‡é’ˆç›¸é‡ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚

```js
function reverseArray(arr) {
  let left = 0,
    right = arr.length - 1
  while (left < right) {
    ;[arr[left], arr[right]] = [arr[right], arr[left]]
    left++
    right--
  }
  return arr
}
```

### `reverse`

ä½¿ç”¨ `JavaScript` çš„å†…ç½®æ–¹æ³• `Array.prototype.reverse()`ï¼Œè¿”å›åŸæ•°ç»„ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š`O(n)`

```js
const arr = [1, 2, 3, 4, 5]
arr.reverse()
```

### é€’å½’

é€’å½’åœ°äº¤æ¢æ•°ç»„çš„é¦–å°¾å…ƒç´ ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š`O(n)`

```js
function reverseArrayRecursive(arr, start, end) {
  if (start >= end) return arr
  ;[arr[start], arr[end]] = [arr[end], arr[start]]
  return reverseArrayRecursive(arr, start + 1, end - 1)
}
```

## æ‰å¹³æ•°ç»„ç»“æ„è½¬`Tree`

```js
// æ‰“å¹³çš„æ•°æ®å†…å®¹
let arr = [
  { id: 1, name: 'éƒ¨é—¨1', pid: 0 },
  { id: 2, name: 'éƒ¨é—¨2', pid: 1 },
  { id: 3, name: 'éƒ¨é—¨3', pid: 1 },
  { id: 4, name: 'éƒ¨é—¨4', pid: 3 },
  { id: 5, name: 'éƒ¨é—¨5', pid: 4 },
]
```

> è¾“å‡ºç»“æ„

```js
;[
  {
    id: 1,
    name: 'éƒ¨é—¨1',
    pid: 0,
    children: [
      {
        id: 2,
        name: 'éƒ¨é—¨2',
        pid: 1,
        children: [],
      },
      {
        id: 3,
        name: 'éƒ¨é—¨3',
        pid: 1,
        children: [
          // ç»“æœ ...
        ],
      },
    ],
  },
]
```

- ä¸è€ƒè™‘æ€§èƒ½å®ç°ï¼Œé€’å½’éå†æŸ¥æ‰¾

ä¸»è¦æ€è·¯æ˜¯æä¾›ä¸€ä¸ªé€’`getChildren`çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•é€’å½’å»æŸ¥æ‰¾å­é›†ã€‚

```js
/**
 * é€’å½’æŸ¥æ‰¾ï¼Œè·å–children
 */
const getChildren = (data, result, pid) => {
  for (const item of data) {
    if (item.pid === pid) {
      const newItem = { ...item, children: [] }
      result.push(newItem)
      getChildren(data, newItem.children, item.id)
    }
  }
}

/**
 * è½¬æ¢æ–¹æ³•
 */
const arrayToTree = (data, pid) => {
  const result = []
  getChildren(data, result, pid)
  return result
}
```

**ä»ä¸Šé¢çš„ä»£ç æˆ‘ä»¬åˆ†æï¼Œè¯¥å®ç°çš„æ—¶é—´å¤æ‚åº¦ä¸º`O(2^n)`ã€‚**

- ä¸ç”¨é€’å½’ï¼Œä¹Ÿèƒ½æå®š

ä¸»è¦æ€è·¯æ˜¯å…ˆæŠŠæ•°æ®è½¬æˆ`Map`å»å­˜å‚¨ï¼Œä¹‹åéå†çš„åŒæ—¶å€ŸåŠ©å¯¹è±¡çš„å¼•ç”¨ï¼Œç›´æ¥ä»`Map`æ‰¾å¯¹åº”çš„æ•°æ®åšå­˜å‚¨ã€‚

```js
function arrayToTree(items) {
  const result = [] // å­˜æ”¾ç»“æœé›†
  const itemMap = {} // mapå­˜å‚¨æ¯ä¸ªèŠ‚ç‚¹

  for (const item of items) {
    const id = item.id
    const pid = item.pid

    if (!itemMap[id]) {
      itemMap[id] = {
        children: [],
      }
    }

    itemMap[id] = {
      ...item,
      children: itemMap[id]['children'],
    }

    const treeItem = itemMap[id]

    if (pid === 0) {
      result.push(treeItem)
    } else {
      if (!itemMap[pid]) {
        itemMap[pid] = {
          children: [],
        }
      }
      itemMap[pid].children.push(treeItem)
    }
  }
  return result
}
```

**ä»ä¸Šé¢çš„ä»£ç æˆ‘ä»¬åˆ†æï¼Œä¸€æ¬¡å¾ªç¯å°±æå®šäº†ï¼Œè¯¥å®ç°çš„æ—¶é—´å¤æ‚åº¦ä¸º`O(n)`ï¼Œéœ€è¦ä¸€ä¸ª Map æŠŠæ•°æ®å­˜å‚¨èµ·æ¥ï¼Œç©ºé—´å¤æ‚åº¦`O(n)`ã€‚**

## æ•°ç»„å»é‡

åœ¨ JavaScript ä¸­ï¼Œæ•°ç»„å»é‡æ˜¯ä¸€ä¸ªå¸¸è§çš„æ“ä½œã€‚ä½ å¯ä»¥ä½¿ç”¨å¤šç§æ–¹å¼æ¥å»é™¤æ•°ç»„ä¸­çš„é‡å¤é¡¹ã€‚ä¸‹é¢ä»‹ç»å‡ ç§å¸¸è§ä¸”æœ‰æ•ˆçš„æ•°ç»„å»é‡æ–¹æ³•ï¼Œè¯¦ç»†è§£é‡Šå…¶åŸç†ã€å®ç°ä»¥åŠæ—¶é—´å¤æ‚åº¦ã€‚

### ä½¿ç”¨ `Set`

`Set` æ˜¯ `ES6` å¼•å…¥çš„é›†åˆç±»å‹ï¼Œå®ƒåªå…è®¸å­˜å‚¨å”¯ä¸€çš„å€¼ã€‚å› æ­¤ï¼Œå¯ä»¥é€šè¿‡å°†æ•°ç»„è½¬æ¢ä¸º `Set` æ¥å®ç°å»é‡ã€‚

> ä¸¾ä¸ª ğŸŒ°

```javascript
const arr = [1, 2, 2, 3, 4, 4, 5]
const uniqueArr = [...new Set(arr)]
console.log(uniqueArr) // [1, 2, 3, 4, 5]
```

::: tip **è§£é‡Šï¼š**

- `Set` è‡ªåŠ¨å»é™¤é‡å¤å€¼ï¼Œå› ä¸ºé›†åˆä¸­çš„æ¯ä¸ªå€¼éƒ½æ˜¯å”¯ä¸€çš„ã€‚

- `new Set(arr)` ä¼šè¿”å›ä¸€ä¸ª `Set` å¯¹è±¡ï¼Œå®ƒåŒ…å«äº†åŸæ•°ç»„ä¸­æ‰€æœ‰å”¯ä¸€çš„å€¼ã€‚

- ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ `...` å°† `Set` å¯¹è±¡è½¬æ¢å›æ•°ç»„ã€‚

:::

**æ—¶é—´å¤æ‚åº¦ï¼š**

- `Set` çš„æ’å…¥å’ŒæŸ¥æ‰¾éƒ½æ˜¯ `O(1)`ï¼Œéå†æ•°ç»„çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n)`ï¼Œå› æ­¤æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n)`ã€‚

### ä½¿ç”¨ `filter()` å’Œ `indexOf()`

`filter()` æ–¹æ³•å¯ä»¥ç”¨äºè¿”å›æ»¡è¶³æ¡ä»¶çš„æ•°ç»„å…ƒç´ ã€‚é…åˆ `indexOf()` æ–¹æ³•ï¼Œå¯ä»¥æ£€æŸ¥å…ƒç´ åœ¨æ•°ç»„ä¸­çš„é¦–æ¬¡å‡ºç°ä½ç½®ï¼Œä»¥å®ç°å»é‡ã€‚

> ä¸¾ä¸ª ğŸŒ°

```javascript
const arr = [1, 2, 2, 3, 4, 4, 5]
const uniqueArr = arr.filter((item, index) => arr.indexOf(item) === index)
console.log(uniqueArr) // [1, 2, 3, 4, 5]
```

::: tip **è§£é‡Šï¼š**

- `arr.indexOf(item)` è¿”å›æ•°ç»„ä¸­ `item` çš„é¦–æ¬¡å‡ºç°ä½ç½®ã€‚

- `filter()` åªä¿ç•™é‚£äº›å½“å‰ç´¢å¼•ç­‰äº `indexOf(item)` çš„å…ƒç´ ï¼Œå»é™¤åé¢é‡å¤å‡ºç°çš„å…ƒç´ ã€‚

:::

**æ—¶é—´å¤æ‚åº¦ï¼š**

- å¯¹æ¯ä¸ªå…ƒç´ è°ƒç”¨ `indexOf()`ï¼Œå…¶æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n)`ï¼Œæ•´ä½“å¤æ‚åº¦æ˜¯ `O(n^2)`ï¼Œå› ä¸º `filter()` è¦éå†æ•°ç»„ï¼Œæ¯æ¬¡æŸ¥æ‰¾æ—¶éƒ½è¦éå†æ•´ä¸ªæ•°ç»„ã€‚

### ä½¿ç”¨ `reduce()` å’Œ `includes()`

`reduce()` å¯ä»¥ç”¨äºç´¯ç§¯æ“ä½œï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ é€ä¸€æ”¾å…¥æ–°çš„æ•°ç»„ï¼Œé…åˆ `includes()` æ–¹æ³•å¯ä»¥é¿å…å°†é‡å¤çš„å…ƒç´ æ”¾å…¥ç»“æœæ•°ç»„ã€‚

> ä¸¾ä¸ª ğŸŒ°

```javascript
const arr = [1, 2, 2, 3, 4, 4, 5]
const uniqueArr = arr.reduce((acc, curr) => {
  if (!acc.includes(curr)) {
    acc.push(curr)
  }
  return acc
}, [])
console.log(uniqueArr) // [1, 2, 3, 4, 5]
```

::: tip**è§£é‡Šï¼š**

- `reduce()` æ–¹æ³•é€ä¸ªéå†æ•°ç»„å…ƒç´ ï¼Œ`acc` æ˜¯ç´¯ç§¯å™¨ï¼Œ`curr` æ˜¯å½“å‰å…ƒç´ ã€‚

- æ¯æ¬¡è¿­ä»£æ£€æŸ¥ç´¯ç§¯å™¨æ•°ç»„ `acc` ä¸­æ˜¯å¦åŒ…å«å½“å‰å…ƒç´  `curr`ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™å°†å…¶æ·»åŠ åˆ° `acc` ä¸­ã€‚

:::

**æ—¶é—´å¤æ‚åº¦ï¼š**

- `includes()` æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n)`ï¼Œæ¯æ¬¡æ’å…¥å…ƒç´ æ—¶éƒ½è¦éå†æ•°ç»„ï¼Œå› æ­¤æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º `O(n^2)`ã€‚

### ä½¿ç”¨ `Map` è¿›è¡Œé”®å€¼å¯¹çš„å­˜å‚¨

`Map` æ˜¯ ES6 å¼•å…¥çš„é”®å€¼å¯¹é›†åˆï¼Œå¯ä»¥åˆ©ç”¨å®ƒçš„é”®çš„å”¯ä¸€æ€§æ¥å»é‡ã€‚

> ä¸¾ä¸ª ğŸŒ°

```javascript
const arr = [1, 2, 2, 3, 4, 4, 5]
const map = new Map()
const uniqueArr = arr.filter((item) => !map.has(item) && map.set(item, true))
console.log(uniqueArr) // [1, 2, 3, 4, 5]
```

::: tip **è§£é‡Šï¼š**

- `Map` å¯¹è±¡çš„ `has()` æ–¹æ³•ç”¨äºæ£€æŸ¥æŸä¸ªé”®æ˜¯å¦å­˜åœ¨ã€‚

- å¦‚æœ `Map` ä¸­ä¸å­˜åœ¨å½“å‰å…ƒç´ ï¼Œåˆ™å°†å…¶æ’å…¥ `Map`ï¼Œå¹¶é€šè¿‡ `filter()` è¿”å›å”¯ä¸€å€¼ã€‚

:::

**æ—¶é—´å¤æ‚åº¦ï¼š**

- `Map` çš„æ’å…¥å’ŒæŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦æ˜¯ `O(1)`ï¼Œéå†æ•°ç»„çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n)`ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n)`ã€‚

### ä½¿ç”¨ `forEach()` å’Œå¯¹è±¡å±æ€§

åˆ©ç”¨å¯¹è±¡çš„é”®æ˜¯å”¯ä¸€çš„è¿™ä¸€ç‰¹æ€§ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ¥å­˜å‚¨æ•°ç»„å…ƒç´ ï¼Œå¹¶é€šè¿‡å¯¹è±¡å±æ€§æ¥å»é‡ã€‚

> ä¸¾ä¸ª ğŸŒ°

```javascript
const arr = [1, 2, 2, 3, 4, 4, 5]
const uniqueObj = {}
const uniqueArr = []
arr.forEach((item) => {
  if (!uniqueObj[item]) {
    uniqueObj[item] = true
    uniqueArr.push(item)
  }
})
console.log(uniqueArr) // [1, 2, 3, 4, 5]
```

::: tip **è§£é‡Šï¼š**

- åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ `uniqueObj`ï¼Œç”¨æ¥è®°å½•æ•°ç»„ä¸­å‡ºç°è¿‡çš„å…ƒç´ ã€‚

- `forEach()` éå†æ•°ç»„ï¼Œå¦‚æœå¯¹è±¡ä¸­ä¸å­˜åœ¨è¯¥å…ƒç´ ä½œä¸ºé”®ï¼Œåˆ™å°†å…¶æ·»åŠ åˆ°å¯¹è±¡ä¸­ï¼Œå¹¶å°†å…ƒç´ æ·»åŠ åˆ° `uniqueArr`ã€‚

:::

**æ—¶é—´å¤æ‚åº¦ï¼š**

- æ’å…¥å¯¹è±¡çš„å±æ€§å’ŒæŸ¥æ‰¾å¯¹è±¡çš„å±æ€§çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ `O(1)`ï¼Œéå†æ•°ç»„çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n)`ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n)`ã€‚

### `ES5` å®ç°

åœ¨ `ES5` åŠä¹‹å‰çš„ `JavaScript` ç‰ˆæœ¬ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨åµŒå¥—å¾ªç¯çš„æ–¹å¼å®ç°å»é‡ã€‚

> ä¸¾ä¸ª ğŸŒ°

```javascript
const arr = [1, 2, 2, 3, 4, 4, 5]
const uniqueArr = []
for (let i = 0; i < arr.length; i++) {
  if (uniqueArr.indexOf(arr[i]) === -1) {
    uniqueArr.push(arr[i])
  }
}
console.log(uniqueArr) // [1, 2, 3, 4, 5]
```

::: tip **è§£é‡Šï¼š**

- é€šè¿‡åµŒå¥—å¾ªç¯ï¼ˆæˆ–è€…ä½¿ç”¨ `indexOf`ï¼‰æ¥æ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨å…ƒç´ ï¼Œæ¥å†³å®šæ˜¯å¦å°†è¯¥å…ƒç´ æ·»åŠ åˆ°ç»“æœæ•°ç»„ä¸­ã€‚

:::

**æ—¶é—´å¤æ‚åº¦ï¼š**

- å¤–å±‚å¾ªç¯æ˜¯ `O(n)`ï¼Œ`indexOf()` æŸ¥æ‰¾æ˜¯ `O(n)`ï¼Œæ€»æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n^2)`ã€‚
