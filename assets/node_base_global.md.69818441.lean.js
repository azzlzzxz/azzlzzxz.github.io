import{_ as n,o as a,c as l,N as p}from"./chunks/framework.2f525601.js";const i=JSON.parse('{"title":"åŸºç¡€ API","description":"","frontmatter":{},"headers":[],"relativePath":"node/base/global.md","lastUpdated":1729657648000}'),o={name:"node/base/global.md"};function e(c,s,r,t,y,D){return a(),l("div",null,s[0]||(s[0]=[p(`<h1 id="åŸºç¡€-api" tabindex="-1">åŸºç¡€ API <a class="header-anchor" href="#åŸºç¡€-api" aria-label="Permalink to &quot;åŸºç¡€ API&quot;">â€‹</a></h1><h2 id="global" tabindex="-1"><code>Global</code> <a class="header-anchor" href="#global" aria-label="Permalink to &quot;\`Global\`&quot;">â€‹</a></h2><ol><li><p>node ä¸­çš„å…¨å±€å˜é‡æ˜¯ <code>global</code>ã€‚</p></li><li><p>æµè§ˆå™¨ä¸­çš„ <code>this</code> æ˜¯æŒ‡ä»£çš„æ˜¯ <code>windowï¼ˆ</code>æµè§ˆå™¨ä¸­æ˜¯æ²¡æœ‰ <code>global</code> çš„å¯ä»¥ç†è§£ä¸º <code>window</code> ä»£ç†äº† <code>global</code>ï¼‰ï¼ŒæœåŠ¡ç«¯ä¸­çš„ <code>this</code> æŒ‡ä»£çš„éƒ½æ˜¯ <code>global</code>ã€‚</p></li><li><p>å½“æˆ‘ä»¬åœ¨æ–‡ä»¶ä¸­è®¿é—® <code>this</code> æ—¶ï¼Œå†…éƒ¨è¢«æ›´æ”¹äº†ï¼Œæ‰€ä»¥è¿”å›çš„ä¸æ˜¯ <code>global</code>ï¼Œè€Œæ˜¯ <code>module.exports</code>ã€‚</p></li><li><p><code>setInterval</code>ã€<code>clearInterval</code>ã€<code>setTimeout</code>ã€<code>clearTimeout</code>ã€<code>setImmediate</code>ã€<code>clearImmediate</code>ã€<code>queueMicrotask</code>ã€<code>process</code>ã€<code>buffer</code> è¿™äº›æ˜¯å…¨å±€å˜é‡ï¼ˆå°±æ˜¯ç›´æ¥åœ¨æ–‡ä»¶ä¸­ä¸éœ€è¦å£°æ˜å°±èƒ½ç›´æ¥è®¿é—®çš„ï¼‰ï¼Œä»–ä»¬éƒ½æ˜¯æŒ‚åœ¨ <code>global</code> ä¸Šçš„ï¼Œ<code>global.xxx</code>ã€‚</p></li><li><p><code>reqiure</code>ã€<code>module</code>ã€<code>exports</code>ã€<code>__dirname</code>ã€<code>__filename</code> ä¹Ÿå«å…¨å±€å˜é‡ï¼Œä½†å®é™…ä¸Šä¸æ˜¯ä»–ä»¬åªå­˜åœ¨äºæ¨¡å—çš„ä½œç”¨åŸŸä¸­ï¼Œä»–ä»¬ä¸åœ¨ <code>global</code> ä¸Šã€‚</p></li></ol><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">this</span><span style="color:#BABED8;">) </span><span style="color:#676E95;font-style:italic;">// {} æ‰€ä»¥è¿”å›çš„æ˜¯ç©ºå¯¹è±¡</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">a</span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// thisæŒ‡å‘è°ƒç”¨aå‡½æ•°çš„</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#82AAFF;">a</span><span style="color:#BABED8;">()</span></span>
<span class="line"><span style="color:#BABED8;">Object [global] </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">global</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span><span style="color:#BABED8;">Circular</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">clearInterval</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span><span style="color:#BABED8;">Function</span><span style="color:#F07178;">: </span><span style="color:#BABED8;">clearInterval</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">clearTimeout</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span><span style="color:#BABED8;">Function</span><span style="color:#F07178;">: </span><span style="color:#BABED8;">clearTimeout</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">setInterval</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span><span style="color:#BABED8;">Function</span><span style="color:#F07178;">: </span><span style="color:#BABED8;">setInterval</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">setTimeout</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span><span style="color:#BABED8;">Function</span><span style="color:#F07178;">: </span><span style="color:#BABED8;">setTimeout</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    [</span><span style="color:#82AAFF;">Symbol</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">nodejs</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">util</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">promisify</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">custom</span><span style="color:#F07178;">)]: [</span><span style="color:#82AAFF;">Function</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">anonymous</span><span style="color:#F07178;">)]</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">queueMicrotask</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span><span style="color:#BABED8;">Function</span><span style="color:#F07178;">: </span><span style="color:#BABED8;">queueMicrotask</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">clearImmediate</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span><span style="color:#BABED8;">Function</span><span style="color:#F07178;">: </span><span style="color:#BABED8;">clearImmediate</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">setImmediate</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span><span style="color:#BABED8;">Function</span><span style="color:#F07178;">: </span><span style="color:#BABED8;">setImmediate</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    [</span><span style="color:#82AAFF;">Symbol</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">nodejs</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">util</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">promisify</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">custom</span><span style="color:#F07178;">)]: [</span><span style="color:#82AAFF;">Function</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">anonymous</span><span style="color:#F07178;">)]</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="process-è¿›ç¨‹å¯¹è±¡" tabindex="-1"><code>process</code> è¿›ç¨‹å¯¹è±¡ <a class="header-anchor" href="#process-è¿›ç¨‹å¯¹è±¡" aria-label="Permalink to &quot;\`process\` è¿›ç¨‹å¯¹è±¡&quot;">â€‹</a></h2><ul><li><p><code>process</code> ä¸­å¸¸ç”¨çš„å˜é‡æœ‰ï¼š<code>platform</code>ã€<code>cwd</code>ã€<code>env</code>ã€<code>argv</code>ã€<code>nextTick</code>ã€‚</p></li><li><p><code>process.platform</code> ç”¨é€”ï¼šæ ¹æ®ä¸åŒå¹³å°æ“ä½œç³»ç»Ÿæ–‡ä»¶çš„ã€‚</p></li></ul><div class="language-lua line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">console.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(process.</span><span style="color:#FFCB6B;">platform</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">win32  windowsç³»ç»Ÿ</span></span>
<span class="line"><span style="color:#BABED8;">drawin linuxç³»ç»Ÿ</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><code>process.cwd()</code>ç”¨é€”ï¼šå¯ä»¥è·å–å½“å‰æ‰§è¡Œ <code>node</code> å‘½ä»¤çš„ç›®å½•ï¼Œå¯ä»¥æ‰¾åˆ°å½“å‰ç›®å½•ä¸‹çš„æŸä¸ªæ–‡ä»¶ã€‚</li></ul><p><code>process.cwd()</code>è·å–çš„è·¯å¾„æ˜¯å¯ä»¥æ”¹å˜çš„ï¼Œ<code>__dirname</code> æ˜¯ä¸å˜çš„ã€‚</p><div class="language-lua line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">console.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(process.</span><span style="color:#82AAFF;">cwd</span><span style="color:#BABED8;">())</span></span>
<span class="line"><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">Users</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">xinxu</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">Desktop</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">node</span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;">master</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><code>p<wbr>rocess.env</code> ç”¨é€”ï¼šæ ¹æ®ä¸åŒçš„ç¯å¢ƒå˜é‡åšé…ç½®ï¼ˆ<code>webpack</code> ç¯å¢ƒé…ç½®ï¼‰</li></ul><p><code>cross-env</code> è¿™æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œç”¨äºåŒºåˆ†ç¯å¢ƒã€‚</p><p>å¦‚æœ <code>windows</code> ç³»ç»Ÿå¯ä»¥ç”¨ <code>set xxx=xxx</code>ï¼Œ<code>mac</code> ç”¨ <code>export xxx=xxx</code></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#BABED8;"> (process</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">env</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">NODE_ENV </span><span style="color:#89DDFF;">===</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">production</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ç”Ÿäº§ç¯å¢ƒ</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">å¼€å‘ç¯å¢ƒ</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(process</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">env</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">A) </span><span style="color:#676E95;font-style:italic;">// 123 // å½“å‰ç³»ç»Ÿç¯å¢ƒå˜é‡</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/process_env.png" alt="process_env"></p><ul><li><code>process.argv</code> ç”¨é€”ï¼šè¿è¡Œä»£ç æ—¶ä¼ å…¥å‚æ•°ï¼Œå¯ä»¥è·å–åˆ°å½“å‰ç”¨æˆ·ä¼ çš„æ‰€æœ‰å‚æ•° <code>--port(ç®€å†™ï¼š-p)</code>ï¼Œ<code>--config</code></li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(process</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">argv)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ç¬¬ä¸€ä¸ªæŒ‡ä»£çš„æ˜¯nodeçš„æ‰§è¡Œæ–‡ä»¶ï¼Œnode.exe</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ç¬¬äºŒä¸ªæŒ‡ä»£çš„æ˜¯å½“å‰æ‰§è¡Œæ–‡ä»¶</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/process_argv.png" alt="process_argv"></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// é‚£å¦‚ä½•å–å‡ºç”¨æˆ·ä¼ å…¥çš„å‚æ•°å‘¢</span></span>
<span class="line"><span style="color:#BABED8;">process</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">argv</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">slice</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">2</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reduce</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">memo</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">current</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">index</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">arr</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//[--port, 3000, --config, a.js] å¯¹æ•°ç»„è¿›è¡Œæ”¶æ•›</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">current</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">startWith</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">--</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">memo</span><span style="color:#F07178;">[</span><span style="color:#BABED8;">current</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">slice</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">2</span><span style="color:#F07178;">)] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">arr</span><span style="color:#F07178;">[</span><span style="color:#BABED8;">index</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">memo</span></span>
<span class="line"><span style="color:#89DDFF;">},</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// =&gt; {port:3000,config:a.js}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><a href="https://www.npmjs.com/package/commander" target="_blank" rel="noreferrer">commnder</a>è¿™ä¸ª <code>npm</code> åŒ…å¯ä»¥è§£å†³ï¼Œè§£æç”¨æˆ·ä¼ å‚ï¼Œå°±ä¸éœ€è¦æ‰‹å†™æ•°ç»„æ”¶æ•›ã€‚</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> program </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">commander</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">program</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#BABED8;">(process</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">argv)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/commnder.png" alt="commnder"></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> program </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">commander</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">) </span><span style="color:#676E95;font-style:italic;">// è§£æç”¨æˆ·ä¼ é€’çš„å‚æ•°</span></span>
<span class="line"><span style="color:#BABED8;">program</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">name</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">zf</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">program</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">usage</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">[options]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">program</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">option</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">-p, --port &lt;v&gt;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">set server port</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">) </span><span style="color:#676E95;font-style:italic;">// &lt;v&gt;è¡¨ç¤º-p --port åé¢æœ‰å‚æ•°</span></span>
<span class="line"><span style="color:#BABED8;">program</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#BABED8;">(process</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">argv)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/zf.png" alt="zf"></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> program </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">commander</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">program</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">name</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">zf</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">program</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">usage</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">[options]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">program</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">option</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">-p, --port &lt;v&gt;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">set server port</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">) </span><span style="color:#676E95;font-style:italic;">// &lt;v&gt;è¡¨ç¤º-p --port åé¢æœ‰å‚æ•°</span></span>
<span class="line"><span style="color:#BABED8;">program</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#BABED8;">(process</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">argv)</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(program</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">port) </span><span style="color:#676E95;font-style:italic;">// 3000</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/process_port.png" alt="process_port"></p><h3 id="commander-è¯†åˆ«ä¸€äº›å‘½ä»¤" tabindex="-1"><code>commander</code> è¯†åˆ«ä¸€äº›å‘½ä»¤ <a class="header-anchor" href="#commander-è¯†åˆ«ä¸€äº›å‘½ä»¤" aria-label="Permalink to &quot;\`commander\` è¯†åˆ«ä¸€äº›å‘½ä»¤&quot;">â€‹</a></h3><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> program </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">reuqire</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">commander</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">program</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">name</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">zf</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">program</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">usage</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">[options]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">program</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">command</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rm</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">action</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">åˆ é™¤</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">program</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">prase</span><span style="color:#BABED8;">(process</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">argv)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/commander_rm.png" alt="commander_rm"></p><h2 id="child-process" tabindex="-1"><code>child_process</code> <a class="header-anchor" href="#child-process" aria-label="Permalink to &quot;\`child_process\`&quot;">â€‹</a></h2><p><code>child_process</code> æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œå¯ä»¥åˆ›å»ºå­è¿›ç¨‹ï¼Œå¯ä»¥æ‰§è¡Œå‘½ä»¤ã€‚</p><h3 id="child-process-exec" tabindex="-1"><code>child_process.exec</code> <a class="header-anchor" href="#child-process-exec" aria-label="Permalink to &quot;\`child_process.exec\`&quot;">â€‹</a></h3><p><code>exec</code> æ˜¯ä¸€ç§ç®€ä¾¿çš„æ–¹æ³•ï¼Œç”¨æ¥è¿è¡Œå‘½ä»¤å¹¶è·å–å®Œæ•´çš„æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯çš„ç»“æœã€‚å®ƒé€‚åˆæ‰§è¡Œä¸€äº›ç®€å•çš„å‘½ä»¤</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> exec </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">child_process</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‰§è¡Œ npm install å‘½ä»¤</span></span>
<span class="line"><span style="color:#82AAFF;">exec</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">npm install</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">error</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">stdout</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">stderr</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">error</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">æ‰§è¡Œé”™è¯¯: </span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">error</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">message</span><span style="color:#89DDFF;">}\`</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">stderr</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">æ ‡å‡†é”™è¯¯: </span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">stderr</span><span style="color:#89DDFF;">}\`</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">æ ‡å‡†è¾“å‡º: </span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">stdout</span><span style="color:#89DDFF;">}\`</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>åœ¨ ğŸ‘† çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ <code>exec</code> æ‰§è¡Œäº† <code>npm install</code> å‘½ä»¤ï¼Œå¹¶åœ¨å›è°ƒå‡½æ•°ä¸­å¤„ç†è¾“å‡ºå’Œå¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚</p><h3 id="child-process-spawn" tabindex="-1"><code>child_process.spawn</code> <a class="header-anchor" href="#child-process-spawn" aria-label="Permalink to &quot;\`child_process.spawn\`&quot;">â€‹</a></h3><p><code>spawn</code> æ˜¯ä¸€ç§æ›´åº•å±‚çš„æ–¹æ³•ï¼Œé€‚åˆæ‰§è¡Œé•¿æ—¶é—´è¿è¡Œçš„è¿›ç¨‹æˆ–éœ€è¦å®æ—¶å¤„ç†è¾“å‡ºçš„æƒ…å†µã€‚å®ƒä¸ä¼šç¼“å­˜æ‰€æœ‰çš„è¾“å‡ºï¼Œå› æ­¤é€‚åˆéœ€è¦å¤„ç†å¤§é‡æ•°æ®çš„æƒ…å†µ</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> spawn </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">child_process</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‰§è¡Œ npm install å‘½ä»¤</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> npmInstall </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">spawn</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">npm</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">install</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ç›‘å¬æ ‡å‡†è¾“å‡º</span></span>
<span class="line"><span style="color:#BABED8;">npmInstall</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">stdout</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">data</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">data</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">è¾“å‡º: </span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">data</span><span style="color:#89DDFF;">}\`</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ç›‘å¬æ ‡å‡†é”™è¯¯è¾“å‡º</span></span>
<span class="line"><span style="color:#BABED8;">npmInstall</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">stderr</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">data</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">data</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">é”™è¯¯: </span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">data</span><span style="color:#89DDFF;">}\`</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ç›‘å¬è¿›ç¨‹ç»“æŸ</span></span>
<span class="line"><span style="color:#BABED8;">npmInstall</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">close</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">code</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">å­è¿›ç¨‹é€€å‡ºï¼Œé€€å‡ºç  </span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">code</span><span style="color:#89DDFF;">}\`</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="child-process-execfile" tabindex="-1"><code>child_process.execFile</code> <a class="header-anchor" href="#child-process-execfile" aria-label="Permalink to &quot;\`child_process.execFile\`&quot;">â€‹</a></h3><p><code>execFile</code> æ˜¯ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•ï¼Œé€‚åˆæ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶çš„åç§°æˆ–è·¯å¾„ã€‚å®ƒä¸ <code>exec</code> çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œ<code>execFile</code> ä¼šç›´æ¥è°ƒç”¨æœ¬åœ°æ–‡ä»¶ï¼Œè€Œ <code>exec</code> åˆ™æ˜¯æ‰§è¡Œä¸€ä¸ªå‘½ä»¤ã€‚</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> execFile </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">child_process</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">execFile</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">npm</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">install</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">error</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">stdout</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">stderr</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">error</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">æ‰§è¡Œé”™è¯¯: </span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">error</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">message</span><span style="color:#89DDFF;">}\`</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">stderr</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">æ ‡å‡†é”™è¯¯: </span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">stderr</span><span style="color:#89DDFF;">}\`</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">æ ‡å‡†è¾“å‡º: </span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">stdout</span><span style="color:#89DDFF;">}\`</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="path" tabindex="-1"><code>path</code> <a class="header-anchor" href="#path" aria-label="Permalink to &quot;\`path\`&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> path </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">path</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">) </span><span style="color:#676E95;font-style:italic;">// å¤„ç†è·¯å¾„çš„</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// é»˜è®¤è§£æçš„è·¯å¾„æ˜¯ä»¥process.cwd()ä¸ºåŸºå‡†ï¼Œä½†æ˜¯process.chdiræ˜¯èƒ½å¤Ÿæ›´æ”¹çš„</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// __dirname æ˜¯æ–‡ä»¶æ‰€åœ¨çš„ç›®å½• ä¸èƒ½æ›´æ”¹</span></span>
<span class="line"><span style="color:#BABED8;">path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#BABED8;">(__dirname</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">note.md</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">) </span><span style="color:#676E95;font-style:italic;">// ä½ ç»™æˆ‘ä¸ªç›¸å¯¹è·¯å¾„ï¼Œæˆ‘è¿˜ä½ ä¸ªç»å¯¹è·¯å¾„ï¼Œæœ‰æ‹¼æ¥åŠŸèƒ½</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">join</span><span style="color:#BABED8;">(__dirname</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">note.md</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">) </span><span style="color:#676E95;font-style:italic;">// åªæ˜¯ç®€å•çš„æ‹¼æ¥</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// å¦‚æœé‡åˆ° / çš„è·¯å¾„ï¼Œresolveä¼šè®¤ä¸ºæ˜¯æ ¹è·¯å¾„ï¼Œjoinåˆ™æ˜¯æ‹¼æ¥åœ¨ä¸€èµ·</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#BABED8;">(__dirname</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)) </span><span style="color:#676E95;font-style:italic;">// /</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">join</span><span style="color:#BABED8;">(__dirname</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)) </span><span style="color:#676E95;font-style:italic;">// /Users/xinxu/Desktop/node-master/6.node/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">extname</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a.min.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">) </span><span style="color:#676E95;font-style:italic;">// .js å–åç¼€å</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">relative</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a/a.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">) </span><span style="color:#676E95;font-style:italic;">// a.js å»æ‰ç›¸åŒçš„éƒ¨åˆ†</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">dirname</span><span style="color:#BABED8;">(__dirname) </span><span style="color:#676E95;font-style:italic;">// path.dirname = __dirname</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="vm" tabindex="-1"><code>vm</code> <a class="header-anchor" href="#vm" aria-label="Permalink to &quot;\`vm\`&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> vm </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vm</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#BABED8;"> a </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> log </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">console.log(a)</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">eveal</span><span style="color:#BABED8;">(log) </span><span style="color:#676E95;font-style:italic;">// 1</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//evealæ‰§è¡Œæ—¶ä¼šæŸ¥æ‰¾ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥evealæ˜¯ä¸å¹²å‡€çš„ï¼Œå¦‚æœå…¶ä»–æ–‡ä»¶æ¨¡å—é‡Œä¹Ÿæœ‰aï¼Œé‚£ä¹ˆevalåœ¨æŸ¥æ‰¾ä¸Šä¸‹æ–‡æ—¶ä¼šå‡ºç°é—®é¢˜</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#BABED8;"> fn </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">Function</span><span style="color:#BABED8;">(log)</span></span>
<span class="line"><span style="color:#82AAFF;">fn</span><span style="color:#BABED8;">() </span><span style="color:#676E95;font-style:italic;">//  a is not defined</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// new Functionæ˜¯å¯ä»¥äº§ç”Ÿä¸€ä¸ªæ‰§è¡Œç¯å¢ƒï¼Œä¸ä¾èµ–äºå¤–å±‚ä½œç”¨åŸŸï¼Œå¿…é¡»åŒ…ä¸€å±‚å‡½æ•°ï¼Œæ¨¡ç‰ˆå¼•æ“ä¸­ä¼šä½¿ç”¨new Function + with</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">vm</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">runInThisContext</span><span style="color:#BABED8;">(log) </span><span style="color:#676E95;font-style:italic;">// a is not defined</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// è®©å­—ç¬¦ä¸²ç›´æ¥æ‰§è¡Œï¼Œå¹¶åœ¨æ²™ç®±ç¯å¢ƒä¸­</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div>`,46)]))}const B=n(o,[["render",e]]);export{i as __pageData,B as default};
