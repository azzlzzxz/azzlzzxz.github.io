# è§£æ„èµ‹å€¼

`ES6` å…è®¸æŒ‰ç…§ä¸€å®šæ¨¡å¼ï¼Œä»æ•°ç»„å’Œå¯¹è±¡ä¸­æå–å€¼ï¼Œå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œè¿™è¢«ç§°ä¸ºè§£æ„ï¼Œè§£æ„èµ‹å€¼çš„è§„åˆ™æ˜¯ï¼Œåªè¦ç­‰å·å³è¾¹çš„å€¼ä¸æ˜¯å¯¹è±¡æˆ–æ•°ç»„ï¼Œå°±å…ˆå°†å…¶è½¬ä¸ºå¯¹è±¡ã€‚

## æ•°ç»„çš„è§£æ„èµ‹å€¼

> ä¸¾å‡ ä¸ª ğŸŒ°

```js
let [a, b] = [1, 2]

console.log(a) // 1
console.log(b) // 2
```

```js
let [a, [[b], c]] = [1, [[2], 3]]

a // 1
b // 2
c // 3
```

```js
let [, , third] = ['a', 'b', 'c']

third // "c"
```

```js
let [a, , c] = [1, 2, 3]

a // 1
c // 3
```

æœ¬è´¨ä¸Šï¼Œè¿™ç§å†™æ³•å±äº`â€œæ¨¡å¼åŒ¹é…â€`ï¼Œåªè¦ç­‰å·ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒï¼Œå·¦è¾¹çš„å˜é‡å°±ä¼šè¢«èµ‹äºˆå¯¹åº”çš„å€¼ï¼Œå¦‚æœè§£æ„ä¸æˆåŠŸï¼Œå˜é‡çš„å€¼å°±ç­‰äº undefined

```js
let [x, y, ...z] = ['a']

x // "a"
y // undefined
z // []
```

::: tip æ³¨æ„ âš ï¸

ç”±äºæ•°ç»„æœ¬è´¨æ˜¯ç‰¹æ®Šçš„å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥å¯¹æ•°ç»„è¿›è¡Œå¯¹è±¡å±æ€§çš„è§£æ„

```js
let arr = [1, 2, 3]
let { 0: first, [arr.length - 1]: last } = arr
first // 1
last // 3
```

:::

## å¯¹è±¡çš„è§£æ„èµ‹å€¼

::: tip å¯¹è±¡è§£æ„ä¸æ•°ç»„è§£æ„çš„ä¸åŒ

- æ•°ç»„çš„å…ƒç´ æ˜¯æŒ‰æ¬¡åºæ’åˆ—çš„ï¼Œå˜é‡çš„å–å€¼ç”±å®ƒçš„ä½ç½®å†³å®š

- å¯¹è±¡çš„å±æ€§æ²¡æœ‰æ¬¡åºï¼Œå˜é‡å¿…é¡»ä¸å±æ€§åŒåï¼Œæ‰èƒ½å–åˆ°æ­£ç¡®çš„å€¼

:::

```js
let { foo, bar } = { foo: 'aaa', bar: 'bbb' }
foo // "aaa"
bar // "bbb"

let { baz } = { foo: 'aaa', bar: 'bbb' }
baz // undefined
```

### åµŒå¥—è§£æ„èµ‹è§£æ„

```js
let {
  foo: { bar },
} = { foo: { bar: 123 } }
bar // 123
```

```js
let {
  foo,
  foo: { bar },
} = { foo: { bar: 123 } }

foo // { bar: 123 }
bar // 123
```

### é»˜è®¤å€¼

å¯¹è±¡è§£æ„å¯ä»¥æŒ‡å®šé»˜è®¤å€¼

```js
let { foo = 1 } = {}
foo // 1

let { bar: foo = 1 } = {}
foo // 1

let { bar: foo = 1 } = { bar: 5 }
foo // 5
```

é»˜è®¤å€¼ç”Ÿæ•ˆçš„æ¡ä»¶æ˜¯ï¼Œå¯¹è±¡çš„å±æ€§å€¼ä¸¥æ ¼ç­‰äº`undefined`

```js
let { foo = true } = { foo: undefined }
foo // true

let { foo = true } = { foo: null }
foo // null
```

::: tip æ³¨æ„ âš ï¸

- å¦‚æœè¦å°†ä¸€ä¸ªå·²ç»å£°æ˜çš„å˜é‡ç”¨äºè§£æ„èµ‹å€¼ï¼Œåªæœ‰ä¸å°†å¤§æ‹¬å·å†™åœ¨è¡Œé¦–ï¼Œé¿å… `JavaScript` å°†å…¶è§£é‡Šä¸ºä»£ç å—

```js{2,3}
// é”™è¯¯
let x;
{x} = {x: 1};

// æ­£ç¡®
let x;
({x} = {x: 1});
```

- è§£æ„èµ‹å€¼å…è®¸ç­‰å·å·¦è¾¹çš„æ¨¡å¼ä¹‹ä¸­ï¼Œä¸æ”¾ç½®ä»»ä½•å˜é‡å

```js
;({} = 'abc')
;({} = [])
```

:::

### `undefined` å’Œ `null`

ç”±äº undefined å’Œ null æ— æ³•è½¬ä¸ºå¯¹è±¡ï¼Œæ‰€ä»¥å¯¹å®ƒä»¬è¿›è¡Œè§£æ„èµ‹å€¼ï¼Œéƒ½ä¼šæŠ¥é”™

```js
let { foo } = undefined
// Uncaught TypeError: Cannot destructure property `foo` of 'undefined' or 'null'.

let { foo } = null
// Uncaught TypeError: Cannot destructure property `foo` of 'undefined' or 'null'.
```

## å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼

å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥è§£æ„èµ‹å€¼ã€‚è¿™æ˜¯å› ä¸ºå­—ç¬¦ä¸²è¢«è½¬æ¢æˆäº†ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡

```js
const [a, b, c] = 'steins gate'
a // "s"
b // "t"
c // "e"
```

ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª`length`å±æ€§ï¼Œå› æ­¤è¿˜å¯ä»¥å¯¹è¿™ä¸ªå±æ€§è§£æ„èµ‹å€¼

```js
let { length: len } = 'steins gate'
len // 11
```

## å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼

```js
function add([x, y]) {
  return x + y
}

add([1, 2]) // 3
add([1]) // NaN
```

- å‡½æ•°å‚æ•°çš„è§£æ„ä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤å€¼

```js
function add([x, y] = [0, 0]) {
  return x + y
}

add([1, 2]) // 3
add([1]) // 1
add() // 0
```
