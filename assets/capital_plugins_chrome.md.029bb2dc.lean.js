import{_ as n,o as a,c as l,N as o}from"./chunks/framework.2673bc46.js";const y=JSON.parse('{"title":"Chrome æ‰©å±•æ’ä»¶å¼€å‘","description":"","frontmatter":{},"headers":[],"relativePath":"capital/plugins/chrome.md","lastUpdated":1727667273000}'),p={name:"capital/plugins/chrome.md"};function e(c,s,t,r,D,F){return a(),l("div",null,s[0]||(s[0]=[o(`<h1 id="chrome-æ‰©å±•æ’ä»¶å¼€å‘" tabindex="-1">Chrome æ‰©å±•æ’ä»¶å¼€å‘ <a class="header-anchor" href="#chrome-æ‰©å±•æ’ä»¶å¼€å‘" aria-label="Permalink to &quot;Chrome æ‰©å±•æ’ä»¶å¼€å‘&quot;">â€‹</a></h1><p><code>Chrome</code> æ‰©å±•æ˜¯ç”¨äºæ‰©å…… <code>Chrome</code> æµè§ˆå™¨åŠŸèƒ½çš„ç¨‹åºã€‚ä¸»è¦æ˜¯å¯¹æµè§ˆå™¨åŠŸèƒ½çš„å¢å¼ºï¼Œå®ƒæ›´å¼ºè°ƒä¸æµè§ˆå™¨ç›¸ç»“åˆã€‚æ¯”å¦‚ <code>Chrome</code> æ‰©å±•å¯ä»¥æ›´æ”¹ç”¨æˆ·å½“å‰æµè§ˆçš„ç½‘é¡µä¸­çš„å†…å®¹ã€è·å– <code>Devtools</code> ä¸­çš„ä¿¡æ¯ã€æ›´æ”¹æµè§ˆå™¨ä»£ç†æœåŠ¡å™¨çš„è®¾ç½®ç­‰ç­‰ã€‚</p><p><code>Chrome</code> æ‰©å±•æ˜¯ä¸€ç³»åˆ—æ–‡ä»¶çš„é›†åˆï¼Œè¿™äº›æ–‡ä»¶åŒ…æ‹¬<strong>HTML æ–‡ä»¶</strong>ã€<strong>CSS æ ·å¼æ–‡ä»¶</strong>ã€<strong>JavaScript è„šæœ¬æ–‡ä»¶</strong>ã€<strong>å›¾ç‰‡ç­‰é™æ€æ–‡ä»¶</strong>ä»¥åŠ <code>manifest.json</code> æ¸…å•æ–‡ä»¶ã€‚</p><p>ğŸ”— <a href="https://developer.chrome.com/docs/extensions/mv3/" target="_blank" rel="noreferrer">Chrome æ‰©å±•ç¨‹åºå®˜æ–¹æ–‡æ¡£</a></p><h2 id="æ‰©å±•ç¨‹åºåŸºæœ¬ç»„æˆç»“æ„" tabindex="-1">æ‰©å±•ç¨‹åºåŸºæœ¬ç»„æˆç»“æ„ <a class="header-anchor" href="#æ‰©å±•ç¨‹åºåŸºæœ¬ç»„æˆç»“æ„" aria-label="Permalink to &quot;æ‰©å±•ç¨‹åºåŸºæœ¬ç»„æˆç»“æ„&quot;">â€‹</a></h2><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/chrome_ext_jiagou.jpg" alt="chrome_ext_jiagou"></p><p>æ‰©å±•ç¨‹åºæ˜¯é€šè¿‡ã€å†…å®¹è„šæœ¬ã€ã€æµ®å±‚ã€ã€åå°è„šæœ¬ã€ã€<code>devtools</code> ä¿¡æ¯ã€ç­‰åˆä½œé€šä¿¡å»å®ç°ç‰¹å®šåŠŸèƒ½çš„åå°ç¨‹åºã€‚</p><h3 id="manifest-json" tabindex="-1"><code>manifest.json</code> <a class="header-anchor" href="#manifest-json" aria-label="Permalink to &quot;\`manifest.json\`&quot;">â€‹</a></h3><p>æ‰©å±•è¢«å®‰è£…åï¼Œ<code>Chrome</code> å°±ä¼šè¯»å–æ‰©å±•ä¸­çš„ <code>manifest.json</code> æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶çš„æ–‡ä»¶åå›ºå®šä¸º <code>manifest.json</code>ï¼Œå†…å®¹æ˜¯æŒ‰ç…§ä¸€å®šæ ¼å¼æè¿°çš„æ‰©å±•ç›¸å…³ä¿¡æ¯ï¼Œå¦‚æ‰©å±•åç§°ã€ç‰ˆæœ¬ã€æ›´æ–°åœ°å€ã€è¯·æ±‚çš„æƒé™ã€æ‰©å±•çš„ <code>UI</code> ç•Œé¢å…¥å£ç­‰ç­‰ã€‚è¿™æ · <code>Chrome</code> å°±å¯ä»¥çŸ¥é“åœ¨æµè§ˆå™¨ä¸­å¦‚ä½•å‘ˆç°è¿™ä¸ªæ‰©å±•ï¼Œä»¥åŠè¿™ä¸ªæ‰©å±•å¦‚ä½•åŒç”¨æˆ·è¿›è¡Œäº¤äº’ã€‚</p><p>è‡ª 2022 å¹´ 1 æœˆ 17 æ—¥èµ·ï¼Œ<code>Chrome</code> ç½‘ä¸Šåº”ç”¨å•†åº—å·²åœæ­¢æ¥å—æ–°çš„ <code>Manifest V2</code> æ‰©å±•ã€‚<code>Manifest V2</code> å°†äº 2024 å¹´é€æ­¥æ·˜æ±°ã€‚</p><p><code>Manifest V3</code> æ‰©å±•åœ¨å®‰å…¨æ€§ã€éšç§å’Œæ€§èƒ½æ–¹é¢å¾—åˆ°å¢å¼ºï¼Œå› æ­¤åç»­æˆ‘ä»¬å°†ä½¿ç”¨æœ€æ–°çš„ <code>V3</code> ç‰ˆæœ¬ã€‚</p><p>ä¸‹é¢åˆ—ä¸¾éƒ¨åˆ†é…ç½®ï¼Œå®Œæ•´é…ç½®æ¸…å•è§å®˜æ–¹ï¼š<a href="https://developer.chrome.com/docs/extensions/mv3/manifest/" target="_blank" rel="noreferrer">ğŸ“ƒ Manifest é…ç½®</a></p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// åŸºæœ¬ä¿¡æ¯</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">manifest_version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// V3 ç‰ˆæœ¬</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">My Extension</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// æ’ä»¶åç§°</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.0.1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// æ’ä»¶ç‰ˆæœ¬</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">A plain text description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// æ’ä»¶æè¿°</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">default_locale</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">en</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// é»˜è®¤è¯­è¨€</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">author</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">xxx</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// æ’ä»¶ä½œè€…</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">   </span><span style="color:#676E95;font-style:italic;">// ç”¨äºé…ç½®ç‚¹å‡»æ’ä»¶å›¾æ ‡åçš„æµ®å±‚ï¼Œpopup.html åˆ™æ˜¯æµ®å±‚çš„å†…å®¹</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">action</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">     </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">default_title</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Click to view a popup</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// é¼ æ ‡ç§»åŠ¨åˆ°æ‰©å±•å›¾æ ‡æ—¶æ˜¾ç¤º tooltip</span></span>
<span class="line"><span style="color:#BABED8;">     </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">default_popup</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">popup.html</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">   </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">icons</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;">...</span><span style="color:#89DDFF;">},</span><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// æ’ä»¶å›¾æ ‡é…ç½®</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// \`åå°è„šæœ¬\`ï¼Œè¯¥è„šæœ¬ä¸èƒ½è®¿é—®DOMï¼Œåªèƒ½é€šè¿‡ \`æ¶ˆæ¯ä¼ é€’\` ä¸æ‰©å±•ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†è¿›è¡Œé€šä¿¡ï¼Œä¾‹å¦‚ï¼š\`å†…å®¹è„šæœ¬\`ã€\`æµ®å±‚\`</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">background</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">service_worker</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">background.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// \`å†…å®¹è„šæœ¬\`ï¼Œåœ¨ç½‘é¡µä¸­è¿è¡Œï¼Œå¯ä»¥è®¿é—®DOMã€è·å–é¡µé¢ä¸Šä¸‹æ–‡ä»¥åŠå‘é¡µé¢ä¸­æ’å…¥å†…å®¹ï¼Œé€šè¿‡ \`æ¶ˆæ¯ä¼ é€’\` ä¸æ‰©å±•ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†è¿›è¡Œé€šä¿¡</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">content_scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#BABED8;">     </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">       </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">matches</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://*.nytimes.com/*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// æŒ‡å®šæ­¤å†…å®¹è„šæœ¬è¢«æ’å…¥åˆ°å“ªäº›é¡µé¢ä¸­</span></span>
<span class="line"><span style="color:#BABED8;">       </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">css</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">my-styles.css</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// è¦æ³¨å…¥åŒ¹é…é¡µé¢çš„ CSS æ–‡ä»¶åˆ—è¡¨</span></span>
<span class="line"><span style="color:#BABED8;">       </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">content-script.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// è¦æ³¨å…¥åŒ¹é…é¡µé¢çš„ JavaScript æ–‡ä»¶åˆ—è¡¨ï¼ŒæŒ‰ç…§æ•°ç»„çš„é¡ºåºæ³¨å…¥ï¼ˆä¸æ”¯æŒç½‘ç»œè·¯å¾„ï¼‰</span></span>
<span class="line"><span style="color:#BABED8;">       </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">run_at</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">document_idle</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// ä½•æ—¶å°† JavaScript æ–‡ä»¶æ³¨å…¥ç½‘é¡µï¼Œå¯é€‰å€å€¼ï¼šdocument_idle document_start document_end</span></span>
<span class="line"><span style="color:#BABED8;">     </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">   </span><span style="color:#89DDFF;">],</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// ä½¿ç”¨/æ·»åŠ devtoolsä¸­çš„åŠŸèƒ½</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">devtools_page</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">devtools.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// æ’ä»¶è®¾ç½®é¡µé¢</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">options_page</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">options.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">options_ui</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">chrome_style</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">true,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">page</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">options.html</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// è¯¥æ’ä»¶å¯ä»¥è®¿é—®çš„èµ„æºï¼Œåå°è„šæœ¬å‘é€è·¨åŸŸè¯·æ±‚éœ€è¦é…ç½®è¯¥é¡¹</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">host_permissions</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://*/*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://*/*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// å¿…éœ€æƒé™ï¼Œæ‰©å±•ç¨‹åºçš„åŸºæœ¬åŠŸèƒ½æ‰€éœ€çš„æƒé™ã€‚ æƒé™åˆ—è¡¨ï¼šhttps://developer.chrome.com/docs/extensions/mv2/declare_permissions/</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">permissions</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">storage</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// å¯é€‰æƒé™ï¼Œä¸ permissions ç±»ä¼¼ï¼Œä½†åœ¨æ‰©å±•è¿è¡Œæ—¶æˆäºˆï¼Œè€Œä¸æ˜¯æå‰æˆäºˆ</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">optional_permissions</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">downloads</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h3 id="æµ®å±‚-popup" tabindex="-1">æµ®å±‚<code>(popup)</code> <a class="header-anchor" href="#æµ®å±‚-popup" aria-label="Permalink to &quot;æµ®å±‚\`(popup)\`&quot;">â€‹</a></h3><p>ç‚¹å‡»æ’ä»¶å›¾æ ‡åå‡ºç°çš„æµ®å±‚ï¼Œ<code>popup.html</code> åˆ™æ˜¯æµ®å±‚çš„å†…å®¹ï¼Œå¯ä»¥åœ¨ <code>popup.html</code> ä¸­å¼•å…¥ <code>JS</code> æ–‡ä»¶ï¼Œä»¥ç”¨äºä¸æ‰©å±•å…¶ä»–éƒ¨åˆ†è¿›è¡Œäº¤äº’ã€‚</p><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/chrome_popup.jpg" alt="chrome_popup"></p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">My Extension</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">action</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">default_title</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Click to view a popup</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">default_popup</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">popup.html</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p><a href="https://developer.chrome.com/docs/extensions/reference/action/" target="_blank" rel="noreferrer">ğŸ“ƒ action</a></p></blockquote><h3 id="åå°è„šæœ¬-service-worker" tabindex="-1">åå°è„šæœ¬<code>(service_worker)</code> <a class="header-anchor" href="#åå°è„šæœ¬-service-worker" aria-label="Permalink to &quot;åå°è„šæœ¬\`(service_worker)\`&quot;">â€‹</a></h3><p>æ‰©å±•ç¨‹åºä½¿ç”¨ <code>service_worker</code> <strong>åå°è„šæœ¬</strong>æ¥ç›‘è§†<strong>æ‰©å±•ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†æ³¨å†Œçš„äº‹ä»¶</strong>ï¼Œç„¶åæ ¹æ®æŒ‡å®šçš„æŒ‡ä»¤åšå‡ºååº”ã€‚</p><p><code>service_worker</code> åå°è„šæœ¬çš„ç‰¹æ€§ï¼š</p><ul><li>æ— æ³•è®¿é—®é¡µé¢ <code>DOM</code>ã€‚</li><li>ä¼šä¸€ç›´å¤„äºä¼‘çœ çŠ¶æ€ï¼Œç›´åˆ°å®ƒä»¬æ­£åœ¨ä¾¦å¬çš„äº‹ä»¶è§¦å‘ï¼ŒæŒ‰ç…§æŒ‡å®šçš„æŒ‡ä»¤åšå‡ºååº”ï¼Œç„¶åå¸è½½ã€‚</li><li>å¯ä»¥å‘é€è·¨åŸŸè¯·æ±‚ã€‚</li></ul><blockquote><p><a href="https://developer.chrome.com/docs/extensions/mv3/service_workers/" target="_blank" rel="noreferrer">ğŸ“ƒ service_worker</a></p></blockquote><h4 id="æ³¨å†Œ-service-worker" tabindex="-1">æ³¨å†Œ <code>service_worker</code> <a class="header-anchor" href="#æ³¨å†Œ-service-worker" aria-label="Permalink to &quot;æ³¨å†Œ \`service_worker\`&quot;">â€‹</a></h4><p>åœ¨ <code>manifest.json</code> æ¸…å•æ–‡ä»¶çš„ <code>background</code> å­—æ®µé…ç½®ä¸€ä¸ª <code>JS</code> æ–‡ä»¶ä»¥æŒ‡å®šåå°è„šæœ¬ï¼š</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Awesome Test Extension</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  ...</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">background</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">service_worker</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">background.js</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">  ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>è¿˜å¯ä»¥é€‰æ‹©æŒ‡å®šä¸€ä¸ªé¢å¤–çš„å­—æ®µï¼Œ<code>&quot;type&quot;: &quot;module&quot;</code> ä»¥è®© <code>service_worker</code> æ”¯æŒ <code>ES</code> æ¨¡å—ï¼Œè¿™å…è®¸æˆ‘ä»¬ä½¿ç”¨ <code>import</code>ã€‚ä¾‹å¦‚ï¼š</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">background</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">service_worker</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">background.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œå‚é˜… <a href="https://web.dev/es-modules-in-sw/" target="_blank" rel="noreferrer">ES modules in service workers</a></p><h4 id="åˆå§‹åŒ–æ‰©å±•" tabindex="-1">åˆå§‹åŒ–æ‰©å±• <a class="header-anchor" href="#åˆå§‹åŒ–æ‰©å±•" aria-label="Permalink to &quot;åˆå§‹åŒ–æ‰©å±•&quot;">â€‹</a></h4><p>ç›‘å¬åˆ° <code>chrome.runtime.onInstalled</code> äº‹ä»¶è§¦å‘æ—¶è¡¨æ˜æ’ä»¶å®‰è£…å®Œæˆã€‚å¯ä»¥ä½¿ç”¨æ­¤äº‹ä»¶è®¾ç½®çŠ¶æ€æˆ–ä¸€æ¬¡æ€§åˆå§‹åŒ–ï¼Œä¾‹å¦‚è®¾ç½®å³é”®èœå•ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">chrome</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">runtime</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">onInstalled</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addListener</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">chrome</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">contextMenus</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    id</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">sampleContextMenu</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    title</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Sample Context Menu</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    contexts</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">selection</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="å†…å®¹è„šæœ¬-content-script" tabindex="-1">å†…å®¹è„šæœ¬<code>(content_script)</code> <a class="header-anchor" href="#å†…å®¹è„šæœ¬-content-script" aria-label="Permalink to &quot;å†…å®¹è„šæœ¬\`(content_script)\`&quot;">â€‹</a></h3><p><strong>å†…å®¹è„šæœ¬</strong>æ˜¯åœ¨ç½‘é¡µä¸Šä¸‹æ–‡ä¸­è¿è¡Œçš„æ–‡ä»¶ã€‚é€šè¿‡ä½¿ç”¨æ ‡å‡†æ–‡æ¡£å¯¹è±¡æ¨¡å‹<code>(DOM)</code>ï¼Œä»–ä»¬èƒ½å¤Ÿè¯»å–æµè§ˆå™¨è®¿é—®çš„ç½‘é¡µçš„è¯¦ç»†ä¿¡æ¯<code>(DOM)</code>ï¼Œå¯¹å…¶è¿›è¡Œæ›´æ”¹ï¼Œå¹¶å°†ä¿¡æ¯ä¼ é€’ç»™æ‰©å±•çš„å…¶ä»–éƒ¨åˆ†ã€‚</p><p>æ­¤å¤–ï¼Œ<strong>å†…å®¹è„šæœ¬</strong>åªå¯ä»¥è®¿é—®éƒ¨åˆ† <code>chrome API</code>ï¼š</p><ul><li><code>i18n</code></li><li><code>storage</code></li><li><code>runtime</code>: <ul><li><code>connect</code></li><li><code>getManifest</code></li><li><code>getURL</code></li><li><code>id</code></li><li><code>onConnect</code></li><li><code>onMessage</code></li><li><code>sendMessage</code></li></ul></li></ul><p><strong>å†…å®¹è„šæœ¬</strong>å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>message API</code> æ¥ä¸æ‰©å±•çš„å…¶ä»–éƒ¨åˆ†è¿›è¡Œé€šä¿¡ã€‚</p><blockquote><p><a href="https://developer.chrome.com/docs/extensions/mv3/content_scripts/" target="_blank" rel="noreferrer">ğŸ“ƒ content_script</a></p></blockquote><h4 id="æ³¨å…¥æ–¹å¼" tabindex="-1">æ³¨å…¥æ–¹å¼ <a class="header-anchor" href="#æ³¨å…¥æ–¹å¼" aria-label="Permalink to &quot;æ³¨å…¥æ–¹å¼&quot;">â€‹</a></h4><p>å†…å®¹è„šæœ¬å¯ä»¥<strong>é™æ€å£°æ˜</strong>æˆ–ä»¥<strong>ç¼–ç¨‹æ–¹å¼</strong>æ³¨å…¥ã€‚</p><h5 id="ä½¿ç”¨é™æ€å£°æ˜æ³¨å…¥" tabindex="-1">ä½¿ç”¨é™æ€å£°æ˜æ³¨å…¥ <a class="header-anchor" href="#ä½¿ç”¨é™æ€å£°æ˜æ³¨å…¥" aria-label="Permalink to &quot;ä½¿ç”¨é™æ€å£°æ˜æ³¨å…¥&quot;">â€‹</a></h5><p><code>manifest.json</code> ä¸­çš„ <code>content_scripts</code> å­—æ®µå£°æ˜ç”¨äºåº”è¯¥åœ¨ç›®æ ‡é¡µé¢ä¸Šè‡ªåŠ¨è¿è¡Œçš„è„šæœ¬ã€‚</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">My extension</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;"> ...</span></span>
<span class="line"><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">content_scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#BABED8;">   </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">     </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">matches</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://*.nytimes.com/*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#BABED8;">     </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">css</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">my-styles.css</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#BABED8;">     </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">content-script.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#BABED8;">   </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#BABED8;"> ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h5 id="ä»¥ç¼–ç¨‹æ–¹å¼æ³¨å…¥" tabindex="-1">ä»¥ç¼–ç¨‹æ–¹å¼æ³¨å…¥ <a class="header-anchor" href="#ä»¥ç¼–ç¨‹æ–¹å¼æ³¨å…¥" aria-label="Permalink to &quot;ä»¥ç¼–ç¨‹æ–¹å¼æ³¨å…¥&quot;">â€‹</a></h5><p>å¯¹éœ€è¦åœ¨ç‰¹å®šåœºåˆè¿è¡Œçš„<strong>å†…å®¹è„šæœ¬</strong>ä½¿ç”¨ç¼–ç¨‹æ³¨å…¥ã€‚</p><p>è¦ä»¥ç¼–ç¨‹æ–¹å¼æ³¨å…¥å†…å®¹è„šæœ¬ï¼Œæ‰©å±•ç¨‹åºè¦æœ‰ <code>activeTab</code> æƒé™ï¼Œå…·ä½“é…ç½®ï¼š</p><p><code>manifest.json:</code></p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">My extension</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  ...</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">permissions</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">activeTab</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// å£°æ˜ activeTab æƒé™</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">background</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">service_worker</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">background.js</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><code>content-script.js:</code></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// ä¿®æ”¹é¡µé¢èƒŒæ™¯è‰²</span></span>
<span class="line"><span style="color:#BABED8;">document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">body</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">style</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">backgroundColor </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">orange</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>background.js:</code></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">chrome</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">action</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">onClicked</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addListener</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">tab</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ç‚¹å‡»æ‰©å±•å›¾æ ‡æ—¶åŠ¨æ€æ³¨å…¥å†…å®¹è„šæœ¬</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">chrome</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">scripting</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">executeScript</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    target</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> tabId</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">tab</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">id</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">    files</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">content-script.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>æˆ–è€…å‡½æ•°ä½“ä¹Ÿå¯ä»¥ä½œä¸ºå†…å®¹è„šæœ¬æ³¨å…¥å’Œæ‰§è¡Œï¼š</p><p><code>background.js:</code></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">injectedFunction</span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">body</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">style</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">backgroundColor</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">orange</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">chrome</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">action</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">onClicked</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addListener</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">tab</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ç‚¹å‡»æ‰©å±•å›¾æ ‡æ—¶åŠ¨æ€æ³¨å…¥å†…å®¹è„šæœ¬</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">chrome</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">scripting</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">executeScript</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    target</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> tabId</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">tab</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">id</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ç›´æ¥è¿è¡Œå‡½æ•°</span></span>
<span class="line"><span style="color:#F07178;">    func</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">injectedFunction</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="é…ç½®é¡µé¢-options-page" tabindex="-1">é…ç½®é¡µé¢<code>(options_page)</code> <a class="header-anchor" href="#é…ç½®é¡µé¢-options-page" aria-label="Permalink to &quot;é…ç½®é¡µé¢\`(options_page)\`&quot;">â€‹</a></h3><p>æä¾›é…ç½®é¡µé¢æ¥å…è®¸ç”¨æˆ·è‡ªå®šä¹‰æ‰©å±•ç¨‹åºçš„åŠŸèƒ½ã€‚</p><p>å‡ ç§è·³è½¬åˆ°æ‰©å±•ç¨‹åºé…ç½®é¡µé¢çš„æ–¹æ³•ï¼š</p><ul><li>é€šè¿‡ <strong>å³é”®å•å‡»å·¥å…·æ </strong> ä¸­çš„æ‰©å±•ç¨‹åºå›¾æ ‡ç„¶åé€‰æ‹© <strong>é€‰é¡¹</strong>ï¼›</li><li>å¯¼èˆªæ è¾“å…¥ <code>chrome://extensions</code> è·³è½¬åˆ°æ‰©å±•ç¨‹åºç®¡ç†é¡µé¢ï¼Œç„¶åç‚¹å‡»ç›®æ ‡æ‰©å±•ç¨‹åºçš„ã€Œè¯¦æƒ…ã€-ã€Œæ‰©å±•ç¨‹åºé€‰é¡¹ã€ï¼›</li><li>åœ¨æ‰©å±•ç¨‹åºå†…è°ƒç”¨ <code>chrome.runtime.openOptionsPage()</code> APIã€‚</li></ul><blockquote><p><a href="https://developer.chrome.com/docs/extensions/mv3/options/" target="_blank" rel="noreferrer">ğŸ“ƒ options_page</a></p></blockquote><h3 id="devtools-devtools-page" tabindex="-1"><code>DevTools(devtools_page)</code> <a class="header-anchor" href="#devtools-devtools-page" aria-label="Permalink to &quot;\`DevTools(devtools_page)\`&quot;">â€‹</a></h3><p>æ‰©å±•ç¨‹åºçš„ <code>DevTools</code> ä¸º <code>Chrome DevTools</code> æ·»åŠ äº†åŠŸèƒ½ã€‚å®ƒå¯ä»¥æ·»åŠ æ–°çš„ <code>UI</code> é¢æ¿å’Œä¾§è¾¹æ ï¼Œä¸å”¤å‡º <code>DevTools</code> çš„é¡µé¢äº¤äº’ï¼ˆæ‰“å¼€ <code>F12</code> çš„é¡µé¢ï¼‰ï¼Œè·å–æœ‰å…³ç½‘ç»œè¯·æ±‚çš„ä¿¡æ¯ç­‰ç­‰ã€‚<code>DevTools</code> æ‰©å±•å¯ä»¥è®¿é—®ä¸€ç»„é¢å¤–çš„ <code>DevTools</code> ç‰¹å®šæ‰©å±• <code>API</code>ï¼š</p><ul><li><code>devtools.inspectedWindow</code> è·å–<strong>è¢«æ£€æŸ¥é¡µé¢</strong>çš„é€‰é¡¹å¡ <code>ID</code>ã€ä¸Šä¸‹æ–‡ä»£ç ã€è·å–é¡µé¢å†…çš„èµ„æºåˆ—è¡¨ã€‚</li><li><code>devtools.network</code> æ£€ç´¢ç½‘ç»œé¢æ¿ä¸­å¼€å‘è€…å·¥å…·æ˜¾ç¤ºçš„ç½‘ç»œè¯·æ±‚ä¿¡æ¯ã€‚</li><li><code>devtools.panels</code> å°†çš„æ‰©å±•çš„ <code>DevTools</code> é›†æˆåˆ°å¼€å‘äººå‘˜å·¥å…·çª—å£ <code>UI</code> ä¸­ï¼šåˆ›å»ºè‡ªå·±çš„é¢æ¿ã€è®¿é—®ç°æœ‰é¢æ¿å¹¶æ·»åŠ ä¾§è¾¹æ ã€‚</li></ul><p><code>Devtools</code> åœ¨æ‰©å±•ç¨‹åºæ¶æ„ä¸­çš„ä½“ç°ï¼š</p><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/chrome_ext_devtools.png" alt="chrome_ext_devtools.png"></p><blockquote><p><a href="https://developer.chrome.com/docs/extensions/mv3/devtools/" target="_blank" rel="noreferrer">ğŸ“ƒ DevTools</a></p></blockquote><h2 id="æ¶ˆæ¯ä¼ é€’" tabindex="-1">æ¶ˆæ¯ä¼ é€’ <a class="header-anchor" href="#æ¶ˆæ¯ä¼ é€’" aria-label="Permalink to &quot;æ¶ˆæ¯ä¼ é€’&quot;">â€‹</a></h2><p>ç”±äº<strong>å†…å®¹è„šæœ¬</strong><code>(content_script)</code>åœ¨ç½‘é¡µä¸Šä¸‹æ–‡è€Œä¸æ˜¯æ‰©å±•ç¨‹åºçš„ä¸Šä¸‹æ–‡ä¸­è¿è¡Œï¼Œå› æ­¤å®ƒä»¬é€šå¸¸éœ€è¦æŸç§æ–¹å¼ä¸æ‰©å±•ç¨‹åºçš„å…¶ä½™éƒ¨åˆ†è¿›è¡Œé€šä¿¡ã€‚</p><p><strong>å†…å®¹è„šæœ¬</strong>å’Œæ‰©å±•ç¨‹åºå…¶ä»–éƒ¨åˆ†çš„é€šä¿¡é€šè¿‡ä½¿ç”¨<strong>æ¶ˆæ¯ä¼ é€’</strong>è¿›è¡Œã€‚ä»»ä½•ä¸€æ–¹éƒ½å¯ä»¥ä¾¦å¬ä»å¦ä¸€ç«¯å‘é€çš„æ¶ˆæ¯ï¼Œå¹¶åœ¨åŒä¸€é€šé“ä¸Šå“åº”ã€‚æ¶ˆæ¯å¯ä»¥åŒ…å«ä»»ä½•æœ‰æ•ˆçš„ <code>JSON</code> å¯¹è±¡ï¼ˆ<code>null</code>, <code>boolean</code>, <code>number</code>, <code>string</code>, <code>array</code>, <code>object</code>ï¼‰ã€‚</p><p>æœ‰ä¸€ä¸ªç”¨äº<strong>ä¸€æ¬¡æ€§è¯·æ±‚</strong>çš„ <code>API</code> å’Œä¸€ä¸ª<strong>å»ºç«‹é•¿æœŸè¿æ¥</strong>APIï¼ˆå®ƒå…è®¸åœ¨å…±äº«ä¸Šä¸‹æ–‡ä¸­äº¤æ¢å¤šæ¡æ¶ˆæ¯çš„é•¿è¿æ¥ã€‚å¦‚æœçŸ¥é“å¦ä¸€ä¸ªæ‰©å±•çš„ IDï¼Œä¹Ÿå¯ä»¥å‘å¦ä¸€ä¸ªæ‰©å±•å‘é€æ¶ˆæ¯ï¼‰ã€‚</p><blockquote><p><a href="https://developer.chrome.com/docs/extensions/mv3/messaging/" target="_blank" rel="noreferrer">ğŸ“ƒ æ¶ˆæ¯ä¼ é€’</a></p></blockquote><h3 id="ä¸€æ¬¡æ€§è¯·æ±‚" tabindex="-1">ä¸€æ¬¡æ€§è¯·æ±‚ <a class="header-anchor" href="#ä¸€æ¬¡æ€§è¯·æ±‚" aria-label="Permalink to &quot;ä¸€æ¬¡æ€§è¯·æ±‚&quot;">â€‹</a></h3><p>å¦‚æœåªéœ€è¦å‘æ‰©å±•ç¨‹åºçš„å¦ä¸€éƒ¨åˆ†(å†…å®¹è„šæœ¬æˆ–åå°è„šæœ¬)å‘é€ä¸€æ¡æ¶ˆæ¯ï¼ˆå¹¶ä¸”å¯ä»¥é€‰æ‹©è¿”å›å“åº”ï¼‰ï¼Œåº”è¯¥ä½¿ç”¨ç®€åŒ–çš„ <code>runtime.sendMessage</code> æˆ– <code>tabs.sendMessage</code>ã€‚è¿™å¯ä»¥å°†ä¸€æ¬¡æ€§ <code>JSON</code> å¯åºåˆ—åŒ–æ¶ˆæ¯ä»<strong>å†…å®¹è„šæœ¬</strong>å‘é€åˆ°<strong>åå°è„šæœ¬</strong>æˆ–å…¶ä»–éƒ¨åˆ†ï¼Œåä¹‹äº¦ç„¶ã€‚å¯é€‰çš„å›è°ƒå‚æ•°å…è®¸æˆ‘ä»¬å¤„ç†æ¥è‡ªå¦ä¸€ä¾§çš„å“åº”ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚</p><p>ä»å†…å®¹è„šæœ¬å‘é€è¯·æ±‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">chrome</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">runtime</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sendMessage</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">greeting</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">},</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">response</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">response</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">farewell</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>åœ¨æ¥æ”¶ç«¯ï¼Œéœ€è¦è®¾ç½®ä¸€ä¸ª <code>runtime.onMessage</code> äº‹ä»¶ä¾¦å¬å™¨æ¥å¤„ç†æ¶ˆæ¯ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">chrome</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">runtime</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">onMessage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addListener</span><span style="color:#BABED8;">(</span><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">request</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">sender</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">sendResponse</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// æœ‰ sender.tab è¯´æ˜æ˜¯ä» å†…å®¹è„šæœ¬ å‘è¿‡æ¥çš„ï¼Œå¦åˆ™å°±æ˜¯ä»å…¶ä»–éƒ¨åˆ†å‘è¿‡æ¥çš„</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">sender</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">tab</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">from a content script:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">sender</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">tab</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">url</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">from the extension</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">greeting</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#82AAFF;">sendResponse</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> farewell</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">goodbye</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ä»<strong>æ‰©å±•ç¨‹åºå…¶ä»–éƒ¨åˆ†</strong>å‘<strong>å†…å®¹è„šæœ¬</strong>å‘é€è¯·æ±‚çœ‹èµ·æ¥éå¸¸ç›¸ä¼¼ï¼Œåªæ˜¯éœ€è¦æŒ‡å®šå°†è¯·æ±‚å‘é€åˆ°å“ªä¸ªé€‰é¡¹å¡ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">chrome</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">tabs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">query</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">active</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">currentWindow</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">},</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">tabs</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// å‘å½“å‰æµè§ˆå™¨çª—å£æ­£åœ¨æ¿€æ´»çš„ tab é¡µé¢å‘é€æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">chrome</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">tabs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sendMessage</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">tabs</span><span style="color:#F07178;">[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">id</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> greeting</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">response</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">response</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">farewell</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="é•¿æœŸè¿æ¥" tabindex="-1">é•¿æœŸè¿æ¥ <a class="header-anchor" href="#é•¿æœŸè¿æ¥" aria-label="Permalink to &quot;é•¿æœŸè¿æ¥&quot;">â€‹</a></h4><p>æœ‰æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½éœ€æ±‚å»ºç«‹ä¸€ä¸ªé•¿ä¼šè¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ <code>runtime.connect</code> æˆ– <code>tabs.connect</code> æ‰“å¼€ä¸€ä¸ªä»å†…å®¹è„šæœ¬åˆ°<strong>å…¶ä»–éƒ¨åˆ†</strong>çš„é•¿æœŸé€šé“ï¼Œåä¹‹äº¦ç„¶ã€‚é€šé“å¯ä»¥æœ‰ä¸€ä¸ªå¯é€‰çš„åç§°ï¼Œå…è®¸æˆ‘ä»¬åŒºåˆ†ä¸åŒç±»å‹çš„è¿æ¥ã€‚</p><blockquote><p>æœ‰å…³å»ºç«‹é•¿è¿æ¥çš„æ›´å¤šä¿¡æ¯ï¼Œå‚é˜…ï¼š<a href="https://developer.chrome.com/docs/extensions/mv3/messaging/#connect" target="_blank" rel="noreferrer">é•¿æœŸè¿æ¥</a></p></blockquote><h2 id="å¼€å‘è°ƒè¯•" tabindex="-1">å¼€å‘è°ƒè¯• <a class="header-anchor" href="#å¼€å‘è°ƒè¯•" aria-label="Permalink to &quot;å¼€å‘è°ƒè¯•&quot;">â€‹</a></h2><ul><li><p><code>popup</code> å³é”®æ‰©å±•å›¾æ ‡ï¼Œé€‰æ‹©<strong>å®¡æŸ¥å¼¹å‡ºå†…å®¹</strong>ï¼Œä¼šå¼¹å‡ºæ§åˆ¶å°</p></li><li><p><code>service_worker</code> æœ‰ä¸€ä¸ªä¸“å±çš„æ§åˆ¶å°ï¼Œå¯ä»¥åœ¨é‚£é‡ŒæŸ¥çœ‹æ‰“å°ä¿¡æ¯</p></li><li><p><code>content_script</code> ç›´æ¥åœ¨é¡µé¢æ§åˆ¶å°æŸ¥çœ‹ä¿¡æ¯</p></li><li><p><code>devtools</code> åœ¨æ­¤é¡µé¢æ‰“å¼€ <code>F12</code> è¿›è¡Œè°ƒè¯• <code>chrome-extension://{æ‰©å±•ID}/devtools/index.html</code>ï¼Œæ‰©å±• <code>ID</code> æŸ¥çœ‹ï¼Œæˆ–è€…åœ¨ã€æ‰©å±•ç®¡ç†ã€‘-ã€è¯¦æƒ…ã€‘-ã€æŸ¥çœ‹è§†å›¾ã€‘æ‰¾åˆ°å¯¹åº”æ‰©å±•çš„è°ƒè¯•çª—å£åœ°å€ã€‚</p></li></ul><h2 id="è¸©å‘è®°å½•" tabindex="-1">è¸©å‘è®°å½• <a class="header-anchor" href="#è¸©å‘è®°å½•" aria-label="Permalink to &quot;è¸©å‘è®°å½•&quot;">â€‹</a></h2><h3 id="æ— æ³•ä¸ºå†…å®¹è„šæœ¬åŠ è½½-javascriptã€‚-æ— æ³•åŠ è½½æ¸…å•" tabindex="-1">æ— æ³•ä¸ºå†…å®¹è„šæœ¬åŠ è½½ <code>JavaScript</code>ã€‚ æ— æ³•åŠ è½½æ¸…å• <a class="header-anchor" href="#æ— æ³•ä¸ºå†…å®¹è„šæœ¬åŠ è½½-javascriptã€‚-æ— æ³•åŠ è½½æ¸…å•" aria-label="Permalink to &quot;æ— æ³•ä¸ºå†…å®¹è„šæœ¬åŠ è½½ \`JavaScript\`ã€‚ æ— æ³•åŠ è½½æ¸…å•&quot;">â€‹</a></h3><p>å‡ºç°æ­¤é”™è¯¯å¯èƒ½æœ‰å¤šç§åŸå› ï¼Œä¸€èˆ¬éƒ½æ˜¯ <code>manifest.json</code> ä¸­çš„é…ç½®é¡¹æœ‰é—®é¢˜ï¼Œå¯ä»¥æ’æŸ¥ä¸‹åˆ—å±æ€§ï¼š</p><ul><li><code>content_scripts</code> ä¸­çš„ <code>js</code> ä¸èƒ½ä½¿ç”¨ç½‘ç»œè·¯å¾„</li><li><code>default_locale</code> é…ç½®ä¸º <code>zh_CN</code> åéœ€è¦åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º <code>_locales</code> è¯­è¨€åŒ…ç›®å½•</li><li>å°†éœ€è¦åœ¨å¤–éƒ¨ä½¿ç”¨çš„èµ„æºåˆ—åˆ° <code>web_accessible_resources</code> å±æ€§ä¸­</li></ul><h3 id="unchecked-runtime-lasterror-this-function-must-be-called-during-a-user-gesture" tabindex="-1"><code>Unchecked runtime.lastError: This function must be called during a user gesture</code> <a class="header-anchor" href="#unchecked-runtime-lasterror-this-function-must-be-called-during-a-user-gesture" aria-label="Permalink to &quot;\`Unchecked runtime.lastError: This function must be called during a user gesture\`&quot;">â€‹</a></h3><ul><li>æœªç»æ£€æŸ¥çš„ <code>runtime.lastError</code>ï¼šå¿…é¡»åœ¨ç”¨æˆ·æ‰‹åŠ¿æœŸé—´è°ƒç”¨æ­¤å‡½æ•°</li></ul><p>ç”±è„šæœ¬è‡ªåŠ¨è§¦å‘çš„åŠ¨æ€è·å–æƒé™ï¼Œè€Œä¸æ˜¯ç”±ç”¨æˆ·çš„ç‚¹å‡»äº‹ä»¶è§¦å‘ï¼Œè§£å†³åŠæ³•ï¼š</p><ul><li>å°†åŠ¨æ€æƒé™æ”¹æˆå›ºå®šæƒé™ã€‚</li></ul><h3 id="unchecked-runtime-lasterror-the-message-port-closed-before-a-response-was-received" tabindex="-1"><code>Unchecked runtime.lastError: The message port closed before a response was received</code> <a class="header-anchor" href="#unchecked-runtime-lasterror-the-message-port-closed-before-a-response-was-received" aria-label="Permalink to &quot;\`Unchecked runtime.lastError: The message port closed before a response was received\`&quot;">â€‹</a></h3><ul><li>æœªç»æ£€æŸ¥çš„ <code>runtime.lastError</code>ï¼šæ¶ˆæ¯ç«¯å£åœ¨æ”¶åˆ°å“åº”ä¹‹å‰å…³é—­</li></ul><p>è¿™ç§é—®é¢˜æ˜¯åœ¨è°ƒç”¨ <code>chrome.runtime.sendMessage</code> æ—¶æ·»åŠ äº†å›è°ƒï¼Œä½†æ˜¯åœ¨æ¥å—æ¶ˆæ¯ç«¯æ²¡æœ‰è°ƒç”¨å›ä¼ æ¶ˆæ¯æ–¹æ³•å¯¼è‡´çš„ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// å‘é€ç«¯</span></span>
<span class="line"><span style="color:#BABED8;">chrome</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">runtime</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sendMessage</span><span style="color:#BABED8;">(</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">action</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">server</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">source</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">test</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">response</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">alert</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">response</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">text</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ¥æ”¶ç«¯</span></span>
<span class="line"><span style="color:#BABED8;">chrome</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">extension</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">onMessage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addListener</span><span style="color:#BABED8;">(</span><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">request</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">sender</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">sendResponse</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">action</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">server</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">request</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// è¿™é‡Œä¸è°ƒç”¨ sendResponse å›ä¼ æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>è§£å†³åŠæ³•ï¼š</p><ul><li>å‘é€ç«¯å»æ‰å›è°ƒæ–¹æ³•æˆ–è€…æ¥æ”¶ç«¯è°ƒç”¨å›è°ƒæ–¹æ³•ã€‚</li></ul><h3 id="extension-context-invalidated" tabindex="-1"><code>Extension context invalidated</code> <a class="header-anchor" href="#extension-context-invalidated" aria-label="Permalink to &quot;\`Extension context invalidated\`&quot;">â€‹</a></h3><ul><li>æ‰©å±•ä¸Šä¸‹æ–‡æ— æ•ˆ</li></ul><p>å½“åœ¨æ‰©å±•ç®¡ç†ä¸­å¿ƒåˆ·æ–°æˆ–æ›´æ–°äº†æŸæ‰©å±•ï¼Œç„¶ååˆ‡æ¢åˆ°æµè§ˆå™¨æŸæ ‡ç­¾é¡µçš„é¡µé¢ä¸­ç›´æ¥ä½¿ç”¨è¯¥æ‰©å±•æ—¶ï¼Œæ‰©å±•å¯èƒ½æŠ¥é”™ <code>Extension context invalidated</code>ã€‚</p><p>æŠ¥é”™ä½ç½®å¯èƒ½åœ¨ <code>devtools/index.js</code> é‡Œçš„ <code>&quot;chrome.runtime.sendMessage()&quot;</code> éƒ¨åˆ†ã€‚</p><p>å¤„ç†æ–¹å¼ï¼š</p><ol><li>åœ¨æ›´æ–°äº†æ‰©å±•åï¼Œä½¿ç”¨æ‰©å±•å‰ï¼Œé¦–å…ˆåˆ·æ–°ç›¸å…³é¡µé¢</li><li>ä½¿ç”¨ <code>chrome.runtime.id</code> åˆ¤æ–­æ‰©å±•ä¸Šä¸‹æ–‡æ˜¯å¦æœ‰æ•ˆï¼Œç„¶åå†æ‰§è¡Œ <code>chrome.runtime.sendMessage()</code></li></ol><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">chrome</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">runtime</span><span style="color:#89DDFF;">?.</span><span style="color:#BABED8;">id </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#BABED8;"> chrome</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">runtime</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sendMessage</span><span style="color:#BABED8;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="devtools-ä¸­ä½¿ç”¨-chrome-devtools-network-onrequestfinished-addlistener-è·å–ä¸åˆ°ç½‘ç»œè¯·æ±‚" tabindex="-1"><code>devtools</code> ä¸­ä½¿ç”¨ <code>chrome.devtools.network.onRequestFinished.addListener</code> è·å–ä¸åˆ°ç½‘ç»œè¯·æ±‚ <a class="header-anchor" href="#devtools-ä¸­ä½¿ç”¨-chrome-devtools-network-onrequestfinished-addlistener-è·å–ä¸åˆ°ç½‘ç»œè¯·æ±‚" aria-label="Permalink to &quot;\`devtools\` ä¸­ä½¿ç”¨ \`chrome.devtools.network.onRequestFinished.addListener\` è·å–ä¸åˆ°ç½‘ç»œè¯·æ±‚&quot;">â€‹</a></h3><p>ä¸è¦ç›´æ¥æ‰“å¼€ <code>devtools</code> é¢æ¿åˆ·æ–°é¡µé¢ï¼Œè¦åˆ·æ–°é¡µé¢åå†æ‰“å¼€ <code>devtools</code> é¢æ¿å†è¯·æ±‚æ¥å£ã€‚</p><h2 id="å‘å¸ƒæ‰©å±•" tabindex="-1">å‘å¸ƒæ‰©å±• <a class="header-anchor" href="#å‘å¸ƒæ‰©å±•" aria-label="Permalink to &quot;å‘å¸ƒæ‰©å±•&quot;">â€‹</a></h2><ul><li>å‘å¸ƒåˆ° <code>Chrome</code> åº”ç”¨å•†åº—ï¼ˆéœ€è¦$5 æ³¨å†Œè´¹ï¼‰ï¼Œåœ°å€ï¼š<a href="https://chrome.google.com/webstore/devconsole" target="_blank" rel="noreferrer">https://chrome.google.com/webstore/devconsole</a></li><li>åœ¨ã€æ‰©å±•ç®¡ç†ã€‘é¡µé¢æ‰“åŒ…æœ¬åœ°çš„æ‰©å±•ç¨‹åºï¼Œå°†æ‰“åŒ…å‡ºæ¥çš„ <code>.crx</code> æ–‡ä»¶æ‹–å…¥ <code>Chrome</code> å³å¯å®‰è£…ã€‚</li></ul><blockquote><p>ä½†æ˜¯ç°åœ¨ <code>Chrome</code> å·²ç»ä¸å…è®¸ä½¿ç”¨æœªåœ¨ <code>Chrome</code> åº”ç”¨å•†åº—ä¸­å‘å¸ƒçš„æ‰©å±•ç¨‹åºï¼Œå®‰è£…åä¼šæç¤º <em>è¯¥æ‰©å±•ç¨‹åºæœªåˆ—åœ¨ <code>Chrome</code> åº”ç”¨å•†åº—ä¸­ï¼Œå¹¶å¯èƒ½æ˜¯åœ¨æ‚¨ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹æ·»åŠ çš„ã€‚</em> å‚é˜…ï¼š<a href="https://support.google.com/chrome_webstore/answer/2811969?visit_id=638048013328104701-2621356661&amp;p=ui_remove_non_cws_extensions&amp;hl=zh-Hans&amp;rd=2" target="_blank" rel="noreferrer">Chrome åœç”¨çš„æ‰©å±•ç¨‹åº</a></p></blockquote>`,110)]))}const d=n(p,[["render",e]]);export{y as __pageData,d as default};
