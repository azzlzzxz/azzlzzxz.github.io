import{_ as l,B as t,o as r,c as i,x as e,D as c,z as d,Q as s,a as o}from"./chunks/framework.a5035e6c.js";const n="/assets/cache.6f82399d.jpg",p="/assets/server_worker.cd04f871.png",h="/assets/memory_cache.8d236083.png",_="/assets/304.50c6a7ee.png",V=JSON.parse('{"title":"浏览器缓存机制","description":"","frontmatter":{},"headers":[],"relativePath":"base/browser/cache.md","lastUpdated":1703671474000}'),u={name:"base/browser/cache.md"},m=s("",33),f=e("code",null,"no-cache",-1),b=e("code",null,"no-cache",-1),C=e("br",null,null,-1),T=e("code",null,"no-store",-1),g=e("code",null,"Cache-Control",-1),k=e("code",null,"max-age",-1),x=e("code",null,"Expires",-1),P=e("code",null,"max-age",-1),D=e("code",null,"Firefox ",-1),q=e("code",null,"Chrome ",-1),y=e("code",null," 200 (from disk cache)",-1),E=e("code",null," 200 OK (from memory cache)",-1),v=s("",24),M=e("h3",{id:"启发式缓存会引起什么问题",tabindex:"-1"},[o("启发式缓存会引起什么问题 "),e("a",{class:"header-anchor",href:"#启发式缓存会引起什么问题","aria-label":'Permalink to "启发式缓存会引起什么问题"'},"​")],-1),F=e("p",null,[o("考虑一个情况，假设你有一个文件没有设置缓存时间，在一个月前你更新了上个版本。这次发版后，你可能得等到 3 天后用户才看到新的内容了。如果这个资源还在"),e("code",null,"CDN"),o("也缓存了，则问题会更严重。")],-1),S=e("p",null,[o("所以，要给资源设置合理的缓存时间。不要不设置缓存，也不要设置过长时间的缓存。强缓存时间过长，则内容要很久才会覆盖新版本，缓存时间过短，服务器可能背不住。一般带"),e("code",null,"hash"),o("的文件缓存时间可以长一点。")],-1);function B(A,L,H,N,W,I){const a=t("font");return r(),i("div",null,[m,e("p",null,[e("strong",null,[c(a,{color:"#FF4229"},{default:d(()=>[o("请注意"),f,o("指令很多人误以为是不缓存，这是不准确的，"),b,o(" 的意思是可以缓存，但每次用应该去想服务器验证缓存是否可用。"),C]),_:1})])]),e("p",null,[e("strong",null,[c(a,{color:"#FF9D00"},{default:d(()=>[T,o("才是不缓存内容。当在首部字段"),g,o("有指定"),k,o("指令时，比起首部字段 "),x,o("，会优先处理"),P,o("指令。命中强缓存的表现形式："),D,o("浏览器表现为一个灰色的 200 状态码。"),q,o("浏览器状态码表现为"),y,o("或是"),E]),_:1})])]),v,e("p",null,[e("strong",null,[c(a,{color:"FF9D00"},{default:d(()=>[o("注：只有在服务端没有返回明确的缓存策略时才会激活浏览器的启发式缓存策略。")]),_:1})])]),M,F,S])}const $=l(u,[["render",B]]);export{V as __pageData,$ as default};
