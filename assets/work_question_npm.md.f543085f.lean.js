import{_ as a,o as n,c as e,N as l}from"./chunks/framework.2f525601.js";const u=JSON.parse('{"title":"问题/解决方式记录","description":"","frontmatter":{},"headers":[],"relativePath":"work/question/npm.md","lastUpdated":1728914769000}'),p={name:"work/question/npm.md"};function o(t,s,r,c,i,d){return n(),e("div",null,s[0]||(s[0]=[l(`<h1 id="问题-解决方式记录" tabindex="-1">问题/解决方式记录 <a class="header-anchor" href="#问题-解决方式记录" aria-label="Permalink to &quot;问题/解决方式记录&quot;">​</a></h1><h2 id="mac-os-m1-跑老项目安装-node-sass-遇到的一系列问题" tabindex="-1"><code>mac OS M1</code> 跑老项目安装 <code>node-sass</code> 遇到的一系列问题 <a class="header-anchor" href="#mac-os-m1-跑老项目安装-node-sass-遇到的一系列问题" aria-label="Permalink to &quot;\`mac OS M1\` 跑老项目安装 \`node-sass\` 遇到的一系列问题&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/node_sass.png" alt="node_sass"></p><p>项目初始化 <code>install</code>，会报错，因为本地 <code>node</code> 版本太高了。</p><div class="language-lua line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">gyp ERR! node </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;">v v16.18.1</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><code>Mac M1</code> 版本 <code>node 16+</code>版本 编译项目报错 <code>Node Sass</code> 不兼容 <code>arm64</code> 架构</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">Module build </span><span style="color:#FFCB6B;">failed</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Error</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> Node Sass does not yet support your current </span><span style="color:#FFCB6B;">environment</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> OS X Unsupported </span><span style="color:#82AAFF;">architecture</span><span style="color:#BABED8;"> (arm64) </span><span style="color:#89DDFF;font-style:italic;">with</span><span style="color:#BABED8;"> Unsupported </span><span style="color:#82AAFF;">runtime</span><span style="color:#BABED8;"> (</span><span style="color:#F78C6C;">93</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">For more information on which environments are supported please </span><span style="color:#FFCB6B;">see</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//github.com/sass/node-sass/releases/tag/v4.14.1</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><table><thead><tr><th>NodeJS</th><th>Supported node-sass version</th><th>Node Module</th></tr></thead><tbody><tr><td>Node 15</td><td>5.0+</td><td>88</td></tr><tr><td>Node 14</td><td>4.14+</td><td>83</td></tr><tr><td>Node 13</td><td>4.13+, &lt;5.0</td><td>79</td></tr><tr><td>Node 12</td><td>4.12+</td><td>72</td></tr><tr><td>Node 11</td><td>4.10+, &lt;5.0</td><td>67</td></tr><tr><td>Node 10</td><td>4.9+</td><td>64</td></tr><tr><td>Node 8</td><td>4.5.3+, &lt;5.0</td><td>57</td></tr><tr><td>Node &lt;8</td><td>&lt;5.0</td><td>&lt;57</td></tr></tbody></table><p>💡 那么我们去降低 <code>node</code> 版本，使用 <a href="./../utility/nvm">nvm</a> 工具</p><p>在我使用 <code>nvm</code> 安装低版本的 <code>node</code> 时，又报错了 ❗️</p><p>原因是： 对于 <code>v15</code> 以下的任何内容，您需要使用 <code>Rosetta 2</code>安装节点。</p><p>在我 <code>nvm use</code> 时又报错，<code>python</code> 版本 3.11 过高</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 切换版本</span></span>
<span class="line"><span style="color:#FFCB6B;">brew</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">switch</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">python</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">3.8</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>之后</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 重新安装node-sass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">​​​​​​​npm</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">install</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">node-sass@4.14.1</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>node-sass</code> 是安装成功了，But 项目运行又报 <code>node-sass</code> 不支持当前平台环境 💢</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 切换 sass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">​​​​​​​npm</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">install</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">node-sass@npm:sass</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>成功解决改问题 😄，项目顺利跑了起来。</p><div class="tip custom-block"><p class="custom-block-title">参考链接</p><p><a href="https://stackoverflow.com/questions/67254339/nvm-install-node-fails-to-install-on-macos-big-sur-m1-chip" target="_blank" rel="noreferrer">参考链接-starkoverflow 解决 nvm 安装问题</a></p><p><a href="https://stackoverflow.com/questions/60038415/why-does-nvm-use-the-incorrect-version-of-python" target="_blank" rel="noreferrer">参考链接-nvm 的 python 版本问题</a></p><p><a href="https://github.com/sass/node-sass/releases/tag/v4.14.1" target="_blank" rel="noreferrer">参考链接-node-sass 平台支持</a></p><p><a href="https://stackoverflow.com/questions/68095626/node-sass-with-apple-m1-big-sur-and-arm64" target="_blank" rel="noreferrer">参考链接-切换 sass</a></p></div><h2 id="pnpm-v7-crashes-add-global-with-error-unable-to-find-the-global-bin-directory" tabindex="-1">[pnpm v7] crashes &quot;add --global&quot; with &quot;ERROR  Unable to find the global bin directory&quot; <a class="header-anchor" href="#pnpm-v7-crashes-add-global-with-error-unable-to-find-the-global-bin-directory" aria-label="Permalink to &quot;[pnpm v7] crashes &quot;add --global&quot; with &quot;ERROR  Unable to find the global bin directory&quot;&quot;">​</a></h2><p>pnpm 升级遇到的问题</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">add</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">pnpm</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/pnpm_error_1.png" alt="pnpm_error_1"></p><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/pnpm_error_2.png" alt="pnpm_error_2"></p><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/pnpm_error_3.png" alt="pnpm_error_3"></p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 全局卸载pnpm</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">pnpm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 删除全局内容可寻址存储</span></span>
<span class="line"><span style="color:#FFCB6B;">rm</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-rf</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">pnpm</span><span style="color:#C3E88D;"> store path</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 重新安装pnpm</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">install</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">pnpm</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div>`,22)]))}const y=a(p,[["render",o]]);export{u as __pageData,y as default};
