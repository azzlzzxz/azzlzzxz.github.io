import{_ as n,o as a,c as l,N as p}from"./chunks/framework.2f525601.js";const D=JSON.parse('{"title":"æµè§ˆå™¨æ€§èƒ½ä¼˜åŒ–","description":"","frontmatter":{},"headers":[],"relativePath":"base/browser/performance.md","lastUpdated":1728798111000}'),o={name:"base/browser/performance.md"};function e(t,s,c,r,F,i){return a(),l("div",null,s[0]||(s[0]=[p(`<h1 id="æµè§ˆå™¨æ€§èƒ½ä¼˜åŒ–" tabindex="-1">æµè§ˆå™¨æ€§èƒ½ä¼˜åŒ– <a class="header-anchor" href="#æµè§ˆå™¨æ€§èƒ½ä¼˜åŒ–" aria-label="Permalink to &quot;æµè§ˆå™¨æ€§èƒ½ä¼˜åŒ–&quot;">â€‹</a></h1><h2 id="performanceapi" tabindex="-1">PerformanceAPI <a class="header-anchor" href="#performanceapi" aria-label="Permalink to &quot;PerformanceAPI&quot;">â€‹</a></h2><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/performance.png" alt="performance"></p><table><thead><tr><th>å…³é”®æ—¶é—´èŠ‚ç‚¹</th><th>æè¿°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>TTFB</td><td>time to first byte(é¦–å­—èŠ‚æ—¶é—´)</td><td>ä»è¯·æ±‚åˆ°æ•°æ®è¿”å›ç¬¬ä¸€ä¸ªå­—èŠ‚æ‰€æ¶ˆè€—æ—¶é—´</td></tr><tr><td>TTI</td><td>Time to Interactive(å¯äº¤äº’æ—¶é—´)</td><td>DOM æ ‘æ„å»ºå®Œæ¯•ï¼Œä»£è¡¨å¯ä»¥ç»‘å®šäº‹ä»¶</td></tr><tr><td>DCL</td><td>DOMContentLoadedÂ (äº‹ä»¶è€—æ—¶)</td><td>å½“ HTML æ–‡æ¡£è¢«å®Œå…¨åŠ è½½å’Œè§£æå®Œæˆä¹‹åï¼ŒDOMContentLoadedÂ  äº‹ä»¶è¢«è§¦å‘</td></tr><tr><td>L</td><td>onLoadÂ (äº‹ä»¶è€—æ—¶)</td><td>å½“ä¾èµ–çš„èµ„æºå…¨éƒ¨åŠ è½½å®Œæ¯•ä¹‹åæ‰ä¼šè§¦å‘</td></tr><tr><td>FP</td><td>First Paintï¼ˆé¦–æ¬¡ç»˜åˆ¶ï¼‰</td><td>ç¬¬ä¸€ä¸ªåƒç´ ç‚¹ç»˜åˆ¶åˆ°å±å¹•çš„æ—¶é—´</td></tr><tr><td>FCP</td><td>First Contentful Paint(é¦–æ¬¡å†…å®¹ç»˜åˆ¶)</td><td>é¦–æ¬¡ç»˜åˆ¶ä»»ä½•æ–‡æœ¬ï¼Œå›¾åƒï¼Œéç©ºç™½èŠ‚ç‚¹çš„æ—¶é—´</td></tr><tr><td>FMP</td><td>First Meaningful paint(é¦–æ¬¡æœ‰æ„ä¹‰ç»˜åˆ¶)</td><td>é¦–æ¬¡æœ‰æ„ä¹‰ç»˜åˆ¶æ˜¯é¡µé¢å¯ç”¨æ€§çš„é‡åº¦æ ‡å‡†</td></tr><tr><td>LCP</td><td>Largest Contentful Paint(æœ€å¤§å†…å®¹æ¸²æŸ“)</td><td>åœ¨ viewport ä¸­æœ€å¤§çš„é¡µé¢å…ƒç´ åŠ è½½çš„æ—¶é—´</td></tr><tr><td>FID</td><td>First Input Delay(é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ)</td><td>ç”¨æˆ·é¦–æ¬¡å’Œé¡µé¢äº¤äº’(å•å‡»é“¾æ¥ï¼Œç‚¹å‡»æŒ‰é’®ç­‰)åˆ°é¡µé¢å“åº”äº¤äº’çš„æ—¶é—´</td></tr></tbody></table><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">lang</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">en</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">charset</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">viewport</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">width=device-width, initial-scale=1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">Document</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#676E95;font-style:italic;">&lt;!-- éœ€è¦ç­‰å¾…æ‰€æœ‰çš„äº‹ä»¶æ‰§è¡Œå®Œæ¯•åæ‰èƒ½è®¡ç®— --&gt;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">background-color: red;width:100px;height:100px;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#676E95;font-style:italic;">&lt;!-- elementtiming=&quot;meaningful&quot; åŠ è¿™ä¸ªå±æ€§ä»£è¡¨å°±æ˜¯æœ‰æ„ä¹‰çš„å…ƒç´  --&gt;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">elementtiming</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">meaningful</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">SteinsGate</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">      window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DOMContentLoaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// let s = 0;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// for (let i = 0; i &lt; 100000000; i++) {</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//     s += i;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// }</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// console.log(s)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#BABED8;">document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">body</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">appendChild</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTextNode</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// è¿™ç§æ˜¯é¢„ä¼°3såæ‰€æœ‰çš„èµ„æºåŠ è½½å®Œæ¯•</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#BABED8;">fetchStart</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// å¼€å§‹è®¿é—®</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#BABED8;">requestStart</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// è¯·æ±‚çš„å¼€å§‹</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#BABED8;">responseStart</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// å“åº”çš„å¼€å§‹</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#BABED8;">responseEnd</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// å“åº”çš„ç»“æŸ</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#BABED8;">domInteractive</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// domå¯äº¤äº’çš„æ—¶é—´ç‚¹</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#BABED8;">domContentLoadedEventEnd</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// domåŠ è½½å®Œæ¯• + domcontentloadedå®Œæˆçš„äº‹ä»¶çš„æ—¶é—´ $(function(){})</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#BABED8;">loadEventStart</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ‰€æœ‰èµ„æºåŠ è½½å®Œæ¯•</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">performance</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">timing</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">TTFB</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">responseStart</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">requestStart</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// é¦–å­—èŠ‚è¿”å›çš„æ—¶é—´ æœåŠ¡å™¨çš„å¤„ç†èƒ½åŠ›</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">TTI</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">domInteractive</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">fetchStart</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ•´ä¸ªçš„ä¸€ä¸ªå¯äº¤äº’çš„æ—¶é•¿</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">DCL</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">domContentLoadedEventEnd</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">fetchStart</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// DOM æ•´ä¸ªåŠ è½½å®Œæ¯•</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">L</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">loadEventStart</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">fetchStart</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ‰€æœ‰èµ„æºåŠ è½½å®Œæ¯•æ‰€ç”¨çš„æ—¶é•¿</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">TTFB</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">TTI</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">DCL</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">L</span><span style="color:#F07178;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// MDN</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">paint</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">performance</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getEntriesByType</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">paint</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// getEntriesByType æ ¹æ®ç±»å‹è·å–å¯¹åº”çš„ä¿¡æ¯</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">paint</span><span style="color:#F07178;">[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">startTime</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// FP åªæ˜¯ç”»åƒç´ äº†è€Œå·²</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">paint</span><span style="color:#F07178;">[</span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">startTime</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// FCP æœ‰å†…å®¹æ‰è¡Œ</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">},</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">3000</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// å¦ä¸€ç§æ˜¯ é€’å½’ çœ‹loadçš„æ—¶é—´ä¸ä¸º0</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// mutationObserver</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// FMP first meaningful paint</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// new PerformanceObserver åˆ›å»ºä¸€ä¸ªå¯ä»¥è§‚æµ‹çš„performanceå¯¹è±¡</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">PerformanceObserver</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">entryList</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">observer</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">entryList</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getEntries</span><span style="color:#F07178;">()[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">observer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">disconnect</span><span style="color:#F07178;">() </span><span style="color:#676E95;font-style:italic;">// ç›‘æ§å®Œåç›´æ¥ç»“æŸå³å¯</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">observe</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">entryTypes</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">element</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">] </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">) </span><span style="color:#676E95;font-style:italic;">// è§‚å¯Ÿæ‰€æœ‰å…ƒç´ </span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// LCP</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">PerformanceObserver</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">entryList</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">observer</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">entryList</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">entryList</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getEntries</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">entryList</span><span style="color:#F07178;">[</span><span style="color:#BABED8;">entryList</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">entryList</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// æœ€åé‚£ä¸ªå°±æ˜¯æœ€å¤§çš„</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">observer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">disconnect</span><span style="color:#F07178;">() </span><span style="color:#676E95;font-style:italic;">// ç›‘æ§å®Œåç›´æ¥ç»“æŸå³å¯</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">observe</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">entryTypes</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">largest-contentful-paint</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">] </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">) </span><span style="color:#676E95;font-style:italic;">//ç›‘æ§æœ€å¤§çš„å†…å®¹ç»˜åˆ¶</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// FID</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">PerformanceObserver</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">entryList</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">observer</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">firstInput</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">entryList</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getEntries</span><span style="color:#F07178;">()[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#BABED8;">firstInput</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">FID</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">firstInput</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">processingStart</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">firstInput</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">startTime</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">FID</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">observer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">disconnect</span><span style="color:#F07178;">() </span><span style="color:#676E95;font-style:italic;">// ç›‘æ§å®Œåç›´æ¥ç»“æŸå³å¯</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">observe</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">first-input</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">buffered</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// é€šè¿‡è¿”å›å€¼è®¡ç®—äº‹ä»¶å»¶è¿Ÿæœ‰å¤šä¹…</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br></div></div><h2 id="lighthouse" tabindex="-1">Lighthouse <a class="header-anchor" href="#lighthouse" aria-label="Permalink to &quot;Lighthouse&quot;">â€‹</a></h2><p><code>Lighthouse</code> æ˜¯<code>Chrome</code> æµè§ˆå™¨å·¥å…·ï¼Œç”¨äºå¸®åŠ©å¼€å‘è€…ä¼˜åŒ–ç½‘ç«™æ€§èƒ½ã€‚</p><div class="info custom-block"><p class="custom-block-title">ç›¸å…³èµ„æ–™</p><ul><li><a href="https://developer.chrome.com/docs/lighthouse/performance/performance-scoring?hl=zh-cn" target="_blank" rel="noreferrer"><u>Lighthouse æ€§èƒ½å®¡æ ¸</u></a></li></ul></div><blockquote><p>å®¡æ ¸æŒ‡æ ‡å æ¯”</p></blockquote><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/lighthouse.jpg" alt="lighthouse"></p><h3 id="fcp-first-contentful-paint" tabindex="-1">FCP(First Contentful Paint) <a class="header-anchor" href="#fcp-first-contentful-paint" aria-label="Permalink to &quot;FCP(First Contentful Paint)&quot;">â€‹</a></h3><blockquote><p>é¦–æ¬¡å†…å®¹ç»˜åˆ¶ (FCP) æ˜¯ Lighthouse æŠ¥å‘Šçš„â€œæ€§èƒ½â€éƒ¨åˆ†è·Ÿè¸ªçš„å…­ä¸ªæŒ‡æ ‡ä¹‹ä¸€</p></blockquote><p>é¦–æ¬¡å†…å®¹ç»˜åˆ¶ (<code>FCP</code>) ç”¨äºè¡¡é‡ä»ç”¨æˆ·é¦–æ¬¡å¯¼èˆªåˆ°ç½‘é¡µåˆ°ç½‘é¡µå†…å®¹çš„ä»»ä½•éƒ¨åˆ†åœ¨å±å¹•ä¸Šå‘ˆç°çš„æ—¶é—´ã€‚å¯¹äºæ­¤æŒ‡æ ‡ï¼Œé€‰æ‹©â€œå†…å®¹â€æ˜¯æŒ‡æ–‡æœ¬ã€å›¾ç‰‡ï¼ˆåŒ…æ‹¬èƒŒæ™¯å›¾ç‰‡ï¼‰ã€<code>&lt;svg&gt;</code> å…ƒç´ æˆ–éç™½è‰² <code>&lt;canvas&gt;</code> å…ƒç´ ã€‚</p><div class="tip custom-block"><p class="custom-block-title">å¦‚ä½•ä¼˜åŒ– FCP</p><ul><li><p>æ¶ˆé™¤é˜»å¡æ¸²æŸ“çš„èµ„æº</p></li><li><p>ç¼©å‡ <code>CSS</code> çš„å¤§å°</p></li><li><p>ç§»é™¤æœªä½¿ç”¨çš„ <code>CSS</code></p></li><li><p>ç§»é™¤æœªä½¿ç”¨çš„ <code>JavaScript</code></p></li><li><p>é¢„å…ˆè¿æ¥åˆ°æ‰€éœ€çš„æº</p></li><li><p>ç¼©çŸ­æœåŠ¡å™¨å“åº”ç”¨æ—¶ (<code>TTFB</code>)</p></li><li><p>é¿å…å¤šä¸ªç½‘é¡µé‡å®šå‘</p></li><li><p>é¢„åŠ è½½å¯†é’¥è¯·æ±‚</p></li><li><p>é¿å…ç½‘ç»œè½½è·è¿‡å¤§</p></li><li><p>ä½¿ç”¨é«˜æ•ˆçš„ç¼“å­˜æ”¿ç­–æä¾›é™æ€èµ„æº</p></li><li><p>é¿å… <code>DOM</code> è§„æ¨¡è¿‡å¤§</p></li><li><p>æœ€å¤§é™åº¦åœ°å‡å°‘å…³é”®è¯·æ±‚æ·±åº¦</p></li><li><p>ç¡®ä¿æ–‡æœ¬åœ¨ç½‘é¡µå­—ä½“åŠ è½½æœŸé—´ä¿æŒå¯è§</p></li><li><p>å°½é‡å‡å°‘è¯·æ±‚æ•°é‡å¹¶å‡å°ä¼ è¾“å¤§å°</p></li></ul></div><div class="info custom-block"><p class="custom-block-title">ç›¸å…³èµ„æ–™</p><ul><li><a href="https://web.dev/articles/fcp?hl=zh-cn" target="_blank" rel="noreferrer"><u>FCP</u></a></li></ul></div><h3 id="é€Ÿåº¦æŒ‡æ•°" tabindex="-1">é€Ÿåº¦æŒ‡æ•° <a class="header-anchor" href="#é€Ÿåº¦æŒ‡æ•°" aria-label="Permalink to &quot;é€Ÿåº¦æŒ‡æ•°&quot;">â€‹</a></h3><blockquote><p>é€Ÿåº¦æŒ‡æ•°ç”¨äºè¡¡é‡åœ¨ç½‘é¡µåŠ è½½æœŸé—´å†…å®¹ç›´è§‚åœ°æ˜¾ç¤ºçš„é€Ÿåº¦</p></blockquote><div class="tip custom-block"><p class="custom-block-title">å¦‚ä½•æé«˜é€Ÿåº¦æŒ‡æ•°</p><ul><li><p><a href="https://developer.chrome.com/docs/lighthouse/performance/mainthread-work-breakdown?hl=zh-cn" target="_blank" rel="noreferrer">å°½é‡å‡å°‘ä¸»çº¿ç¨‹å·¥ä½œ</a></p></li><li><p><a href="https://developer.chrome.com/docs/lighthouse/performance/bootup-time?hl=zh-cn" target="_blank" rel="noreferrer">ç¼©çŸ­ <code>JavaScript</code> æ‰§è¡Œæ—¶é—´</a></p></li><li><p><a href="https://developer.chrome.com/docs/lighthouse/performance/font-display?hl=zh-cn" target="_blank" rel="noreferrer">ç¡®ä¿æ–‡æœ¬åœ¨ç½‘é¡µå­—ä½“åŠ è½½æœŸé—´ä¿æŒå¯è§çŠ¶æ€</a></p></li></ul></div><div class="info custom-block"><p class="custom-block-title">ç›¸å…³èµ„æ–™</p><ul><li><a href="https://developer.chrome.com/docs/lighthouse/performance/speed-index?hl=zh-cn" target="_blank" rel="noreferrer"><u>é€Ÿåº¦æŒ‡æ•°</u></a></li></ul></div><h3 id="tbt-total-blocking-time" tabindex="-1">TBT (Total Blocking Time) <a class="header-anchor" href="#tbt-total-blocking-time" aria-label="Permalink to &quot;TBT (Total Blocking Time)&quot;">â€‹</a></h3><blockquote><p>æ€»é˜»å¡æ—¶é—´ (TBT) ï¼Œé˜»å¡æ—¶é—´æ˜¯é¡µé¢åŠ è½½æœŸé—´ï¼Œä¸»çº¿ç¨‹ä¸ŠèŠ±è´¹çš„æ—¶é—´ï¼Œè¯¥æ—¶é—´è¶…è¿‡ 50ms çš„éƒ½æ˜¯é˜»å¡æ—¶é—´ï¼Œé˜»å¡æ—¶é—´è¶Šé•¿ï¼Œç”¨æˆ·ä½“éªŒè¶Šå·®ã€‚</p></blockquote><div class="tip custom-block"><p class="custom-block-title">å¦‚ä½•ä¼˜åŒ– TBT</p><ul><li><p><a href="https://web.dev/articles/reduce-javascript-payloads-with-code-splitting?hl=zh-cn" target="_blank" rel="noreferrer">é€šè¿‡ä»£ç æ‹†åˆ†å‡å°‘ <code>JavaScript</code> è½½è·</a></p></li><li><p><a href="https://web.dev/articles/remove-unused-code?hl=zh-cn" target="_blank" rel="noreferrer">ç§»é™¤æœªä½¿ç”¨çš„ä»£ç </a></p></li><li><p><a href="https://web.dev/articles/efficiently-load-third-party-javascript?hl=zh-cn" target="_blank" rel="noreferrer">é«˜æ•ˆåŠ è½½ç¬¬ä¸‰æ–¹ <code>JavaScript</code>ï¼šCDN</a></p></li></ul></div><div class="info custom-block"><p class="custom-block-title">ç›¸å…³èµ„æ–™</p><ul><li><a href="https://developer.chrome.com/docs/lighthouse/performance/lighthouse-total-blocking-time?hl=zh-cn" target="_blank" rel="noreferrer"><u>TBT</u></a></li></ul></div><h3 id="lcp-largest-contentful-paint" tabindex="-1">LCP(Largest Contentful Paint) <a class="header-anchor" href="#lcp-largest-contentful-paint" aria-label="Permalink to &quot;LCP(Largest Contentful Paint)&quot;">â€‹</a></h3><blockquote><p>LCP æœ€å¤§å†…å®¹æ¸²æŸ“æ—¶é—´ï¼ŒLCP ä¼šæŠ¥å‘Šè§†å£ä¸­å¯è§çš„æœ€å¤§å›¾ç‰‡ã€æ–‡æœ¬å—æˆ–è§†é¢‘çš„å‘ˆç°æ—¶é—´ï¼ˆç›¸å¯¹äºç”¨æˆ·é¦–æ¬¡å¯¼èˆªåˆ°ç›¸åº”ç½‘é¡µçš„æ—¶é—´ï¼‰</p></blockquote><p><code>LCP</code> ä¼šè€ƒè™‘å“ªäº›å…ƒç´ ï¼š</p><ul><li><p><code>&lt;img&gt;</code> å…ƒç´ ï¼ˆç¬¬ä¸€å¸§å‘ˆç°æ—¶é—´ç”¨äºåŠ¨ç”»å†…å®¹ï¼Œä¾‹å¦‚ <code>GIF</code> æˆ–åŠ¨ç”» <code>PNG</code>ï¼‰</p></li><li><p><code>&lt;svg&gt;</code> å…ƒç´ å†…çš„ <code>&lt;image&gt;</code> å…ƒç´ </p></li><li><p><code>&lt;video&gt;</code> å…ƒç´ ï¼ˆä½¿ç”¨æµ·æŠ¥å›¾ç‰‡åŠ è½½æ—¶é—´æˆ–è§†é¢‘çš„ç¬¬ä¸€å¸§å‘ˆç°æ—¶é—´ï¼Œä»¥ä¸¤è€…ä¸­è¾ƒæ—©è¾¾åˆ°è€…ä¸ºå‡†ï¼‰</p></li><li><p>æ­¤å…ƒç´ åŒ…å«ä½¿ç”¨ <code>url()</code> å‡½æ•°åŠ è½½çš„èƒŒæ™¯å›¾ç‰‡ï¼ˆä¸ <code>CSS</code> æ¸å˜ç›¸åï¼‰</p></li><li><p>åŒ…å«æ–‡æœ¬èŠ‚ç‚¹æˆ–å…¶ä»–å†…åµŒçº§æ–‡æœ¬å…ƒç´ å­çº§çš„å—çº§å…ƒç´ ã€‚</p></li></ul><div class="tip custom-block"><p class="custom-block-title">å¦‚ä½•ä¼˜åŒ– LCP</p><ul><li><p>æ¶ˆé™¤èµ„æºåŠ è½½å»¶è¿Ÿï¼ˆä½ çš„ <code>LCP</code> èµ„æºåº”ä¸ç›¸åº”ç½‘é¡µåŠ è½½çš„ç¬¬ä¸€ä¸ªèµ„æºåŒæ—¶å¼€å§‹åŠ è½½ï¼‰</p><ul><li><p><code>LCP</code> å…ƒç´ ä¸º <code>&lt;img&gt;</code> å…ƒç´ ï¼Œå…¶ <code>src</code> æˆ– <code>srcset</code> å±æ€§å‡ºç°åœ¨åˆå§‹ <code>HTML</code> æ ‡è®°ä¸­ã€‚</p></li><li><p><code>LCP</code> å…ƒç´ éœ€è¦ <code>CSS</code> èƒŒæ™¯å›¾ç‰‡ï¼Œä½†è¯¥å›¾ç‰‡æ˜¯é€šè¿‡ <code>HTML</code> æ ‡è®°ä¸­çš„ <code>&lt;link rel=&quot;preload&quot;&gt;</code>ï¼ˆæˆ–ä½¿ç”¨ <code>Link</code> æ ‡å¤´ï¼‰é¢„åŠ è½½çš„ã€‚</p></li><li><p><code>LCP</code> å…ƒç´ æ˜¯ä¸€ä¸ªéœ€è¦ç½‘é¡µå­—ä½“æ‰èƒ½æ¸²æŸ“çš„æ–‡æœ¬èŠ‚ç‚¹ï¼Œå­—ä½“æ˜¯ä½¿ç”¨ <code>HTML</code> æ ‡è®°ä¸­çš„ <code>&lt;link rel=&quot;preload&quot;&gt;</code>ï¼ˆæˆ–ä½¿ç”¨ <code>Link</code> æ ‡å¤´ï¼‰åŠ è½½çš„ã€‚</p></li></ul></li><li><p>æ¶ˆé™¤å…ƒç´ æ¸²æŸ“å»¶è¿Ÿï¼ˆæ­¤æ­¥éª¤çš„ç›®æ ‡æ˜¯ç¡®ä¿ <code>LCP</code> å…ƒç´ åœ¨å…¶èµ„æºåŠ è½½å®Œæˆåï¼ˆæ— è®ºä½•æ—¶ï¼‰èƒ½å¤Ÿç«‹å³å‘ˆç°ï¼‰</p><ul><li><p>å‡å°‘æˆ–å†…åµŒé˜»æ­¢æ¸²æŸ“çš„æ ·å¼è¡¨</p></li><li><p>å»¶è¿Ÿæˆ–å†…åµŒé˜»æ­¢æ¸²æŸ“çš„ <code>JavaScript</code></p></li><li><p><code>SSR</code></p></li><li><p>æ‹†åˆ†å†—é•¿çš„ä»»åŠ¡</p></li></ul></li><li><p>ç¼©çŸ­èµ„æºåŠ è½½æ—¶é•¿</p><ul><li><p>ç¼©å‡èµ„æºçš„å¤§å°</p></li><li><p>ç¼©çŸ­èµ„æºéœ€è¦ç§»åŠ¨çš„è·ç¦»ï¼š<code>CDN</code></p></li><li><p>å‡å°‘ç½‘ç»œå¸¦å®½äº‰ç”¨</p></li></ul><p>å¦‚æœæ‚¨ä¸º <code>LCP</code> èµ„æºæŒ‡å®šäº†è¾ƒé«˜çš„ <code>fetchpriority</code> å¹¶å¼€å§‹å°½å¿«åŠ è½½ï¼Œåˆ™æµè§ˆå™¨ä¼šå°½æœ€å¤§åŠªåŠ›é˜»æ­¢ä¼˜å…ˆçº§è¾ƒä½çš„èµ„æºä¸ä¹‹ç«äº‰ã€‚</p></li></ul><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">img</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">fetchpriority</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">high</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/path/to/hero-image.webp</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>ç¼©çŸ­åŠ è½½ç¬¬ä¸€ä¸ªå­—èŠ‚æ‰€éœ€çš„æ—¶é—´ï¼š<code>CDN</code>ã€ç¼“å­˜ã€é¿å…é‡å®šå‘</li></ul></div><div class="info custom-block"><p class="custom-block-title">ç›¸å…³èµ„æ–™</p><ul><li><a href="https://developer.chrome.com/docs/lighthouse/performance/lighthouse-largest-contentful-paint?hl=zh-cn" target="_blank" rel="noreferrer"><u>ä¼˜åŒ– LCP</u></a></li></ul></div><h3 id="cls-cumulative-layout-shift" tabindex="-1">CLS(Cumulative Layout Shift) <a class="header-anchor" href="#cls-cumulative-layout-shift" aria-label="Permalink to &quot;CLS(Cumulative Layout Shift)&quot;">â€‹</a></h3><blockquote><p>CLS ç”¨äºè¡¡é‡è§†è§‰ç¨³å®šæ€§ï¼Œå› ä¸ºå®ƒæœ‰åŠ©äºé‡åŒ–ç”¨æˆ·é‡åˆ°æ„å¤–å¸ƒå±€åç§»çš„é¢‘ç‡</p></blockquote><div class="info custom-block"><p class="custom-block-title">ç›¸å…³èµ„æ–™</p><ul><li><p><a href="https://web.dev/articles/cls?hl=zh-cn" target="_blank" rel="noreferrer"><u>CLS</u></a></p></li><li><p><a href="https://web.dev/articles/optimize-cls?hl=zh-cn" target="_blank" rel="noreferrer"><u>CLS ä¼˜åŒ–ç­–ç•¥</u></a></p></li></ul></div><h2 id="ç½‘ç»œä¼˜åŒ–ç­–ç•¥" tabindex="-1">ç½‘ç»œä¼˜åŒ–ç­–ç•¥ <a class="header-anchor" href="#ç½‘ç»œä¼˜åŒ–ç­–ç•¥" aria-label="Permalink to &quot;ç½‘ç»œä¼˜åŒ–ç­–ç•¥&quot;">â€‹</a></h2><ol><li><p>å‡å°‘<code>HTTP</code>è¯·æ±‚æ•°ï¼Œåˆå¹¶<code>JS</code>ã€<code>CSS</code>ï¼Œåˆç†å†…åµŒ<code>CSS</code>ã€<code>JS</code>ã€‚</p></li><li><p>åˆç†è®¾ç½®æœåŠ¡ç«¯ç¼“å­˜ï¼Œæé«˜æœåŠ¡å™¨å¤„ç†é€Ÿåº¦ã€‚ (å¼ºåˆ¶ç¼“å­˜ã€åå•†ç¼“å­˜)</p></li></ol><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># å¼ºç¼“å­˜</span></span>
<span class="line"><span style="color:#FFCB6B;">Expires/Cache-Control</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># åå•†ç¼“å­˜</span></span>
<span class="line"><span style="color:#FFCB6B;">Etag/if-none-match/last-modified/if-modified-since</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="3"><li>é¿å…é‡å®šå‘ï¼Œé‡å®šå‘ä¼šé™ä½å“åº”é€Ÿåº¦ (<code>301</code>ã€<code>302</code>)ã€‚</li></ol><p>é‡å®šå‘ä¼šé™ä½ç½‘é¡µåŠ è½½é€Ÿåº¦ï¼Œå› ä¸ºå®ƒè¦æ±‚æµè§ˆå™¨ åœ¨æ–°ä½ç½®å‘é€é¢å¤–çš„ <code>HTTP</code> è¯·æ±‚ä»¥æ£€ç´¢èµ„æº</p><ol start="4"><li>ä½¿ç”¨ <code>dns-prefetch</code>ï¼Œè¿›è¡Œ<code>DNS</code>é¢„è§£æã€‚</li></ol><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/dns_prefetch.png" alt="dns-prefetch"></p><ol start="5"><li><p>é‡‡ç”¨åŸŸååˆ†ç‰‡æŠ€æœ¯ï¼Œå°†èµ„æºæ”¾åˆ°ä¸åŒçš„åŸŸåä¸‹ï¼Œè§£å†³åŒä¸€ä¸ªåŸŸåæœ€å¤šå¤„ç† 6 ä¸ª<code>TCP</code>é“¾æ¥é—®é¢˜ã€‚</p></li><li><p>é‡‡ç”¨<code>CDN</code>åŠ é€ŸåŠ å¿«è®¿é—®é€Ÿåº¦(æŒ‡æ´¾æœ€è¿‘ã€é«˜åº¦å¯ç”¨)ã€‚</p></li><li><p><code>gzip</code> å‹ç¼©ä¼˜åŒ– å¯¹ä¼ è¾“èµ„æºè¿›è¡Œä½“ç§¯å‹ç¼© <code>(htmlã€jsã€css)</code>ã€‚</p></li></ol><div class="language-lua line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">Content</span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">Encoding</span><span style="color:#BABED8;">: gzip</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="8"><li>åŠ è½½æ•°æ®ä¼˜å…ˆçº§ï¼š <ol><li><code>preload</code>ï¼šé¢„å…ˆè¯·æ±‚å½“å‰é¡µé¢éœ€è¦çš„èµ„æº</li><li><code>prefetch</code>ï¼šå°†æ¥é¡µé¢ä¸­ä½¿ç”¨çš„èµ„æºï¼ˆå½“å‰é¡µé¢åœ¨ç©ºé—²æ—¶ï¼Œä¼šè¯·æ±‚ä¸€äº›èµ„æºï¼Œä¾‹å¦‚è·¯ç”±æ‡’åŠ è½½ï¼‰</li></ol></li></ol><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">link</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">rel</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">preload</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">style.css</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">as</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">style</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="seo-ä¼˜åŒ–" tabindex="-1"><code>SEO</code> ä¼˜åŒ– <a class="header-anchor" href="#seo-ä¼˜åŒ–" aria-label="Permalink to &quot;\`SEO\` ä¼˜åŒ–&quot;">â€‹</a></h2><ul><li><p>æ·»åŠ  <code>favicon</code> å›¾æ ‡ å’Œ <code>TDK</code> (<code>title</code>ã€<code>keywords</code>ã€<code>description</code>)</p></li><li><p>ä½¿ç”¨ <code>https</code></p></li><li><p><code>html</code> è¯­ä¹‰åŒ–æ ‡ç­¾</p></li><li><p>å›¾ç‰‡æ ‡ç­¾ <code>alt</code> å±æ€§</p></li><li><p>æœåŠ¡ç«¯æ¸²æŸ“</p></li><li><p><code>sitemap</code> ç«™ç‚¹åœ°å›¾</p></li></ul><p><code>sitemap</code> ç«™ç‚¹åœ°å›¾ä¸€èˆ¬æ˜¯<code>xml</code>æ ¼å¼çš„æ–‡ä»¶ï¼Œç”¨äºå¸®åŠ©æœç´¢å¼•æ“æ›´å¥½åœ°å‘ç°å’ŒæŠ“å–ç½‘ç«™ä¸Šçš„æ‰€æœ‰é¡µé¢ï¼Œå¹¶æä¾›é¡µé¢ä¼˜å…ˆçº§å’Œæ›´æ–°é¢‘ç‡çš„ä¿¡æ¯ï¼Œå¸®åŠ©æœç´¢å¼•æ“æ›´å¥½åœ°åˆ†é…æŠ“å–èµ„æº</p><blockquote><p>ä¸¾ä¸ª ğŸŒ°</p></blockquote><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">urlset</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://www.sitemaps.org/schemas/sitemap/0.9</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">loc</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">http://www.xxx.com/</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">loc</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">lastmod</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">2023-06-01</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">lastmod</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">changefreq</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">daily</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">changefreq</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">priority</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">0.8</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">priority</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">urlset</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">æ ‡ç­¾</p><ul><li><p><code>loc</code>ï¼šé¡µé¢åœ°å€</p></li><li><p><code>lastmod</code>ï¼šå†…å®¹æœ€åä¿®æ”¹æ—¶é—´</p></li><li><p><code>changefreq</code>ï¼šé¢„è®¡æ›´æ–°é¢‘ç‡</p></li><li><p><code>priority</code>ï¼šé¡µé¢ç›¸å¯¹äºå…¶ä»–é¡µé¢ä¼˜å…ˆçº§ï¼Œå®ƒçš„å€¼èŒƒå›´æ˜¯<code>0.0</code>åˆ°<code>1.0</code>ï¼Œå…¶ä¸­<code>1.0</code>è¡¨ç¤ºæœ€é«˜ä¼˜å…ˆçº§</p></li></ul></div><ul><li><code>robots</code> æ–‡ä»¶</li></ul><p><code>robots.txt</code> æ–‡ä»¶æ˜¯ä¸€ä¸ªç½‘ç«™ç”¨æ¥å‘Šè¯‰æœç´¢å¼•æ“æœºå™¨äºº(åˆç§°çˆ¬è™«æˆ–èœ˜è››)åº”è¯¥å¦‚ä½•æŠ“å–å’Œç´¢å¼•è¯¥ç½‘ç«™çš„ä¸€ç§æ ‡å‡†</p><p><code>robots.txt</code> æ–‡ä»¶éœ€æ”¾ç½®åœ¨ç½‘ç«™çš„æ ¹ç›®å½•ä¸‹ï¼Œä»¥<code>åŸŸå/robots.txt</code>çš„å½¢å¼ç›´æ¥è®¿é—®åˆ°</p><div class="language-txt line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">User-agent: *</span></span>
<span class="line"><span style="color:#babed8;">Disallow: /private/</span></span>
<span class="line"><span style="color:#babed8;">Allow: /vip</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">Sitemap: https://xxx/sitemap.xml</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li><p><code>User-agent</code>: è¯¥é¡¹çš„å€¼ç”¨äºæè¿°æœç´¢å¼•æ“èœ˜è››çš„åå­—ã€‚å¦‚æœè¯¥é¡¹çš„å€¼è®¾ä¸º<code>*</code>ï¼Œåˆ™è¯¥åè®®å¯¹ä»»ä½•æœºå™¨äººå‡æœ‰æ•ˆ</p></li><li><p><code>Disallow</code>ï¼šè¿™æ¡æŒ‡ä»¤æ˜ç¡®åœ°å‘Šè¯‰çˆ¬è™«ä¸è¦è®¿é—® <code>/private/</code> è·¯å¾„åŠå…¶ä¸‹çš„æ‰€æœ‰å†…å®¹ã€‚è¿™æ˜¯ <code>robots.txt</code> æ–‡ä»¶çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œç”¨äºä¿æŠ¤ç½‘ç«™ä¸­ä¸å¸Œæœ›è¢«æœç´¢å¼•æ“ç´¢å¼•çš„é¡µé¢æˆ–å†…å®¹ã€‚</p></li><li><p><code>Allow</code>ï¼šå…è®¸çˆ¬è™«è®¿é—®æŒ‡å®šè·¯å¾„ä¸‹çš„å†…å®¹ï¼Œä¾‹å¦‚<code>/vip</code>ï¼Œä½† <code>Crawler</code> ä¸ä¼šé€’å½’åœ°å…è®¸è®¿é—®å…¶å­ç›®å½•ã€‚</p></li><li><p><code>Sitemap</code>ï¼šæä¾›ç½‘ç«™ <code>sitemap</code> çš„ <code>URL</code> åœ°å€ï¼Œå¸®åŠ©æœç´¢å¼•æ“çˆ¬è™«æ›´æœ‰æ•ˆåœ°å‘ç°å’Œç´¢å¼•è¿™äº›é¡µé¢</p></li></ul></div><ul><li>å‘å„ä¸ªæœç´¢å¼•æ“æäº¤ç«™ç‚¹æ”¶å½•</li></ul><p>é™¤äº†<code>robots.txt + sitemap.xml</code> æ–¹å¼å¢åŠ ç½‘å€è¢«æ”¶å½•çš„å¯èƒ½æ€§å¤–ï¼Œè¿˜å¯ä»¥åœ¨å„æœç´¢å¼•æ“ç«™é•¿å¹³å°æ‰‹åŠ¨æäº¤ç½‘å€ï¼Œä»¥ç¼©çŸ­çˆ¬è™«å‘ç°ç½‘ç«™é“¾æ¥æ—¶é—´ï¼ŒåŠ å¿«çˆ¬è™«æŠ“å–é€Ÿåº¦</p><div class="tip custom-block"><p class="custom-block-title">æœç´¢å¼•æ“ç«™ç‚¹å¹³å°</p><ul><li><p>ç™¾åº¦ï¼š<a href="https://ziyuan.baidu.com/" target="_blank" rel="noreferrer"><u>https://ziyuan.baidu.com/</u></a></p></li><li><p>è°·æ­Œï¼š<a href="https://developers.google.com/search?hl=zh-cn" target="_blank" rel="noreferrer"><u>https://developers.google.com/search?hl=zh-cn</u></a></p></li><li><p>360ï¼š<a href="https://zhanzhang.so.com/" target="_blank" rel="noreferrer"><u>https://zhanzhang.so.com/</u></a></p></li></ul></div><ul><li>ç½‘å€è§„èŒƒåŒ–</li></ul><p>ä¸€ä¸ªé¡µé¢å¯èƒ½æœ‰å¤šä¸ª URL åœ°å€ï¼Œæ¯”å¦‚ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//example.com/xxx.html</span></span>
<span class="line"><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//example.com/xxx</span></span>
<span class="line"><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//www.example.com/xxx</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>è¿™äº› <code>URL</code> æŒ‡å‘åŒä¸€ä¸ªé¡µé¢å†…å®¹ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬åº”è¯¥æŒ‡å®šå…¶ä¸­ä¸€ä¸ªä½œä¸ºè¯¥é¡µé¢çš„è§„èŒƒåŒ– <code>URL</code></p><p>åœ¨æ¯ä¸ªéè§„èŒƒç‰ˆæœ¬çš„ <code>HTML</code> ç½‘é¡µçš„<code>&lt;head&gt;</code>éƒ¨åˆ†ä¸­ï¼Œæ·»åŠ ä¸€ä¸ª <code>rel=&quot;canonical&quot;</code> é“¾æ¥æ¥è¿›è¡ŒæŒ‡å®šè§„èŒƒç½‘å€</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">link</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">rel</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">canonical</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://www.example.com/article</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><code>hreflang</code></li></ul><p>è®¸å¤šç½‘ç«™ä¼šæ ¹æ®ç”¨æˆ·ä½¿ç”¨çš„è¯­è¨€æˆ– åŒºåŸŸã€‚<code>hreflang</code> é“¾æ¥å¯ä»¥å‘Šè¯‰æœç´¢å¼•æ“æ‰€æœ‰ç‰ˆæœ¬çš„ç½‘å€ ä»¥ä¾¿é’ˆå¯¹æ¯ç§è¯­è¨€æˆ–åœ°åŒºæ˜¾ç¤ºæ­£ç¡®çš„ç‰ˆæœ¬ã€‚</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">link</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">rel</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">alternate</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">hreflang</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">en</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://example.com</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">link</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">rel</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">alternate</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">hreflang</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">es</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://es.example.com</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">link</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">rel</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">alternate</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">hreflang</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">de</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://de.example.com</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="info custom-block"><p class="custom-block-title">INFO</p><ul><li><a href="https://developer.chrome.com/docs/lighthouse/seo/meta-description?hl=zh-cn" target="_blank" rel="noreferrer"><u>è°·æ­Œæµè§ˆå™¨ LightHouse SEO å®¡æ ¸</u></a></li></ul></div><h2 id="é‡æ’å’Œé‡ç»˜" tabindex="-1">é‡æ’å’Œé‡ç»˜ <a class="header-anchor" href="#é‡æ’å’Œé‡ç»˜" aria-label="Permalink to &quot;é‡æ’å’Œé‡ç»˜&quot;">â€‹</a></h2><ul><li><p><strong>é‡æ’ï¼ˆReflowï¼‰</strong>ï¼šå½“ <code>DOM</code> ç»“æ„æˆ–å…ƒç´ çš„å‡ ä½•å±æ€§å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæµè§ˆå™¨éœ€è¦é‡æ–°è®¡ç®—å…ƒç´ çš„å‡ ä½•å±æ€§ï¼Œå°†å…¶å®‰æ”¾åœ¨ç•Œé¢ä¸­çš„æ­£ç¡®ä½ç½®ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšé‡æ’ï¼Œè¡¨ç°ä¸ºé‡æ–°ç”Ÿæˆå¸ƒå±€ï¼Œé‡æ–°æ’åˆ—å…ƒç´ ï¼ˆ<strong>é‡æ’ä¼šå¯¼è‡´é¡µé¢çš„å¸ƒå±€é‡æ–°è®¡ç®—ï¼Œä»è€Œå¯èƒ½å½±å“æ•´ä¸ªé¡µé¢çš„æ¸²æŸ“</strong>ï¼‰ã€‚</p></li><li><p><strong>é‡ç»˜ï¼ˆRepaintï¼‰</strong>: å½“å…ƒç´ çš„æ ·å¼ï¼ˆå¦‚é¢œè‰²ã€èƒŒæ™¯ç­‰ï¼‰å‘ç”Ÿæ”¹å˜ï¼Œä½†ä¸å½±å“å…¶å‡ ä½•å±æ€§ï¼ˆå¦‚ä½ç½®å’Œå°ºå¯¸ï¼‰æ—¶ï¼Œæµè§ˆå™¨ä¼šé‡æ–°ç»˜åˆ¶å…ƒç´ ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºé‡ç»˜ã€‚<strong>é‡ç»˜ä¸ä¼šå½±å“å…ƒç´ çš„å¸ƒå±€ï¼Œåªä¼šå½±å“å…¶å¤–è§‚</strong>ã€‚</p></li></ul><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/critical_render.png" alt="critical_render"></p><h3 id="å¦‚ä½•è§¦å‘é‡æ’å’Œé‡ç»˜" tabindex="-1">å¦‚ä½•è§¦å‘é‡æ’å’Œé‡ç»˜ï¼Ÿ <a class="header-anchor" href="#å¦‚ä½•è§¦å‘é‡æ’å’Œé‡ç»˜" aria-label="Permalink to &quot;å¦‚ä½•è§¦å‘é‡æ’å’Œé‡ç»˜ï¼Ÿ&quot;">â€‹</a></h3><p>ä»»ä½•æ”¹å˜ç”¨æ¥æ„å»ºæ¸²æŸ“æ ‘çš„ä¿¡æ¯éƒ½ä¼šå¯¼è‡´ä¸€æ¬¡é‡æ’æˆ–é‡ç»˜ï¼š</p><p><strong>é‡æ’ï¼ˆReflowï¼‰å¯èƒ½ç”±ä»¥ä¸‹æ“ä½œè§¦å‘</strong>ï¼š</p><ol><li><p><strong>æ·»åŠ æˆ–åˆ é™¤å…ƒç´ </strong>ï¼šå¦‚ä½¿ç”¨ <code>appendChild</code> æˆ– <code>removeChild</code>ã€‚</p></li><li><p><strong>ä¿®æ”¹å…ƒç´ çš„å¤§å°</strong>ï¼šå¦‚æ”¹å˜ <code>width</code>ã€<code>height</code> ç­‰æ ·å¼å±æ€§ã€‚</p></li><li><p><strong>ç§»åŠ¨å…ƒç´ ä½ç½®</strong>ï¼šå¦‚é€šè¿‡ <code>position</code> å±æ€§æˆ– <code>margin</code> ç­‰æ–¹å¼æ”¹å˜ä½ç½®ã€‚</p></li><li><p><strong>è·å–ä½ç½®ç›¸å…³ä¿¡æ¯</strong>ï¼šå¦‚è°ƒç”¨ <code>offsetHeight</code>ã€<code>getBoundingClientRect()</code> ç­‰æ–¹æ³•ã€‚</p></li></ol><p><strong>é‡ç»˜ï¼ˆRepaintï¼‰å¯èƒ½ç”±ä»¥ä¸‹æ“ä½œè§¦å‘</strong>ï¼š</p><ol><li><p><strong>ä¿®æ”¹å…ƒç´ æ ·å¼</strong>ï¼šä¾‹å¦‚æ”¹å˜å…ƒç´ çš„é¢œè‰²ã€èƒŒæ™¯æˆ–è¾¹æ¡†ï¼Œä½†ä¸æ”¹å˜å…¶å°ºå¯¸æˆ–ä½ç½®ã€‚</p></li><li><p><strong>é€šè¿‡ <code>display: none</code> éšè—å…ƒç´ </strong>ï¼šä¼šè§¦å‘é‡æ’å’Œé‡ç»˜ã€‚</p></li><li><p><strong>é€šè¿‡ <code>visibility: hidden</code> éšè—å…ƒç´ </strong>ï¼šåªä¼šè§¦å‘é‡ç»˜ï¼Œå› ä¸ºå…ƒç´ ä»ç„¶å æ®å¸ƒå±€ç©ºé—´ã€‚</p></li><li><p><strong>ç§»åŠ¨æˆ–æ·»åŠ åŠ¨ç”»</strong>ï¼šè¿™ä¼šå½±å“å…ƒç´ çš„å¤–è§‚å’Œå¯èƒ½å¯¼è‡´é‡ç»˜ã€‚</p></li><li><p><strong>æ·»åŠ æ ·å¼è¡¨æˆ–è°ƒæ•´æ ·å¼å±æ€§</strong>ï¼šä¾‹å¦‚æ·»åŠ  CSS ç±»æˆ–æ›´æ”¹æ ·å¼ã€‚</p></li></ol><p><strong>ç”¨æˆ·è¡Œä¸º</strong>ä¹Ÿå¯ä»¥è§¦å‘é‡æ’å’Œé‡ç»˜ï¼Œä¾‹å¦‚ï¼š</p><ul><li><p>è°ƒæ•´çª—å£å¤§å°</p></li><li><p>æ”¹å˜å­—å·</p></li><li><p>æ»šåŠ¨é¡µé¢</p></li></ul><h3 id="å¼ºåˆ¶åŒæ­¥å¸ƒå±€é—®é¢˜" tabindex="-1">å¼ºåˆ¶åŒæ­¥å¸ƒå±€é—®é¢˜ <a class="header-anchor" href="#å¼ºåˆ¶åŒæ­¥å¸ƒå±€é—®é¢˜" aria-label="Permalink to &quot;å¼ºåˆ¶åŒæ­¥å¸ƒå±€é—®é¢˜&quot;">â€‹</a></h3><p><code>JavaScript</code> å¼ºåˆ¶å°†è®¡ç®—æ ·å¼å’Œå¸ƒå±€æ“ä½œæå‰åˆ°å½“å‰çš„ä»»åŠ¡ä¸­ã€‚</p><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/async_lay.png" alt="async_lay"></p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">lang</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">en</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">charset</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">viewport</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">width=device-width, initial-scale=1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">Document</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">//  ä¼˜åŒ–</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">//  console.log(app.offsetTop); // æ”¾åœ¨å¤–é¢æ¯”è¾ƒå¥½ï¼Œå°±ä¸ä¼šæŠŠé‡æ’æ”¾åˆ°jsæ‰§è¡Œé‡Œ</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">reflow</span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">el</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementById</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">app</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">node</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createElement</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">h1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">node</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">innerHTML</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">el</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">appendChild</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">node</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// å¼ºåˆ¶åŒæ­¥å¸ƒå±€</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">app</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">offsetTop</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// è·å–ä½ç½®å°±ä¼šå¯¼è‡´ é‡æ’ ï¼ˆé‡æ–°å¸ƒå±€ï¼‰</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">      window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">load</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">reflow</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>ä¼˜åŒ–åï¼š</p><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/async_opt.png" alt="async_opt"></p><h3 id="å¸ƒå±€æŠ–åŠ¨é—®é¢˜" tabindex="-1">å¸ƒå±€æŠ–åŠ¨é—®é¢˜ <a class="header-anchor" href="#å¸ƒå±€æŠ–åŠ¨é—®é¢˜" aria-label="Permalink to &quot;å¸ƒå±€æŠ–åŠ¨é—®é¢˜&quot;">â€‹</a></h3><p>å¤šæ¬¡å¼ºåˆ¶åŒæ­¥å¸ƒå±€å°±ä¼šé€ æˆå¸ƒå±€æŠ–åŠ¨ï¼Œæ€§èƒ½å¾ˆå·®</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">reflow</span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">el</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementById</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">app</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">node</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createElement</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">h1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">node</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">innerHTML</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">el</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">appendChild</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">node</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// å¼ºåˆ¶åŒæ­¥å¸ƒå±€</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">app</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">offsetHeight</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// ä¸åœçš„å†è§¦å‘å¸ƒå±€</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">load</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">100</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">i</span><span style="color:#89DDFF;">++</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">reflow</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/reflow.png" alt="reflow"></p><h3 id="å‡å°‘å›æµå’Œé‡ç»˜" tabindex="-1">å‡å°‘å›æµå’Œé‡ç»˜ <a class="header-anchor" href="#å‡å°‘å›æµå’Œé‡ç»˜" aria-label="Permalink to &quot;å‡å°‘å›æµå’Œé‡ç»˜&quot;">â€‹</a></h3><ul><li><p>é›†ä¸­æ”¹å˜æ ·å¼ï¼Œä¸è¦ä¸€æ¡ä¸€æ¡åœ°ä¿®æ”¹<code>DOM</code>çš„æ ·å¼ã€‚</p></li><li><p>ä¸è¦æŠŠ<code>DOM</code>ç»“ç‚¹çš„å±æ€§å€¼æ”¾åœ¨å¾ªç¯é‡Œå½“æˆå¾ªç¯é‡Œçš„å˜é‡ã€‚</p></li><li><p>ä¸ºåŠ¨ç”»çš„<code>HTML</code>å…ƒä»¶ä½¿ç”¨<code>fixed</code>æˆ–<code>absoult</code>çš„<code>position</code>ï¼Œé‚£ä¹ˆä¿®æ”¹ä»–ä»¬çš„<code>CSS</code>æ˜¯ä¸ä¼š<code>reflow</code>çš„ã€‚</p></li><li><p>ä¸ä½¿ç”¨<code>table</code>å¸ƒå±€ã€‚å› ä¸ºå¯èƒ½å¾ˆå°çš„ä¸€ä¸ªå°æ”¹åŠ¨ä¼šé€ æˆæ•´ä¸ª<code>table</code>çš„é‡æ–°å¸ƒå±€ã€‚</p></li><li><p>å°½é‡åªä¿®æ”¹<code>position</code>ï¼š<code>absolute</code>æˆ–<code>fixed</code>å…ƒç´ ï¼Œå¯¹å…¶ä»–å…ƒç´ å½±å“ä¸å¤§</p></li><li><p>åŠ¨ç”»å¼€å§‹<code>GPU</code>åŠ é€Ÿï¼Œ<code>translate</code> ä½¿ç”¨<code>3D</code>å˜åŒ–</p></li><li><p>æå‡ä¸ºåˆæˆå±‚ï¼Œå°†å…ƒç´ æå‡ä¸ºåˆæˆå±‚æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p><ul><li><p>åˆæˆå±‚çš„ä½å›¾ï¼Œä¼šäº¤ç”±<code>GPU</code>åˆæˆï¼Œæ¯”<code>CPU</code>å¤„ç†è¦å¿«ã€‚</p></li><li><p>å½“éœ€è¦<code>repaint</code>æ—¶ï¼Œåªéœ€è¦<code>repaint</code>æœ¬èº«ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–çš„å±‚ã€‚</p></li><li><p>å¯¹äº<code>transform</code>å’Œ<code>opacity</code>æ•ˆæœï¼Œä¸ä¼šè§¦å‘<code>layout</code>å’Œ<code>paint</code>ã€‚</p></li><li><p>æå‡åˆæˆå±‚çš„æœ€å¥½æ–¹å¼æ˜¯ä½¿ç”¨<code>CSS</code>çš„<code>will-change</code>å±æ€§ï¼š</p></li></ul></li></ul><div class="language-css line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">#</span><span style="color:#F78C6C;">target</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#B2CCD6;">will-change</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> transform</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><p>è„±ç¦»æ–‡æ¡£æµ</p></li><li><p>æ¸²æŸ“æ—¶ç»™å›¾ç‰‡å¢åŠ å›ºå®šå®½é«˜</p></li><li><p>å°½é‡ä½¿ç”¨<code>css3</code>åŠ¨ç”»</p></li></ul><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">lang</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">en</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">charset</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">viewport</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">width=device-width, initial-scale=1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">Document</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">style</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#676E95;font-style:italic;">/* show Rending æŸ¥çœ‹é‡ç»˜æ“ä½œ */</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;font-style:italic;">@keyframes</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">rotate</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#FFCB6B;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#B2CCD6;">transform</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">rotate</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">0deg</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#676E95;font-style:italic;">/* width: 100px; */</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#FFCB6B;">to</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#B2CCD6;">transform</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">rotate</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">360deg</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#676E95;font-style:italic;">/* width: 500px; */</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">#</span><span style="color:#F78C6C;">app</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#B2CCD6;">width</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">100px</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#B2CCD6;">height</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">100px</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#B2CCD6;">background</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> red</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#B2CCD6;">animation</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> rotate </span><span style="color:#F78C6C;">0.2s</span><span style="color:#BABED8;"> linear infinite</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">style</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">opacity: 0.2;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">my</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p><code>css3</code> åŠ¨ç”»ä½¿ç”¨<code>GPU</code>åŠ é€Ÿæ¸²æŸ“ï¼ˆéƒ½æ˜¯å›¾å±‚çš„å¤åˆï¼Œå¹¶æ²¡æœ‰å›æµã€é‡ç»˜ï¼‰ï¼Œåªåœ¨ç¬¬ä¸€æ¬¡è¿›è¡Œç»˜åˆ¶<code>ï¼ˆcss3 ä¼šç”Ÿæˆä¸€ä¸ªè‡ªå·±çš„å›¾å±‚ï¼‰</code>ã€‚</p><p>å›¾å±‚ä¼˜ç‚¹ï¼šè„±ç¦»æ–‡æ¡£æµï¼Œå…¶å˜åŒ–ä¸ä¼šå½±å“å…¶ä»–ã€‚</p><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/layer.png" alt="layer"></p><h2 id="é™æ€æ–‡ä»¶ä¼˜åŒ–ç­–ç•¥" tabindex="-1">é™æ€æ–‡ä»¶ä¼˜åŒ–ç­–ç•¥ <a class="header-anchor" href="#é™æ€æ–‡ä»¶ä¼˜åŒ–ç­–ç•¥" aria-label="Permalink to &quot;é™æ€æ–‡ä»¶ä¼˜åŒ–ç­–ç•¥&quot;">â€‹</a></h2><h3 id="å›¾ç‰‡ä¼˜åŒ–" tabindex="-1">å›¾ç‰‡ä¼˜åŒ– <a class="header-anchor" href="#å›¾ç‰‡ä¼˜åŒ–" aria-label="Permalink to &quot;å›¾ç‰‡ä¼˜åŒ–&quot;">â€‹</a></h3><hr><h4 id="å›¾ç‰‡æ ¼å¼ä¼˜åŒ–" tabindex="-1">å›¾ç‰‡æ ¼å¼ä¼˜åŒ– <a class="header-anchor" href="#å›¾ç‰‡æ ¼å¼ä¼˜åŒ–" aria-label="Permalink to &quot;å›¾ç‰‡æ ¼å¼ä¼˜åŒ–&quot;">â€‹</a></h4><ol><li><p><code>jpg:</code>é€‚åˆè‰²å½©ä¸°å¯Œçš„ç…§ç‰‡ã€<code>banner</code> å›¾ï¼›ä¸é€‚åˆå›¾å½¢æ–‡å­—ã€å›¾æ ‡ï¼ˆçº¹ç†è¾¹ç¼˜æœ‰é”¯é½¿ï¼‰ï¼Œä¸æ”¯æŒé€æ˜åº¦ã€‚</p></li><li><p><code>png:</code>é€‚åˆçº¯è‰²ã€é€æ˜ã€å›¾æ ‡ï¼Œæ”¯æŒåŠé€æ˜ï¼›ä¸é€‚åˆè‰²å½©ä¸°å¯Œå›¾ç‰‡ï¼Œå› ä¸ºæ— æŸå­˜å‚¨ä¼šå¯¼è‡´å­˜å‚¨ä½“ç§¯å¤§ã€‚</p></li><li><p><code>gif:</code>é€‚åˆåŠ¨ç”»ï¼Œå¯ä»¥åŠ¨çš„å›¾æ ‡ï¼›ä¸æ”¯æŒåŠé€æ˜ï¼Œä¸é€‚å’Œå­˜å‚¨å½©è‰²å›¾ç‰‡ã€‚</p></li><li><p><code>webp:</code> é€‚åˆåŠé€æ˜å›¾ç‰‡ï¼Œå¯ä»¥ä¿è¯å›¾ç‰‡è´¨é‡å’Œè¾ƒå°çš„ä½“ç§¯ã€‚</p></li><li><p><code>svg æ ¼å¼å›¾ç‰‡:</code>ç›¸æ¯”äº <code>jpg</code> å’Œ <code>jpg</code> å®ƒçš„ä½“ç§¯æ›´å°ï¼Œæ¸²æŸ“æˆæœ¬è¿‡é«˜,é€‚åˆå°ä¸”è‰²å½©å•ä¸€çš„å›¾æ ‡ã€‚</p></li></ol><hr><h4 id="å›¾ç‰‡å…¶ä»–ä¼˜åŒ–" tabindex="-1">å›¾ç‰‡å…¶ä»–ä¼˜åŒ– <a class="header-anchor" href="#å›¾ç‰‡å…¶ä»–ä¼˜åŒ–" aria-label="Permalink to &quot;å›¾ç‰‡å…¶ä»–ä¼˜åŒ–&quot;">â€‹</a></h4><ol><li><p>é¿å…ç©º<code>src</code>çš„å›¾ç‰‡ã€‚</p></li><li><p>å‡å°å›¾ç‰‡å°ºå¯¸ï¼ŒèŠ‚çº¦ç”¨æˆ·æµé‡ã€‚</p></li><li><p>img æ ‡ç­¾è®¾ç½®<code>alt</code>å±æ€§ï¼Œ æå‡å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶çš„ç”¨æˆ·ä½“éªŒã€‚</p></li><li><p>åŸç”Ÿçš„<code>loading:lazy</code>å›¾ç‰‡æ‡’åŠ è½½ï¼ˆåŸç”Ÿç”¨çš„å°‘ä¸å¥½ç›‘æ§ï¼Œä¸€èˆ¬éƒ½æ˜¯<code>js</code>å®ç°ï¼‰ã€‚</p></li></ol><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">img</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">loading</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">lazy</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./images/1.jpg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">width</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">300</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">height</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">450</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="5"><li>ä¸åŒç¯å¢ƒä¸‹ï¼ŒåŠ è½½ä¸åŒå°ºå¯¸å’Œåƒç´ çš„å›¾ç‰‡ã€‚</li></ol><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">img</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./images/1.jpg</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#C792EA;">sizes</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">(max-width:500px) 100px,(max-width:600px) 200px</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#C792EA;">srcset</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./images/1.jpg 100w, ./images/3.jpg 200w</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">/&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="6"><li><p>å¯¹äºè¾ƒå¤§çš„å›¾ç‰‡å¯ä»¥è€ƒè™‘é‡‡ç”¨æ¸è¿›å¼å›¾ç‰‡ï¼ˆæ¸è¿›å¼å›¾ç‰‡æ˜¯<code>ui</code>è®¾è®¡çš„ï¼Œå›¾ç‰‡ç½‘é€Ÿæ…¢æ—¶å¯èƒ½ä¼šä¸€æ¡ä¸€æ¡çš„åŠ è½½ï¼Œæ¸è¿›å¼å›¾ç‰‡ä¸€èˆ¬ä¼šæ¯”æ­£å¸¸çš„å°ä¸€äº› ï¼‰ã€‚</p></li><li><p>é‡‡ç”¨<code>base64URL</code>å‡å°‘å›¾ç‰‡è¯·æ±‚ã€‚</p></li><li><p>é‡‡ç”¨é›ªç¢§å›¾åˆå¹¶å›¾æ ‡å›¾ç‰‡ç­‰ã€‚</p></li></ol><h2 id="html-ä¼˜åŒ–" tabindex="-1"><code>HTML</code> ä¼˜åŒ– <a class="header-anchor" href="#html-ä¼˜åŒ–" aria-label="Permalink to &quot;\`HTML\` ä¼˜åŒ–&quot;">â€‹</a></h2><ol><li><p>è¯­ä¹‰åŒ– <code>HTML</code>ï¼šä»£ç ç®€æ´æ¸…æ™°ï¼Œåˆ©äºæœç´¢å¼•æ“</p></li><li><p>æå‰å£°æ˜å­—ç¬¦ç¼–ç ï¼Œè®©æµè§ˆå™¨å¿«é€Ÿç¡®å®šå¦‚ä½•æ¸²æŸ“ç½‘é¡µå†…å®¹</p></li><li><p>å‡å°‘ <code>HTML</code> åµŒå¥—å…³ç³»ã€å‡å°‘<code>DOM</code>èŠ‚ç‚¹æ•°é‡</p></li><li><p>åˆ é™¤å¤šä½™ç©ºæ ¼ã€ç©ºè¡Œã€æ³¨é‡Šã€åŠæ— ç”¨çš„å±æ€§ç­‰</p></li><li><p><code>HTML</code> å‡å°‘<code>iframe</code>ä½¿ç”¨ï¼ˆçˆ¶é¡µé¢è¦ç­‰å¾…è‡ªé¡µé¢åŠ è½½å®Œæˆï¼‰ <code>(iframe ä¼šé˜»å¡ onload äº‹ä»¶å¯ä»¥åŠ¨æ€åŠ è½½ iframe)</code></p></li></ol><h2 id="css-ä¼˜åŒ–" tabindex="-1"><code>CSS</code> ä¼˜åŒ– <a class="header-anchor" href="#css-ä¼˜åŒ–" aria-label="Permalink to &quot;\`CSS\` ä¼˜åŒ–&quot;">â€‹</a></h2><ol><li><p>å‡å°‘ä¼ªç±»é€‰æ‹©å™¨ã€å‡å°‘æ ·å¼å±‚æ•°ã€å‡å°‘ä½¿ç”¨é€šé…ç¬¦</p></li><li><p>é¿å…ä½¿ç”¨<code>CSS</code>è¡¨è¾¾å¼ï¼Œ<code>CSS</code> è¡¨è¾¾å¼ä¼šé¢‘ç¹æ±‚å€¼ï¼Œå½“æ»šåŠ¨é¡µé¢ï¼Œæˆ–è€…ç§»åŠ¨é¼ æ ‡æ—¶éƒ½ä¼šé‡æ–°è®¡ç®—<code>(IE6,7)</code>ã€‚</p></li></ol><div class="language-css line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">background-color</span><span style="color:#BABED8;">: expression((new Date()) </span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">getHours() %2 ? &#39;red&#39;: &#39;yellow&#39;);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="3"><li><p>åˆ é™¤ã€å‡å°‘æ— æ„ä¹‰çš„ä»£ç ã€å¯¹<code>css</code> è¿›è¡Œå‹ç¼©</p></li><li><p>ä½¿ç”¨å¤–é“¾ <code>css</code>ï¼Œå¯ä»¥å¯¹ <code>css</code> è¿›è¡Œç¼“å­˜</p></li><li><p>æ·»åŠ åª’ä½“å­—æ®µï¼ŒåªåŠ è½½æœ‰æ•ˆçš„ <code>css</code> æ–‡ä»¶</p></li></ol><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">link</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">index.css</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">rel</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">stylesheet</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">media</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">screen and (min-width:1024px)</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="6"><li><p><code>CSS contain</code> å±æ€§ï¼Œå°†å…ƒç´ è¿›è¡Œéš”ç¦»ï¼ˆè¡¨ç¤ºæˆ‘å½“å‰ä¿®æ”¹çš„èµ„æºå’Œå…¶ä»–èµ„æºæ²¡æœ‰å…³ç³»ï¼Œå®ƒå¯ä»¥èŠ‚çº¦æ¸²æŸ“æ€§èƒ½ï¼‰</p></li><li><p>å‡å°‘<code>@import</code> ä½¿ç”¨ï¼Œç”±äº<code>@import</code> é‡‡ç”¨çš„æ˜¯ä¸²è¡ŒåŠ è½½</p></li></ol><h2 id="js-ä¼˜åŒ–" tabindex="-1">JS ä¼˜åŒ– <a class="header-anchor" href="#js-ä¼˜åŒ–" aria-label="Permalink to &quot;JS ä¼˜åŒ–&quot;">â€‹</a></h2><ol><li>é€šè¿‡<code>asyncã€defer</code>å¼‚æ­¥åŠ è½½æ–‡ä»¶</li></ol><ul><li><code>defer</code>æ˜¯ <code>html</code> è§£ææ—¶åŠ è½½ <code>js</code>ï¼Œç­‰ <code>html</code> è§£æå®Œæ‰§è¡Œ <code>js</code>ï¼Œ<code>defer</code> æ˜¯æœ‰åºçš„ã€‚</li><li><code>async</code> æ˜¯ <code>html</code> è§£ææ—¶åŠ è½½ <code>js</code>ï¼Œ<code>js</code> åŠ è½½å®Œæ¯•å°±ç«‹å³æ‰§è¡Œ <code>js</code>ï¼Œä¼šé˜»å¡ <code>html</code> è§£æï¼Œ<code>async</code> æ˜¯æ— åºçš„ã€‚</li></ul><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/async_defer.png" alt="async_defer"></p><ol start="2"><li><p>å‡å°‘å¯¹ <code>DOM</code> çš„æ“ä½œï¼Œç¼“å­˜è®¿é—®è¿‡çš„å…ƒç´ ã€‚</p></li><li><p>ä½¿ç”¨ <code>webWorker</code> è§£å†³ç¨‹åºé˜»å¡é—®é¢˜ã€‚</p></li><li><p>ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ã€‚</p></li><li><p><code>IntersectionObserver</code>ï¼šç›‘æ§å½“å‰å±å¹•å¯è§†èŒƒå›´ï¼ˆæ€§èƒ½æ¯” <code>onscroll</code> æ›´é«˜ï¼‰ã€‚</p></li></ol><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">img</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./images/loading.jpg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">data-src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./images/1.jpg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">width: 200px;height:300px;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">img</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./images/loading.jpg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">data-src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./images/2.jpg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">width: 200px;height:300px;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">img</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./images/loading.jpg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">data-src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./images/3.jpg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">width: 200px;height:300px;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> observer </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">IntersectionObserver</span><span style="color:#BABED8;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">changes</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">changes</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">element</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;font-style:italic;">index</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">element</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">intersectionRatio</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// å…ƒç´ åˆ°è¾¾å¯è§†åŒº</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#BABED8;">observer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">unobserve</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">element</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">target</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#BABED8;">element</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">target</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">src</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">element</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">target</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">dataset</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">src</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">initObserver</span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">listItems</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">querySelectorAll</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">img</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">listItems</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">item</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">observer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">observe</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">item</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#82AAFF;">initObserver</span><span style="color:#BABED8;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="ä¼˜åŒ–ç­–ç•¥" tabindex="-1">ä¼˜åŒ–ç­–ç•¥ <a class="header-anchor" href="#ä¼˜åŒ–ç­–ç•¥" aria-label="Permalink to &quot;ä¼˜åŒ–ç­–ç•¥&quot;">â€‹</a></h2><ol><li>å…³é”®èµ„æºä¸ªæ•°è¶Šå¤šï¼Œé¦–æ¬¡é¡µé¢åŠ è½½æ—¶é—´å°±ä¼šè¶Šé•¿ã€‚</li><li>å…³é”®èµ„æºçš„å¤§å°ï¼Œå†…å®¹è¶Šå°ï¼Œä¸‹è½½æ—¶é—´è¶ŠçŸ­ã€‚</li><li>ä¼˜åŒ–ç™½å±ï¼šå†…è”<code>css</code>å’Œå†…è”<code>js</code>ç§»é™¤æ–‡ä»¶ä¸‹è½½,è¾ƒå°æ–‡ä»¶ä½“ç§¯ã€‚</li><li>é¢„æ¸²æŸ“ï¼Œæ‰“åŒ…æ—¶è¿›è¡Œé¢„æ¸²æŸ“ã€‚</li><li>ä½¿ç”¨<code>SSR</code>åŠ é€Ÿé¦–å±åŠ è½½ï¼ˆè€—è´¹æœåŠ¡ç«¯èµ„æºï¼‰ï¼Œæœ‰åˆ©äº<code>SEO</code>ä¼˜åŒ–ã€‚ é¦–å±åˆ©ç”¨æœåŠ¡ç«¯æ¸²æŸ“ï¼Œåç»­äº¤äº’é‡‡ç”¨å®¢æˆ·ç«¯æ¸²æŸ“ã€‚</li></ol>`,124)]))}const d=n(o,[["render",e]]);export{D as __pageData,d as default};
