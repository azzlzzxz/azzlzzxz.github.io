import{_ as e,B as c,o as r,c as t,x as s,D as a,z as o,a as n,Q as p}from"./chunks/framework.a5035e6c.js";const ss=JSON.parse('{"title":"Electron çš„ä¸»è¿›ç¨‹&æ¸²æŸ“è¿›ç¨‹","description":"","frontmatter":{},"headers":[],"relativePath":"frame/electron/process.md","lastUpdated":1707275761000}'),i={name:"frame/electron/process.md"},F=s("h1",{id:"electron-çš„ä¸»è¿›ç¨‹-æ¸²æŸ“è¿›ç¨‹",tabindex:"-1"},[n("Electron çš„ä¸»è¿›ç¨‹&æ¸²æŸ“è¿›ç¨‹ "),s("a",{class:"header-anchor",href:"#electron-çš„ä¸»è¿›ç¨‹-æ¸²æŸ“è¿›ç¨‹","aria-label":'Permalink to "Electron çš„ä¸»è¿›ç¨‹&æ¸²æŸ“è¿›ç¨‹"'},"â€‹")],-1),y=s("h2",{id:"ä¸»è¿›ç¨‹",tabindex:"-1"},[n("ä¸»è¿›ç¨‹ "),s("a",{class:"header-anchor",href:"#ä¸»è¿›ç¨‹","aria-label":'Permalink to "ä¸»è¿›ç¨‹"'},"â€‹")],-1),D=s("p",null,"ä¸»è¿›ç¨‹ä¸‹çš„å‡ ä¸ªé‡è¦çš„æ¨¡å—ï¼š",-1),d=s("h3",{id:"app",tabindex:"-1"},[s("code",null,"app"),n(),s("a",{class:"header-anchor",href:"#app","aria-label":'Permalink to "`app`"'},"â€‹")],-1),u=s("p",null,"æ§åˆ¶åº”ç”¨ç¨‹åºçš„äº‹ä»¶ç”Ÿå‘½å‘¨æœŸã€‚",-1),B=s("p",null,[s("code",null,"app"),n(" çš„å¸¸ç”¨ç”Ÿå‘½å‘¨æœŸé’©å­å¦‚ä¸‹ï¼š")],-1),b=s("code",null,"Windows",-1),A=s("code",null,"Linux",-1),E=s("code",null,"will-finish-launching",-1),m=s("code",null,"Â readyÂ ",-1),_=s("code",null,"ready",-1),w=s("code",null,"electron",-1),h=s("code",null,"ready",-1),f=s("code",null,"windows",-1),g=s("code",null,"linux",-1),C=s("code",null,"Cmd + Q",-1),v=s("code",null,"app.quit()",-1),q=s("code",null,"Electron",-1),T=s("code",null,"will-quit",-1),k=s("code",null,"Â window-all-closed",-1),x=p(`<div class="tip custom-block"><p class="custom-block-title">TIP</p><p>è€Œæˆ‘ä»¬é€šå¸¸ä¼šåœ¨ <code>ready</code> çš„æ—¶å€™æ‰§è¡Œåˆ›å»ºåº”ç”¨çª—å£ã€åˆ›å»ºåº”ç”¨èœå•ã€åˆ›å»ºåº”ç”¨å¿«æ·é”®ç­‰åˆå§‹åŒ–æ“ä½œã€‚è€Œåœ¨ <code>will-quit</code> æˆ–è€… <code>quit</code> çš„æ—¶å€™æ‰§è¡Œä¸€äº›æ¸…ç©ºæ“ä½œï¼Œæ¯”å¦‚è§£ç»‘åº”ç”¨å¿«æ·é”®ã€‚</p><p>ç‰¹åˆ«çš„ï¼Œåœ¨é <code>macOS</code> çš„ç³»ç»Ÿä¸‹ï¼Œé€šå¸¸ä¸€ä¸ªåº”ç”¨çš„æ‰€æœ‰çª—å£éƒ½é€€å‡ºçš„æ—¶å€™ï¼Œä¹Ÿæ˜¯è¿™ä¸ªåº”ç”¨é€€å‡ºä¹‹æ—¶ã€‚æ‰€ä»¥å¯ä»¥é…åˆ <code>window-all-closed</code> è¿™ä¸ªé’©å­æ¥å®ç°ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">window-all-closed</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">process</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">platform</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">darwin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å½“æ“ä½œç³»ç»Ÿä¸æ˜¯ darwinï¼ˆmacOSï¼‰çš„è¯</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">quit</span><span style="color:#F07178;">() </span><span style="color:#676E95;font-style:italic;">// é€€å‡ºåº”ç”¨</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div><p>é™¤äº†ä¸Šé¢è¯´çš„ç”Ÿå‘½å‘¨æœŸé’©å­ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å¸¸ç”¨çš„äº‹ä»¶é’©å­ï¼š</p>`,2),P=s("code",null,"ï¼ˆä»… macOSï¼‰",-1),S=s("code",null,"BrowserWindow",-1),R=s("code",null,"BrowserWindow",-1),V=s("p",null,"å½“ç„¶ï¼Œapp è¿™ä¸ªæ¨¡å—é™¤äº†ä¸Šè¿°çš„ä¸€äº›äº‹ä»¶é’©å­ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å¾ˆå¸¸ç”¨çš„æ–¹æ³•ï¼š",-1),W=s("h3",{id:"browerwindow-ä¸-browerview",tabindex:"-1"},[n("BrowerWindow ä¸ BrowerViewï¼š "),s("a",{class:"header-anchor",href:"#browerwindow-ä¸-browerview","aria-label":'Permalink to "BrowerWindow ä¸ BrowerViewï¼š"'},"â€‹")],-1),M=s("code",null,"BrowserView",-1),I=s("code",null,"BrowserWindow",-1),j=s("code",null,"webview",-1),N=s("p",null,[s("strong",null,[s("code",null,"webview")])],-1),O=s("p",null,[s("code",null,"webview"),n(" æ˜¯ç½‘é¡µä¸Šçš„å…ƒç´ ã€‚")],-1),z=p(`<p>ä¸ <code>iframe</code> çš„ä½œç”¨æ˜¯ç›¸ä¼¼çš„ï¼Œä½†æ˜¯å…¶ä¸ <code>iframe</code> çš„æœ¬è´¨åŒºåˆ«å…¶æ˜¯è¿è¡Œ <code>webview</code> çš„æ˜¯ä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹ï¼ˆä¹Ÿå°±æ˜¯å­çª—å£ï¼‰ã€‚</p><p><code>BrowserView</code> å°±æ˜¯ <code>webview</code> çš„æ›¿ä»£å·¥å…·ï¼Œèƒ½è®© <code>BrowserWindow</code> åœ¨ä¸»è¿›ç¨‹ä¸­åŠ¨æ€å¼•å…¥ <code>webview</code>ã€‚</p><p><code>BrowserWindow</code> çš„å¸¸ç”¨é…ç½®</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#BABED8;"> window</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">createWindow</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">window</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">BrowserWindow</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    height</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">900</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// é«˜</span></span>
<span class="line"><span style="color:#F07178;">    width</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">400</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// å®½</span></span>
<span class="line"><span style="color:#F07178;">    show</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// åˆ›å»ºåæ˜¯å¦æ˜¾ç¤º</span></span>
<span class="line"><span style="color:#F07178;">    frame</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ˜¯å¦åˆ›å»ºframelessçª—å£</span></span>
<span class="line"><span style="color:#F07178;">    fullscreenable</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ˜¯å¦å…è®¸å…¨å±</span></span>
<span class="line"><span style="color:#F07178;">    center</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ˜¯å¦å‡ºç°åœ¨å±å¹•å±…ä¸­çš„ä½ç½®</span></span>
<span class="line"><span style="color:#F07178;">    backgroundColor</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#fff</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// èƒŒæ™¯è‰²ï¼Œç”¨äºtransparentå’Œframelessçª—å£</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">titleBarStyle</span><span style="color:#F07178;">: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">xxx</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ ‡é¢˜æ çš„æ ·å¼ï¼Œæœ‰hiddenã€hiddenInsetã€customButtonsOnHoverç­‰</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">resizable</span><span style="color:#F07178;">: </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ˜¯å¦å…è®¸æ‹‰ä¼¸å¤§å°</span></span>
<span class="line"><span style="color:#F07178;">    transparent</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ˜¯å¦æ˜¯é€æ˜çª—å£ï¼ˆä»…macOSï¼‰</span></span>
<span class="line"><span style="color:#F07178;">    vibrancy</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ultra-dark</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// çª—å£æ¨¡ç³Šçš„æ ·å¼ï¼ˆä»…macOSï¼‰</span></span>
<span class="line"><span style="color:#F07178;">    webPreferences</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      backgroundThrottling</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// å½“é¡µé¢è¢«ç½®äºéæ¿€æ´»çª—å£çš„æ—¶å€™æ˜¯å¦åœæ­¢åŠ¨ç”»å’Œè®¡æ—¶å™¨</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ... ä»¥åŠå…¶ä»–å¯é€‰é…ç½®</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">process</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">platform</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">win32</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// é’ˆå¯¹windowså¹³å°åšå‡ºä¸åŒçš„é…ç½®</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">options</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">show</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// åˆ›å»ºå³å±•ç¤º</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">options</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">frame</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">åˆ›å»ºä¸€ä¸ªframelessçª—å£</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">options</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">backgroundColor</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#3f3c37</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// èƒŒæ™¯è‰²</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">loadURL</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">url</span><span style="color:#F07178;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">closed</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">window</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>è·Ÿ <code>app</code> æ¨¡å—ä¸€æ ·ï¼Œ<code>BrowserWindow </code>ä¹Ÿæœ‰å¾ˆå¤šå¸¸ç”¨çš„äº‹ä»¶é’©å­ï¼š</p><ul><li><code>closed</code> å½“çª—å£è¢«å…³é—­çš„æ—¶å€™</li><li><code>focus</code> å½“çª—å£è¢«æ¿€æ´»çš„æ—¶å€™</li><li><code>show</code> å½“çª—å£å±•ç¤ºçš„æ—¶å€™</li><li><code>hide</code> å½“çª—å£è¢«éšè—çš„æ—¶å€™</li><li><code>maxmize</code> å½“çª—å£æœ€å¤§åŒ–æ—¶</li><li><code>minimize</code> å½“çª—å£æœ€å°åŒ–æ—¶</li><li>...</li></ul><p>å½“ç„¶ï¼Œä¹Ÿä¾ç„¶æœ‰å¾ˆå¤šå®ç”¨çš„æ–¹æ³•ï¼š</p><ul><li><code>BrowserWindow.getFocusedWindow()</code> [é™æ€æ–¹æ³•]è·å–æ¿€æ´»çš„çª—å£</li><li><code>win.close()</code> [å®ä¾‹æ–¹æ³•ï¼Œä¸‹åŒ]å…³é—­çª—å£</li><li><code>win.focus()</code> æ¿€æ´»çª—å£</li><li><code>win.show()</code> æ˜¾ç¤ºçª—å£</li><li><code>win.hide()</code> éšè—çª—å£</li><li><code>win.maximize()</code> æœ€å¤§åŒ–çª—å£</li><li><code>win.minimize()</code> æœ€å°åŒ–çª—å£</li><li><code>win.restore()</code> ä»æœ€å°åŒ–çª—å£æ¢å¤</li></ul><h3 id="tray" tabindex="-1"><code>Tray</code> <a class="header-anchor" href="#tray" aria-label="Permalink to &quot;\`Tray\`&quot;">â€‹</a></h3><p>æ·»åŠ å›¾æ ‡å’Œä¸Šä¸‹æ–‡èœå•åˆ°ç³»ç»Ÿé€šçŸ¥åŒºã€‚</p><p>å¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸åŒç³»ç»Ÿçš„ä»»åŠ¡æ é‡Œçš„å›¾æ ‡ç»„ä»¶å§ã€‚</p><h3 id="menu" tabindex="-1"><code>Menu</code> <a class="header-anchor" href="#menu" aria-label="Permalink to &quot;\`Menu\`&quot;">â€‹</a></h3><p>åˆ›å»ºåŸç”Ÿåº”ç”¨èœå•å’Œä¸Šä¸‹æ–‡èœå•ã€‚</p><p>ä¸»è¦åˆ†ä¸¤ç§ï¼š</p><ul><li>ç¬¬ä¸€ç§æ˜¯ <code>app</code> çš„èœå•ã€‚å¯¹äº <code>macOS</code> æ¥è¯´å°±æ˜¯é¡¶éƒ¨æ å·¦ä¾§åŒºåŸŸçš„èœå•é¡¹ã€‚å¯¹äº <code>windows</code> è€Œè¨€å°±æ˜¯ä¸€ä¸ªçª—å£çš„æ ‡é¢˜æ ä¸‹æ–¹çš„èœå•åŒºã€‚</li><li>ç¬¬äºŒç§æ˜¯ç±»ä¼¼äºå³é”®èœå•çš„èœå•ã€‚</li></ul><h2 id="è¿›ç¨‹é€šä¿¡" tabindex="-1">è¿›ç¨‹é€šä¿¡ <a class="header-anchor" href="#è¿›ç¨‹é€šä¿¡" aria-label="Permalink to &quot;è¿›ç¨‹é€šä¿¡&quot;">â€‹</a></h2><p><strong>é€šä¿¡æ–¹å¼ï¼š</strong></p>`,17),$=s("h3",{id:"ipcmain-ä¸-ipcrenderer",tabindex:"-1"},[s("code",null,"ipcMain"),n(" ä¸ "),s("code",null,"ipcRenderer"),n(),s("a",{class:"header-anchor",href:"#ipcmain-ä¸-ipcrenderer","aria-label":'Permalink to "`ipcMain` ä¸ `ipcRenderer`"'},"â€‹")],-1),L=s("code",null,"(web é¡µé¢)",-1),Q=p(`<div class="tip custom-block"><p class="custom-block-title">TIP</p><p>å‘é€æ¶ˆæ¯æ—¶ï¼Œäº‹ä»¶åç§°ä¸º <code>channel</code>Â ã€‚</p><p>å›å¤åŒæ­¥ä¿¡æ¯æ—¶ï¼Œéœ€è¦è®¾ç½® <code>event.returnValue</code>ã€‚</p><p>å¯ä»¥ä½¿ç”¨ <code>event.reply(...)</code>å°†å¼‚æ­¥æ¶ˆæ¯å‘é€å›å‘é€è€…</p></div><p>å®˜ç½‘ä¸Šçš„ ğŸŒ°ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// åœ¨ä¸»è¿›ç¨‹ä¸­.</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> ipcMain </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">electron</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">ipcMain</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">asynchronous-message</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">arg</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">arg</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// prints &quot;ping&quot;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reply</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">asynchronous-reply</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pong</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">ipcMain</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">synchronous-message</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">arg</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">arg</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// prints &quot;ping&quot;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">event</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">returnValue</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pong</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//åœ¨æ¸²æŸ“å™¨è¿›ç¨‹ (ç½‘é¡µ) ä¸­ã€‚</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> ipcRenderer </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">electron</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(ipcRenderer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sendSync</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">synchronous-message</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ping</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)) </span><span style="color:#676E95;font-style:italic;">// prints &quot;pong&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">ipcRenderer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">asynchronous-reply</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">arg</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">arg</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// prints &quot;pong&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">ipcRenderer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">asynchronous-message</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ping</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>å…¶ä¸­ <code>ipcMain</code> åªæœ‰ç›‘å¬æ¥è‡ª <code>ipcRenderer</code> çš„æŸä¸ªäº‹ä»¶åæ‰èƒ½è¿”å›ç»™ <code>ipcRenderer</code> å€¼ã€‚è€Œ <code>ipcRenderer</code> æ—¢å¯ä»¥æ”¶ï¼Œä¹Ÿå¯ä»¥å‘ã€‚</p><p>é‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼Œå¦‚ä½•è®© <code>ipcMain</code> ä¸»åŠ¨å‘é€æ¶ˆæ¯å‘¢ï¼Ÿæˆ–è€…è¯´è®© <code>main</code> è¿›ç¨‹ä¸»åŠ¨å‘é€æ¶ˆæ¯ç»™ <code>ipcRenderer</code>ã€‚</p><p>é¦–å…ˆè¦æ˜ç¡®çš„æ˜¯ï¼Œ<code>ipcMain</code> æ— æ³•ä¸»åŠ¨å‘æ¶ˆæ¯ç»™ <code>ipcRenderer</code>ã€‚å› ä¸º <code>ipcMain</code> åªæœ‰<code>.on()</code>æ–¹æ³•æ²¡æœ‰<code>.send()</code>çš„æ–¹æ³•ã€‚æ‰€ä»¥åªèƒ½ç”¨ <code>webContents</code>ã€‚</p><h3 id="webcontents" tabindex="-1"><code>webContents</code> <a class="header-anchor" href="#webcontents" aria-label="Permalink to &quot;\`webContents\`&quot;">â€‹</a></h3><p><code>webContents</code> å…¶å®æ˜¯ <code>BrowserWindow</code> å®ä¾‹çš„ä¸€ä¸ªå±æ€§ã€‚ä¹Ÿå°±æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨ <code>main</code> è¿›ç¨‹é‡Œç»™æŸä¸ªçª—å£æŸä¸ªé¡µé¢å‘é€æ¶ˆæ¯ï¼Œåˆ™å¿…é¡»é€šè¿‡ <code>win</code>ã€‚</p><p><code>webContents.send()</code>æ–¹æ³•æ¥å‘é€ã€‚</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// In main process</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#BABED8;"> win </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">BrowserWindow</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{...}</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">win</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">webContents</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">img-files</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> imgs)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// In renderer process</span></span>
<span class="line"><span style="color:#BABED8;">ipcRenderer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">img-files</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">files</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">files</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>å¿…é¡»æŒ‡å®šè¦å‘é€çš„çª—å£ï¼Œæ‰èƒ½å°†ä¿¡æ¯å‡†ç¡®é€è¾¾ã€‚</p>`,11);function U(H,J,G,K,X,Y){const l=c("font");return r(),t("div",null,[F,y,D,s("ul",null,[s("li",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("app")]),_:1})])]),s("li",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("BrowerWindow ä¸ BrowerView")]),_:1})])]),s("li",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("ipcMain")]),_:1})])]),s("li",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("Menu")]),_:1})])]),s("li",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("Tray")]),_:1})])])]),d,u,B,s("ul",null,[s("li",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("will-finish-launching")]),_:1})]),n(" åœ¨åº”ç”¨å®ŒæˆåŸºæœ¬å¯åŠ¨è¿›ç¨‹ä¹‹åè§¦å‘ï¼Œåœ¨ "),b,n(" å’Œ "),A,n(" ä¸­,Â "),E,n("Â  äº‹ä»¶ä¸ "),m,n(" äº‹ä»¶æ˜¯ç›¸åŒçš„ã€‚")]),s("li",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[_]),_:1})]),n(" å½“ "),w,n(" å®Œæˆåˆå§‹åŒ–åè§¦å‘ï¼Œç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä½ å¿…é¡»åœ¨ "),h,n(" äº‹ä»¶å¥æŸ„ä¸­å¤„ç†æ‰€æœ‰äº‹åŠ¡ã€‚")]),s("li",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("window-all-closed")]),_:1})]),n(" æ‰€æœ‰çª—å£éƒ½å…³é—­çš„æ—¶å€™è§¦å‘ï¼Œåœ¨ "),f,n(" å’Œ "),g,n(" é‡Œï¼Œæ‰€æœ‰çª—å£éƒ½é€€å‡ºçš„æ—¶å€™é€šå¸¸æ˜¯åº”ç”¨é€€å‡ºçš„æ—¶å€™ï¼Œå¦‚æœä½ æ²¡æœ‰ç›‘å¬æ­¤äº‹ä»¶å¹¶ä¸”æ‰€æœ‰çª—å£éƒ½å…³é—­äº†ï¼Œé»˜è®¤çš„è¡Œä¸ºæ˜¯æ§åˆ¶é€€å‡ºç¨‹åºï¼›ä½†å¦‚æœä½ ç›‘å¬äº†æ­¤äº‹ä»¶ï¼Œä½ å¯ä»¥æ§åˆ¶æ˜¯å¦é€€å‡ºç¨‹åºã€‚ å¦‚æœç”¨æˆ·æŒ‰ä¸‹äº† Â "),C,n("ï¼Œæˆ–è€…å¼€å‘è€…è°ƒç”¨äº† Â "),v,n("ï¼Œ"),q,n(" ä¼šé¦–å…ˆå…³é—­æ‰€æœ‰çš„çª—å£ç„¶åè§¦å‘ Â "),T,n("Â  äº‹ä»¶ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ "),k,n("Â  äº‹ä»¶ä¸ä¼šè¢«è§¦å‘ã€‚")]),s("li",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("before-quit")]),_:1})]),n(" é€€å‡ºåº”ç”¨ä¹‹å‰çš„æ—¶å€™è§¦å‘")]),s("li",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("will-quit")]),_:1})]),n(" å³å°†é€€å‡ºåº”ç”¨çš„æ—¶å€™è§¦å‘")]),s("li",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("quit")]),_:1})]),n(" åº”ç”¨é€€å‡ºçš„æ—¶å€™è§¦å‘")])]),x,s("ul",null,[s("li",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("active")]),_:1})]),P,n("å½“åº”ç”¨å¤„äºæ¿€æ´»çŠ¶æ€æ—¶")]),s("li",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("browser-window-created")]),_:1})]),n(" å½“ä¸€ä¸ª "),S,n(" è¢«åˆ›å»ºçš„æ—¶å€™")]),s("li",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("browser-window-focus")]),_:1})]),n(" å½“ä¸€ä¸ª "),R,n(" å¤„äºæ¿€æ´»çŠ¶æ€çš„æ—¶å€™")])]),V,s("ul",null,[s("li",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("app.quit()")]),_:1})]),n(" ç”¨äºé€€å‡ºåº”ç”¨")]),s("li",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("app.getPath(name)")]),_:1})]),n(" ç”¨äºè·å–ä¸€äº›ç³»ç»Ÿç›®å½•ï¼Œå¯¹äºå­˜æ”¾åº”ç”¨çš„é…ç½®æ–‡ä»¶ç­‰å¾ˆæœ‰ç”¨")]),s("li",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("app.focus()")]),_:1})]),n(" ç”¨äºæ¿€æ´»åº”ç”¨ï¼Œä¸åŒç³»ç»Ÿæ¿€æ´»é€»è¾‘ä¸ä¸€æ ·ã€‚")])]),W,s("p",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("BrowerViewï¼š")]),_:1})]),n(" åˆ›å»ºå’Œæ§åˆ¶è§†å›¾ï¼Œ"),M,n("Â  è¢«ç”¨æ¥è®© Â "),I,n("Â  åµŒå…¥æ›´å¤šçš„ web å†…å®¹ï¼Œå®ƒå°±åƒä¸€ä¸ªå­çª—å£ï¼Œé™¤äº†å®ƒçš„ä½ç½®æ˜¯ç›¸å¯¹äºçˆ¶çª—å£ï¼Œè¿™æ„å‘³ç€å¯ä»¥æ›¿ä»£ "),j,n(" æ ‡ç­¾ã€‚")]),s("p",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("BrowerWindowï¼š")]),_:1})]),n(" åˆ›å»ºå’Œæ§åˆ¶æµè§ˆå™¨çª—å£ã€‚")]),N,O,s("p",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("webwiew çš„ä½œç”¨æ˜¯ç”¨æ¥åµŒå…¥å¤–æ¥ä¸å—ä¿¡ä»»èµ„æºï¼Œå®ç°å¤–æ¥èµ„æºä¸æœ¬åœ°èµ„æºçš„éš”ç¦»ï¼Œä¿è¯åµŒå…¥èµ„æºçš„å®‰å…¨æ€§ã€‚")]),_:1})])]),z,s("ul",null,[s("li",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("ipcMain ä¸ ipcRenderer")]),_:1})])]),s("li",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("webContent")]),_:1})])])]),$,s("p",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("ipcRenderer: ")]),_:1})]),n(" å¯ä»¥ä½¿ç”¨å®ƒæä¾›çš„ä¸€äº›æ–¹æ³•ä»æ¸²æŸ“è¿›ç¨‹ "),L,n(" å‘é€åŒæ­¥æˆ–å¼‚æ­¥çš„æ¶ˆæ¯åˆ°ä¸»è¿›ç¨‹ã€‚ ä¹Ÿå¯ä»¥æ¥æ”¶ä¸»è¿›ç¨‹å›å¤çš„æ¶ˆæ¯ã€‚")]),s("p",null,[s("strong",null,[a(l,{color:"FF9D00"},{default:o(()=>[n("ipcMainï¼š")]),_:1})]),n(" ä»ä¸»è¿›ç¨‹åˆ°æ¸²æŸ“è¿›ç¨‹çš„å¼‚æ­¥é€šä¿¡ã€‚")]),Q])}const ns=e(i,[["render",U]]);export{ss as __pageData,ns as default};
