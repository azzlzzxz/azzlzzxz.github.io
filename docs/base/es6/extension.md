# å‡½æ•°ã€æ•°ç»„ã€å¯¹è±¡ã€è¿ç®—ç¬¦çš„çš„æ‰©å±•

## å‡½æ•°çš„æ‰©å±•

### å‚æ•°é»˜è®¤å€¼

```js
function add(x, y = 4) {
  return x + y
}

add(1, 2) // 3
add(1) // 5
add(1, undefined) // 5
add(1, null) // 5
```

::: tip æ³¨æ„ âš ï¸

- å‚æ•°å˜é‡æ˜¯é»˜è®¤å£°æ˜çš„ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨`let`æˆ–`const`å†æ¬¡å£°æ˜
- å‡½æ•°çš„å‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼Œè¦ç›´æ¥å†™åœ¨å‚æ•°å®šä¹‰çš„åé¢
- ä½¿ç”¨å‚æ•°é»˜è®¤å€¼æ—¶ï¼Œå‡½æ•°ä¸èƒ½æœ‰åŒåå‚æ•°
- å‚æ•°é»˜è®¤å€¼ä¸æ˜¯ä¼ å€¼çš„ï¼Œè€Œæ˜¯æ¯æ¬¡éƒ½é‡æ–°è®¡ç®—é»˜è®¤å€¼è¡¨è¾¾å¼çš„å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‚æ•°é»˜è®¤å€¼æ˜¯æƒ°æ€§æ±‚å€¼çš„
  :::

### å‡½æ•°çš„ `length` å±æ€§

æŒ‡å®šäº†é»˜è®¤å€¼ä»¥åï¼Œå‡½æ•°çš„`length`å±æ€§ï¼Œå°†è¿”å›æ²¡æœ‰æŒ‡å®šé»˜è®¤å€¼çš„å‚æ•°ä¸ªæ•°ã€‚

```js
function add(x, y = 4) {
  return x + y
}

add.length // 1
```

### å‰©ä½™å‚æ•°ï¼ˆ`rest` å‚æ•°ï¼‰

`ES6` å¼•å…¥ `rest` å‚æ•°ï¼ˆå½¢å¼ä¸º`...å˜é‡å`ï¼‰ï¼Œç”¨äºè·å–å‡½æ•°çš„å¤šä½™å‚æ•°ï¼Œè¿™æ ·å°±ä¸éœ€è¦ä½¿ç”¨`arguments`å¯¹è±¡äº†ã€‚

`rest` å‚æ•°æ­é…çš„å˜é‡æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥å˜é‡å°†å¤šä½™çš„å‚æ•°æ”¾å…¥æ•°ç»„ä¸­ã€‚

```js
function push(array, ...items) {
  array.push(...items)
}

let a = []
push(a, 1, 2, 3)
a // [1, 2, 3]
```

::: tip æ³¨æ„ âš ï¸

- `arguments`å¯¹è±¡ä¸æ˜¯æ•°ç»„ï¼Œè€Œæ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ã€‚æ‰€ä»¥ä¸ºäº†ä½¿ç”¨æ•°ç»„çš„æ–¹æ³•ï¼Œå¿…é¡»ä½¿ç”¨`Array.from`å…ˆå°†å…¶è½¬ä¸ºæ•°ç»„ã€‚`rest` å‚æ•°å°±ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªçœŸæ­£çš„æ•°ç»„ï¼Œæ•°ç»„ç‰¹æœ‰çš„æ–¹æ³•éƒ½å¯ä»¥ä½¿ç”¨
- `rest` å‚æ•°ä¹‹åä¸èƒ½å†æœ‰å…¶ä»–å‚æ•°ï¼ˆå³åªèƒ½æ˜¯æœ€åä¸€ä¸ªå‚æ•°ï¼‰ï¼Œå¦åˆ™ä¼šæŠ¥é”™
- å‡½æ•°çš„`length`å±æ€§ï¼Œä¸åŒ…æ‹¬ `rest` å‚æ•°
  :::

### ç®­å¤´å‡½æ•°

[<u>ç®­å¤´å‡½æ•°è¯·çœ‹ ğŸš€</u>](/base/es6/arrowFn.md)

### `name` å±æ€§

å‡½æ•°çš„ name å±æ€§ï¼Œè¿”å›è¯¥å‡½æ•°çš„å‡½æ•°åã€‚

```js
function f() {}

f.name // "f"
```

## æ‰©å±•è¿ç®—ç¬¦

æ‰©å±•è¿ç®—ç¬¦`ï¼ˆspreadï¼‰`æ˜¯ä¸‰ä¸ªç‚¹ï¼ˆ`...`ï¼‰ã€‚å®ƒå¥½æ¯” `rest` å‚æ•°çš„é€†è¿ç®—

- æ•°ç»„çš„æ‰©å±•è¿ç®—ç¬¦ä¼šå°†æ•°ç»„è½¬ä¸ºç”¨é€—å·åˆ†éš”çš„å‚æ•°åºåˆ—

- å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦ä¼šå–å‡ºå‚æ•°å¯¹è±¡çš„æ‰€æœ‰å¯éå†å±æ€§ï¼Œæ‹·è´åˆ°å½“å‰å¯¹è±¡ä¹‹ä¸­

```js
console.log(...[1, 2, 3])
// 1 2 3
```

### æ›¿ä»£å‡½æ•°çš„`apply()`æ–¹æ³•

ç”±äºæ‰©å±•è¿ç®—ç¬¦å¯ä»¥å±•å¼€æ•°ç»„ï¼Œæ‰€ä»¥ä¸å†éœ€è¦`apply()`æ–¹æ³•å°†æ•°ç»„è½¬ä¸ºå‡½æ•°çš„å‚æ•°äº†

```js
// ES5 çš„å†™æ³•
function f(x, y, z) {
  // ...
}
var args = [0, 1, 2]
f.apply(null, args)

// ES6 çš„å†™æ³•
function f(x, y, z) {
  // ...
}
let args = [0, 1, 2]
f(...args)
```

> ä¸¾ä¸ª ğŸŒ° åº”ç”¨`Math.max()`æ–¹æ³•ï¼Œç®€åŒ–æ±‚å‡ºä¸€ä¸ªæ•°ç»„æœ€å¤§å…ƒç´ çš„å†™æ³•

```js
// ES5 çš„å†™æ³•
Math.max.apply(null, [18, 3, 77])

// ES6 çš„å†™æ³•
Math.max(...[18, 3, 77])

// ç­‰åŒäº
Math.max(18, 3, 77)
```

### å¤åˆ¶æ•°ç»„/å¯¹è±¡

æ•°ç»„æ˜¯å¤åˆçš„æ•°æ®ç±»å‹ï¼Œç›´æ¥å¤åˆ¶çš„è¯ï¼Œåªæ˜¯å¤åˆ¶äº†æŒ‡å‘åº•å±‚æ•°æ®ç»“æ„çš„æŒ‡é’ˆï¼Œè€Œä¸æ˜¯å…‹éš†ä¸€ä¸ªå…¨æ–°çš„æ•°ç»„

```js
let arr1 = [1, 2, 3]
let arr2 = arr1

arr2.push(4)
arr1 // [1, 2, 3, 4]
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`arr2`å¹¶ä¸æ˜¯`arr1`çš„å…‹éš†ï¼Œè€Œæ˜¯æŒ‡å‘åŒä¸€ä»½æ•°æ®çš„å¦ä¸€ä¸ªæŒ‡é’ˆã€‚ä¿®æ”¹`arr2`ï¼Œä¼šç›´æ¥å¯¼è‡´`arr1`çš„å˜åŒ–

æ‰©å±•è¿ç®—ç¬¦æä¾›äº†å¤åˆ¶/å…‹éš†æ•°ç»„çš„ç®€ä¾¿å†™æ³•

```js
let arr1 = [1, 2, 3]

// å†™æ³•ä¸€
let arr2 = [...arr1]

// å†™æ³•äºŒ
let [...arr2] = arr1

arr2.push(4)
arr1 // [1, 2, 3]
arr2 // [1, 2, 3, 4]
```

```js
const obj1 = { name: 'steins gate' }

// å†™æ³•ä¸€
const obj2 = { ...obj1 }

// å†™æ³•äºŒ
const { ...obj2 } = obj1
```

### åˆå¹¶æ•°ç»„/å¯¹è±¡

æ‰©å±•è¿ç®—ç¬¦æä¾›äº†æ•°ç»„åˆå¹¶çš„æ–°å†™æ³•ï¼Œä½†æ˜¯ æ˜¯ **<font color="FF9D00">æµ…æ‹·è´</font>**

```js
let arr1 = [1, 2, 3]
let arr2 = [4, 5]

let arr3 = [...arr1, ...arr2]

arr3[0] === arr1[0] // true
```

```js
const obj1 = { name: 'steins gate' }
const obj2 = { age: 18 }

const obj = { ...obj1, ...obj2 }
```

### ä¸è§£æ„èµ‹å€¼ç»“åˆ

æ‰©å±•è¿ç®—ç¬¦å¯ä»¥ä¸è§£æ„èµ‹å€¼ç»“åˆèµ·æ¥ï¼Œç”¨äºç”Ÿæˆæ•°ç»„

```js
const [first, ...rest] = [1, 2, 3, 4, 5]
first // 1
rest // [2, 3, 4, 5]

const [first, ...rest] = []
first // undefined
rest // []

const [first, ...rest] = ['foo']
first // "foo"
rest // []
```

::: tip æ³¨æ„ âš ï¸

å¦‚æœå°†æ‰©å±•è¿ç®—ç¬¦ç”¨äºæ•°ç»„èµ‹å€¼ï¼Œåªèƒ½æ”¾åœ¨å‚æ•°çš„æœ€åä¸€ä½ï¼Œå¦åˆ™ä¼šæŠ¥é”™

```js

const [...butLast, last] = [1, 2, 3, 4, 5];
// æŠ¥é”™

const [first, ...middle, last] = [1, 2, 3, 4, 5];
// æŠ¥é”™
```

:::

### å­—ç¬¦ä¸²

æ‰©å±•è¿ç®—ç¬¦è¿˜å¯ä»¥å°†å­—ç¬¦ä¸²è½¬ä¸ºçœŸæ­£çš„æ•°ç»„

```js
let str = 'hello'

;[...str] // ["h", "e", "l", "l", "o"]
```

::: tip æç¤º ğŸ’¡

- ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦æ‹·è´æ•°ç»„æˆ–å¯¹è±¡æ—¶å…¶éƒ½æ˜¯æµ…æ‹·è´
- å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦ç­‰åŒäºä½¿ç”¨ Object.assign() æ–¹æ³•
- åªæœ‰å‡½æ•°è°ƒç”¨æ—¶æ‰©å±•è¿ç®—ç¬¦æ‰å¯ä»¥æ”¾åœ¨åœ†æ‹¬å·ä¸­ï¼Œå¦åˆ™ä¼šæŠ¥é”™
- æ‰©å±•è¿ç®—ç¬¦ç”¨äºèµ‹å€¼æ—¶åªèƒ½æ”¾åœ¨å‚æ•°çš„æœ€åä¸€ä½ï¼Œå¦åˆ™ä¼šæŠ¥é”™
- åœ¨æ‰©å±•è¿ç®—ç¬¦å±•å¼€æ•°ç»„æ—¶ï¼Œå…¶å‚æ•°å¿…é¡»è¦æœ‰ iterator æ¥å£ï¼Œå¦åˆ™ä¼šæŠ¥é”™
- åœ¨æ‰©å±•è¿ç®—ç¬¦å±•å¼€å¯¹è±¡æ—¶ï¼Œå…¶å‚æ•°å¦‚æœä¸æ˜¯å¯¹è±¡æ—¶ä¼šè‡ªåŠ¨è½¬ä¸ºå¯¹è±¡ï¼ˆè°ƒç”¨ Object()ï¼‰

:::

## æ•°ç»„çš„æ‰©å±•

### `Array.from()`

`Array.from()`æ–¹æ³•ç”¨äºå°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼š

- ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡`ï¼ˆarray-like objectï¼‰`
  - `DOM` æ“ä½œè¿”å›çš„ `NodeList`
  - `arguments` å¯¹è±¡
- å¯éå†`ï¼ˆiterableï¼‰`çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ `ES6` æ–°å¢çš„æ•°æ®ç»“æ„ `Set` å’Œ `Map`ï¼‰

```js
/* array-like object è½¬æ•°ç»„ */
const arrayLike = {
  0: 'a',
  1: 'b',
  2: 'c',
  length: 3,
}

// ES5 å†™æ³•
var arr1 = [].slice.call(arrayLike) // ['a', 'b', 'c']

// ES6 å†™æ³•
let arr2 = Array.from(arrayLike) // ['a', 'b', 'c']
```

::: tip `Array.from()`çš„åº”ç”¨

- `Array.from()`è¿˜å¯ä»¥æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œç”¨ç±»ä¼¼äºæ•°ç»„çš„`map()`æ–¹æ³•ï¼Œç”¨æ¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ï¼Œå°†å¤„ç†åçš„å€¼æ”¾å…¥è¿”å›çš„æ•°ç»„

```js
Array.from(arrayLike, (x) => x * x)
// ç­‰åŒäº
Array.from(arrayLike).map((x) => x * x)

Array.from([1, 2, 3], (x) => x * x)
// [1, 4, 9]
```

- `Array.from()`çš„å¦ä¸€ä¸ªåº”ç”¨æ˜¯ï¼Œå°†å­—ç¬¦ä¸²è½¬ä¸ºæ•°ç»„ï¼Œç„¶åè¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚å› ä¸ºå®ƒèƒ½æ­£ç¡®å¤„ç†å„ç§ `Unicode` å­—ç¬¦ï¼Œå¯ä»¥é¿å… `JavaScript` å°†å¤§äº`\uFFFF`çš„ `Unicode` å­—ç¬¦ï¼Œç®—ä½œä¸¤ä¸ªå­—ç¬¦çš„ `bug`

```js
function countString(string) {
  return Array.from(string).length
}
countString('ä½ å¥½') // 2
```

:::

### `Array.of()`

`Array.of()`æ–¹æ³•ç”¨äºå°†ä¸€ç»„å€¼ï¼Œè½¬æ¢ä¸ºæ•°ç»„

```js
Array.of(3, 11, 8) // [3,11,8]
Array.of(3) // [3]
Array.of(3).length // 1
```

::: tip æ³¨æ„ âš ï¸

- `Array.of()` æ–¹æ³•çš„ä¸»è¦ç›®çš„æ˜¯å¼¥è¡¥æ•°ç»„æ„é€ å‡½æ•° `Array()` çš„ä¸è¶³(å› ä¸ºå‚æ•°ä¸ªæ•°çš„ä¸åŒä¼šå¯¼è‡´`Array()`çš„è¡Œä¸ºæœ‰å·®å¼‚)

```js
Array() // []
Array(3) // [, , ,]
Array(3, 11, 8) // [3, 11, 8]
```

- `Array.of()`åŸºæœ¬ä¸Šå¯ä»¥ç”¨æ¥æ›¿ä»£`Array()`æˆ–`new Array()`ï¼Œå¹¶ä¸”ä¸å­˜åœ¨ç”±äºå‚æ•°ä¸åŒè€Œå¯¼è‡´çš„é‡è½½ã€‚å®ƒçš„è¡Œä¸ºéå¸¸ç»Ÿä¸€

```js
Array.of() // []
Array.of(undefined) // [undefined]
Array.of(1) // [1]
Array.of(1, 2) // [1, 2]
```

- `Array.of()` æ€»æ˜¯è¿”å›å‚æ•°å€¼ç»„æˆçš„æ•°ç»„ã€‚å¦‚æœæ²¡æœ‰å‚æ•°å°±è¿”å›ä¸€ä¸ªç©ºæ•°ç»„

```js
/* Array.of() çš„æ¨¡æ‹Ÿå®ç° */
function ArrayOf() {
  return [].slice.call(arguments)
}
```

:::

### å®ä¾‹æ–¹æ³•: find() å’Œ findIndex()

`find()` æ–¹æ³•ç”¨äºæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜ï¼Œå¦‚æœ**æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æˆå‘˜åˆ™è¿”å› `undefined`**

`findIndex()` æ–¹æ³•ç”¨äºæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜çš„ä½ç½®ï¼Œå¦‚æœ**æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æˆå‘˜åˆ™è¿”å› `-1`**

```js
const arr = [1, 5, 10, 15]

/* find() */
arr.find((item) => item > 9) // 10
arr.find((item) => item === 9) // undefined

/* findIndex() */
arr.findIndex((item) => item > 9) // 2
arr.findIndex((item) => item === 9) // -1
```

::: tip

è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥å‘ç° NaNï¼Œå¼¥è¡¥äº†æ•°ç»„çš„`indexOf()`æ–¹æ³•çš„ä¸è¶³ã€‚

```js
;[NaN].indexOf(NaN) // -1

;[NaN].findIndex((y) => Object.is(NaN, y)) // 0
```

:::

### å®ä¾‹æ–¹æ³•: fill()

`fill`æ–¹æ³•ä½¿ç”¨ç»™å®šå€¼ï¼Œå¡«å……ä¸€ä¸ªæ•°ç»„ã€‚

```js
;['a', 'b', 'c'].fill(7)
// [7, 7, 7]

new Array(3).fill(7)
// [7, 7, 7]
```

`fill`æ–¹æ³•è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šå¡«å……çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚

```js
;['a', 'b', 'c'].fill(7, 1, 2)
// ['a', 7, 'c']
```

### å®ä¾‹æ–¹æ³•: includes()

`includes()` æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ç»™å®šçš„å€¼

```js
const arr = [1, 2, NaN]
arr.includes(2) // true
arr.includes(4) // false
arr.includes(NaN) // true
```

::: tip includes() å’Œ indexOf() çš„å¯¹æ¯”

`indexOf()` ä¸å¤Ÿè¯­ä¹‰åŒ–ï¼Œå…¶å«ä¹‰æ˜¯æ‰¾åˆ°å‚æ•°å€¼çš„ç¬¬ä¸€ä¸ªå‡ºç°ä½ç½®ï¼Œæ‰€ä»¥è¦å»æ¯”è¾ƒæ˜¯å¦ä¸ç­‰äº `-1`ï¼Œè¡¨è¾¾èµ·æ¥ä¸å¤Ÿç›´è§‚<br>
`indexOf()` å†…éƒ¨ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦ (`===`) è¿›è¡Œåˆ¤æ–­ï¼Œè¿™ä¼šå¯¼è‡´å¯¹ `NaN` çš„è¯¯åˆ¤

:::

### å®ä¾‹æ–¹æ³•: at()

`at()` æ–¹æ³•æ¥å—ä¸€ä¸ªæ•´æ•°(æ”¯æŒè´Ÿæ•°)ä½œä¸ºå‚æ•°è¿”å›å¯¹åº”ä½ç½®çš„æˆå‘˜ï¼Œå¦‚æœ**å‚æ•°ä½ç½®è¶…å‡ºäº†æ•°ç»„èŒƒå›´åˆ™è¿”å› `undefined`**

```js
const arr = ['steins gate', 18]

arr.at(0) // 'steins gate'
arr.at(-1) // 18
arr.at(99) // undefined
```

### å®ä¾‹æ–¹æ³•: flat() å’Œ flatMap()

`flat()` æ–¹æ³•ç”¨äºå°†åµŒå¥—çš„æ•°ç»„æ‹å¹³å˜æˆä¸€ç»´çš„æ•°ç»„ï¼Œè¯¥æ–¹æ³•**è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ä¸æ”¹å˜åŸæ•°ç»„**

`flatMap()` æ–¹æ³•ä¼šå…ˆå¯¹åŸæ•°ç»„çš„æ¯ä¸ªæˆå‘˜æ‰§è¡Œä¸€ä¸ªå‡½æ•°(ç›¸å½“äºæ‰§è¡Œ `Array.prototype.map()`) ç„¶åå¯¹è¿”å›å€¼ç»„æˆçš„æ•°ç»„æ‰§è¡Œ `flat()` æ–¹æ³•ï¼Œè¯¥æ–¹æ³•**è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ä¸æ”¹å˜åŸæ•°ç»„**

```js
/* flat() */
const arr1 = [1, 2, [3, [4, 5]]]
const arr2 = [1, 2, , 4, 5]

arr1.flat() // [1, 2, 3, [4, 5]]
arr1.flat(2) // [1, 2, 3, 4, 5]

arr2.flat() // [1, 2, 4, 5]

/* flatMap() */
const arr = [1, 2, 3, 4]
arr.flatMap((x) => [[x * 2]]) // [[2], [4], [6], [8]]
// ç›¸å½“äº [[2, 4], [3, 6], [4, 8]].flat()
```

::: tip flat() å’Œ flatMap() æ³¨æ„ç‚¹

- `flat()` æ–¹æ³•é»˜è®¤åªä¼šæ‹‰å¹³ä¸€å±‚
- `flat()`æ–¹æ³•ä¼šè·³è¿‡åŸæ•°ç»„ä¸­çš„ç©ºä½
- `flatMap()` åªèƒ½å±•å¼€ä¸€å±‚æ•°ç»„

:::

::: info

[<u>è¿™é‡Œåªåˆ—ä¸¾äº†ä¸€äº›å¸¸ç”¨æ–¹æ³•ï¼Œå…¶ä»–çš„æ•°ç»„æ‰©å±•æ–¹æ³•å¯ä»¥çœ‹ é˜®ä¸€å³° çš„ ES6 å…¥é—¨æ•™ç¨‹</u>](https://es6.ruanyifeng.com/#docs/array)

:::

## å¯¹è±¡çš„æ‰©å±•

### å±æ€§ç®€å†™

`ES6` å…è®¸åœ¨å¤§æ‹¬å·é‡Œé¢ç›´æ¥å†™å…¥å˜é‡å’Œå‡½æ•°ä½œä¸ºå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•

```js
const foo = 'bar'
const baz = { foo }
baz // {foo: "bar"}

// ç­‰åŒäº
const baz = { foo: foo }
```

```js
const obj = {
  method() {
    return 'Hello!'
  },
}

// ç­‰åŒäº

const obj = {
  method: function () {
    return 'Hello!'
  },
}
```

::: tip æ³¨æ„ âš ï¸

ç®€å†™çš„å¯¹è±¡æ–¹æ³•ä¸èƒ½ç”¨ä½œæ„é€ å‡½æ•°ï¼Œä¼šæŠ¥é”™

```js
const obj = {
  f() {
    this.foo = 'bar'
  },
}

new obj.f() // æŠ¥é”™
```

:::

### å±æ€§åè¡¨è¾¾å¼

`JavaScript` å®šä¹‰å¯¹è±¡çš„å±æ€§ï¼Œæœ‰ä¸¤ç§æ–¹æ³•

```js
// æ–¹æ³•ä¸€
obj.foo = true

// æ–¹æ³•äºŒ
obj['a' + 'bc'] = 123
```

`ES6` å…è®¸å­—é¢é‡å®šä¹‰å¯¹è±¡æ—¶ï¼Œç”¨ï¼ˆè¡¨è¾¾å¼ï¼‰ä½œä¸ºå¯¹è±¡çš„å±æ€§åï¼Œå³æŠŠè¡¨è¾¾å¼æ”¾åœ¨æ–¹æ‹¬å·å†…

```js
let propKey = 'foo'

let obj = {
  [propKey]: true,
  ['a' + 'bc']: 123,
}
```

è¡¨è¾¾å¼è¿˜å¯ä»¥ç”¨äºå®šä¹‰æ–¹æ³•å

```js
let obj = {
  ['h' + 'ello']() {
    return 'hi'
  },
}

obj.hello() // hi
```

::: tip æ³¨æ„ âš ï¸

- å±æ€§åè¡¨è¾¾å¼ä¸ç®€æ´è¡¨ç¤ºæ³•ï¼Œä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼Œä¼šæŠ¥é”™ã€‚

```js
// æŠ¥é”™
const key = 'name';
const obj = { [key] }

// æ­£ç¡®
const newKey = 'name';
const newObj = {
  [newKey]: 'steins gate'
}
```

- å±æ€§åè¡¨è¾¾å¼å¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šè‡ªåŠ¨å°†å¯¹è±¡è½¬ä¸ºå­—ç¬¦ä¸²`[object Object]`

```js
const keyA = { a: 1 }
const keyB = { b: 2 }

const myObject = {
  [keyA]: 'valueA',
  [keyB]: 'valueB',
}

myObject // Object {[object Object]: "valueB"}
```

:::

### Object.is()

`Object.is()` æ–¹æ³•ç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ä¸¥æ ¼ç›¸ç­‰ï¼Œä¸¥æ ¼æ¯”è¾ƒè¿ç®—ç¬¦ (`===`) çš„è¡Œä¸ºåŸºæœ¬ä¸€è‡´

```js
Object.is('key', 'key') // true
Object.is({}, {}) // false
```

::: tip Object.is() ä¸ === çš„ä¸åŒä¹‹å¤„

`+0`ä¸ç­‰äº`-0`

```js
/* +0 ä¸ç­‰äº -0 */
;+0 === -0 // true
Object.is(+0, -0) // false

/* NaN ç­‰äºè‡ªèº« */
NaN === NaN // false
Object.is(NaN, NaN) // true
```

:::

### Object.assign()

`Object.assign()` æ–¹æ³•ç”¨äºå¯¹è±¡çš„åˆå¹¶ï¼Œå°†æºå¯¹è±¡çš„æ‰€æœ‰å¯æšä¸¾å±æ€§å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡å¯¹è±¡åé¢çš„å‚æ•°éƒ½æ˜¯æºå¯¹è±¡ï¼‰

```js
const target = { a: 1, b: 1 }

const source1 = { b: 2, c: 2 }
const source2 = { c: 3 }

Object.assign(target, source1, source2)
```

#### åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶ä¼šç›´æ¥è¿”å›è¯¥å‚æ•°

```js
const obj = { a: 1 }
Object.assign(obj) === obj // true
```

#### ä¼ å…¥å‚æ•°ä¸æ˜¯å¯¹è±¡æ—¶ä¼šå…ˆè½¬æˆå¯¹è±¡å†è¿”å›

```js
typeof Object.assign(1) // "object"
typeof Object.assign(true) // "object"
```

#### ä¼ å…¥éå¯¹è±¡ç±»å‹çš„åœºæ™¯

```js
/* undefined å’Œ null */
// é¦–ä½å‚æ•°æ—¶ä¼šæŠ¥é”™
Object.assign(undefined) // TypeError
Object.assign(null) // TypeError
// éé¦–ä½å‚æ•°æ—¶ä¼šå¿½ç•¥
const obj = {}
Object.assign(obj, undefined) === obj // true
Object.assign(obj, null) === obj // true

/* éé¦–ä½å‚æ•°ä¸ºæ•°å€¼ å¸ƒå°”å€¼ å­—ç¬¦ä¸²æ—¶ */
// æ•°å€¼å’Œå¸ƒå°”å€¼ä¼šå¿½ç•¥
const obj = {}
Object.assign(obj, 1, true) === obj // true
// å­—ç¬¦ä¸²ä¼šä»¥å­—ç¬¦æ•°ç»„çš„å½¢å¼åšåˆå¹¶
Object.assign({}, 'steins gate') // {0: 'm', 1: 'a', 2: 'o', 3: 'm', 4: 'a', 5: 'o'}

/* æ•°ç»„ */
// å½“å‚æ•°éƒ½ä¸ºæ•°ç»„æ—¶
Object.assign([1, 2, 3], [4, 5]) // [4, 5, 3]
// å½“é¦–ä½å‚æ•°ä¸ºå¯¹è±¡æ—¶ï¼Œåç»­å‚æ•°ä¸ºæ•°ç»„æ—¶
Object.assign({ a: 1 }, [1, 2]) // {0: 1, 1: 2, a: 1}
```

#### ä¼ å…¥æ•°ç»„æ—¶ä¼šæŠŠæ•°ç»„å½“å¯¹è±¡å¤„ç†

```js
Object.assign([1, 2, 3], [4, 5]) // [4, 5, 3]
```

::: tip Object.assign() æ€»ç»“å’Œåº”ç”¨åœºæ™¯

æ€»ç»“

- `Object.assign()` æ˜¯**æµ…æ‹·è´**æ–¹æ³•
- å­˜åœ¨åŒåå±æ€§æ—¶ï¼Œåé¢çš„å±æ€§ä¼šè¦†ç›–å‰é¢çš„å±æ€§
- åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶ä¼šç›´æ¥è¿”å›è¯¥å‚æ•°
- ä¼ å…¥å‚æ•°ä¸æ˜¯å¯¹è±¡æ—¶ä¼šå…ˆè½¬æˆå¯¹è±¡å†è¿”å›
- ä¼ å…¥ `undefined` å’Œ `null` æ—¶
  - å¦‚æœä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼šæŠ¥é”™ï¼ˆæ— æ³•è½¬æˆå¯¹è±¡ï¼‰
  - å¦‚æœä¸ä¸ºç¬¬ä¸€ä¸ªå‚æ•°æ—¶ä¼šè¢«å¿½ç•¥
- ä¼ å…¥æ•°ç»„æ—¶ä¼šæŠŠæ•°ç»„å½“å¯¹è±¡å¤„ç†

åº”ç”¨åœºæ™¯

```js
/* ä¸ºå¯¹è±¡æ·»åŠ å±æ€§ */
class Point {
  constructor(x, y) {
    Object.assign(this, { x, y })
  }
}

/* ä¸ºå¯¹è±¡æ·»åŠ æ–¹æ³• */
Object.assign(Function.prototype, {
  log() {},
})

/* æ‹·è´å¯¹è±¡ */
const clone = (origin) => Object.assign({}, origin)

/* åˆå¹¶å¤šä¸ªå¯¹è±¡ */
const merge = (target, ...sources) => Object.assign(target, ...sources)

/* ä¸ºå±æ€§æŒ‡å®šé»˜è®¤å€¼ */
const DEFAULTS = { duration: 2000 }
function toast(options) {
  options = Object.assign({}, DEFAULTS, options)
}
toast({ content: 'æç¤º' }) // {duration: 2000, content: 'æç¤º'}
```

:::

### Object.keys() Object.value() Object.entries()

`Object.keys()` æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå…¶æˆå‘˜ä¸ºå‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯éå†å±æ€§çš„é”®å(`ES5` å¼•å…¥)

`Object.value()` æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå…¶æˆå‘˜ä¸ºå‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯éå†å±æ€§çš„é”®å€¼(`ES2017` å¼•å…¥)

`Object.entries()` æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ˆäºŒç»´æ•°ç»„ï¼‰ï¼Œå…¶æˆå‘˜ä¸ºå‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯éå†å±æ€§çš„é”®å€¼å¯¹æ•°ç»„(`ES2017` å¼•å…¥)

```js
const obj = { name: 'steins gate', age: 18 }
Object.keys(obj) // ['name', 'age']
Object.values(obj) // Â ['steins gate', 18]
Object.entries(obj) // [['name', 'steins gate'], ['age', 18]]
```

### Object.fromEntries()

`Object.fromEntries()` æ–¹æ³•æ˜¯ `Object.entries()` çš„é€†æ“ä½œï¼Œç”¨äºå°†é”®å€¼å¯¹çš„æ•°æ®ç»“æ„è¿˜åŸä¸ºå¯¹è±¡

```js
Object.fromEntries([['name', 'steins gate']]) // {name: 'steins gate'}

/* Map è½¬å¯¹è±¡ */
const map = new Map([['name', 'steins gate']])
Object.fromEntries(map) // {name: 'steins gate'}

/* å°†æŸ¥è¯¢å­—ç¬¦ä¸²è½¬ä¸ºå¯¹è±¡ */
const params = 'name=steins gate&age=18'
Object.fromEntries(new URLSearchParams(params)) // {name: 'steins gate', age: '18'}
```

### å¯¹è±¡éå†æ–¹æ³•å¯¹æ¯”

| æ–¹æ³•å                       | è¯´æ˜                                                 | ç»§æ‰¿çš„åŸå‹å±æ€§ | ä¸å¯æšä¸¾å±æ€§ | Symbol å±æ€§ |      è¿”å›å€¼      |
| ---------------------------- | :--------------------------------------------------- | :------------: | :----------: | :---------: | :--------------: |
| for...in                     | éå†å¯¹è±¡è‡ªèº«å’Œç»§æ‰¿çš„æ‰€æœ‰å¯æšä¸¾å±æ€§(ä¸å« Symbol å±æ€§) |       âœ…       |      âŒ      |     âŒ      |       key        |
| Object.keys                  | éå†å¯¹è±¡è‡ªèº«æ‰€æœ‰å¯æšä¸¾å±æ€§(ä¸å« Symbol å±æ€§)         |       âŒ       |      âŒ      |     âŒ      |     [key...]     |
| Object.getOwnPropertyNames   | éå†å¯¹è±¡è‡ªèº«æ‰€æœ‰å±æ€§(ä¸å« Symbol å±æ€§)               |       âŒ       |      âœ…      |     âŒ      |     [key...]     |
| Object.getOwnPropertySymbols | éå†å¯¹è±¡è‡ªèº«æ‰€æœ‰çš„ Symbol å±æ€§                       |       âŒ       |      âœ…      |     âœ…      |     [key...]     |
| Reflect.ownKeys              | éå†å¯¹è±¡è‡ªèº«æ‰€æœ‰çš„å±æ€§(åŒ…å«ä¸å¯æšä¸¾å’Œ Symbol å±æ€§)   |       âŒ       |      âœ…      |     âœ…      |     [key...]     |
| Object.values                | éå†å¯¹è±¡è‡ªèº«æ‰€æœ‰å¯æšä¸¾å±æ€§(ä¸å« Symbol å±æ€§)         |       âŒ       |      âŒ      |     âŒ      |    [value...]    |
| Object.entries               | éå†å¯¹è±¡è‡ªèº«æ‰€æœ‰å¯æšä¸¾å±æ€§(ä¸å« Symbol å±æ€§)         |       âŒ       |      âŒ      |     âŒ      | [[key,value]...] |

::: tip éå†é¡ºåº

`ES5` æ²¡æœ‰è§„å®šéå†é¡ºåºï¼Œå…¶éå†é¡ºåºç”±æµè§ˆå™¨å‚å•†å®šä¹‰(å¯ä»¥ç®€å•ç†è§£ä¸ºæ— åºçš„)

`ES6` ä¹‹åè§„å®šéå†é¡ºåºå°†æŒ‰å¦‚ä¸‹è§„åˆ™è¿›è¡Œ

1. é¦–å…ˆéå†æ‰€æœ‰æ•°å€¼é”®ï¼ŒæŒ‰ç…§æ•°å€¼å‡åºæ’åˆ—ã€‚
2. å…¶æ¬¡éå†æ‰€æœ‰å­—ç¬¦ä¸²é”®ï¼ŒæŒ‰ç…§åŠ å…¥æ—¶é—´å‡åºæ’åˆ—ã€‚
3. æœ€åéå†æ‰€æœ‰ `Symbol` é”®ï¼ŒæŒ‰ç…§åŠ å…¥æ—¶é—´å‡åºæ’åˆ—ã€‚

`ES6` å†…éƒ¨å®šä¹‰äº† [\[\[OwnPropertyKeys\]\]()](https://262.ecma-international.org/11.0/#sec-ordinary-object-internal-methods-and-internal-slots-ownpropertykeys) æ–¹æ³•å¯¹å±æ€§è¿›è¡Œåˆ†ç±»å’Œæ’åº

:::

[<u>è¿™é‡Œåªåˆ—ä¸¾äº†ä¸€äº›å¸¸ç”¨æ–¹æ³•ï¼Œå…¶ä»–çš„å¯¹è±¡æ‰©å±•æ–¹æ³•å¯ä»¥çœ‹ é˜®ä¸€å³° çš„ ES6 å…¥é—¨æ•™ç¨‹</u>](https://es6.ruanyifeng.com/#docs/object)

## è¿ç®—ç¬¦çš„æ‰©å±•

### ?. å¯é€‰é“¾æ“ä½œç¬¦

[<u>`ES2020`</u>](https://tc39.es/proposal-optional-chaining/) å¼•å…¥äº†å¯é€‰é“¾æ“ä½œç¬¦(åˆåé“¾åˆ¤æ–­è¿ç®—ç¬¦)ï¼Œå…¶å…è®¸æˆ‘ä»¬åœ¨è¯»å–å¯¹è±¡å†…éƒ¨çš„æŸä¸ªå±æ€§æ—¶ï¼Œä¸éœ€è¦åˆ¤æ–­å±æ€§çš„ä¸Šå±‚å¯¹è±¡æ˜¯å¦å­˜åœ¨

```js
// å¯é€‰é“¾æ“ä½œç¬¦ä¹‹å‰çš„å†™æ³•
const user = (user && user.detail && user.detail.name) || 'ç”¨æˆ·'

// å¯é€‰é“¾æ“ä½œç¬¦ä¹‹åçš„å†™æ³•
const user = user?.detail?.name || 'ç”¨æˆ·'
```

- å¦‚æœå¯¹è±¡å­˜åœ¨ï¼Œåˆ™è¿”å›å¯¹è±¡çš„å±æ€§å€¼ï¼Œå¦åˆ™è¿”å› undefined

```js
const obj = {
  a: 1,
  b: 2,
}

obj?.a // 1
obj?.c // undefined
```

- å‡½æ•°æˆ–å¯¹è±¡æ–¹æ³•å¯é€‰é“¾æ“ä½œç¬¦å¯ä»¥ç”¨äºåˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œè€Œä¸éœ€è¦åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸º null æˆ– undefined

```js
const obj = {
  f: function () {},
}

obj?.f?.()
```

```js
fn?.()
// ç­‰åŒäº
fn == null ? undefined : fn()
```

::: tip æ³¨æ„ âš ï¸

- å¯é€‰é“¾æ“ä½œç¬¦ç›¸å½“äºä¸€ç§çŸ­è·¯æœºåˆ¶ï¼Œåªè¦ä¸æ»¡è¶³æ¡ä»¶å°±ä¸å†å¾€ä¸‹æ‰§è¡Œ

- å½“æœ‰æ‹¬å·æ—¶ï¼Œå¯é€‰é“¾æ“ä½œç¬¦å¯¹åœ†æ‹¬å·å¤–éƒ¨æ²¡æœ‰å½±å“ï¼Œåªå¯¹åœ†æ‹¬å·å†…éƒ¨æœ‰å½±å“ã€‚

- å³ä¾§ä¸å¾—ä¸ºåè¿›åˆ¶æ•°å€¼ã€‚ä¸ºäº†ä¿è¯å…¼å®¹ä»¥å‰çš„ä»£ç ï¼Œå…è®¸ `a?.3:0` ä¼šè¢«è§£ææˆ `a ? .3 : 0`ï¼Œå› æ­¤è§„å®šå¦‚æœ `?.` åé¢ç´§è·Ÿä¸€ä¸ªåè¿›åˆ¶æ•°å­—ï¼Œé‚£ä¹ˆ `?.` ä¸å†è¢«çœ‹æˆæ˜¯ä¸€ä¸ªå®Œæ•´çš„è¿ç®—ç¬¦ï¼Œè€Œä¼šæŒ‰ç…§ä¸‰å…ƒè¿ç®—ç¬¦è¿›è¡Œå¤„ç†ï¼Œå³å°æ•°ç‚¹ä¼šå½’å±äºåé¢çš„åè¿›åˆ¶æ•°å­—å½¢æˆä¸€ä¸ªå°æ•°ã€‚

- ç¦æ­¢ä½¿ç”¨ä»¥ä¸‹å†™æ³•

```js
// æ„é€ å‡½æ•°
new a?.()
new a?.b()

// å³ä¾§æœ‰æ¨¡æ¿å­—ç¬¦ä¸²
a?.`{b}`
a?.b`{c}`

// å·¦ä¾§æ˜¯ super
super?.()
super?.foo

// ç”¨äºèµ‹å€¼è¿ç®—ç¬¦å·¦ä¾§
a?.b = c
```

:::

### ?? é€»è¾‘ç©ºå€¼åˆå¹¶æ“ä½œç¬¦

[<u>`ES2020`</u>](https://tc39.es/proposal-nullish-coalescing/) å¼•å…¥äº†é€»è¾‘ç©ºå€¼åˆå¹¶æ“ä½œç¬¦ï¼ˆ`Nullish Coalescing Operator`ï¼‰ï¼Œç”¨äºåˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸º null æˆ– undefinedï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å›å…¶å³ä¾§å€¼ï¼Œå¦åˆ™è¿”å›å…¶å·¦ä¾§å€¼

```js
const a = 0 ?? 'steins gate' // 0
const b = '' ?? 'steins gate' // ''
const c = null ?? 'steins gate' // "steins gate"
const d = undefined ?? 'steins gate' // "steins gate"
```

::: tip ?? ä¸ || çš„åŒºåˆ«

- `||` è¿ç®—ç¬¦ï¼šå¦‚æœå·¦ä¾§ä¸º `true`ï¼Œåˆ™è¿”å›å·¦ä¾§ï¼Œå¦‚æœå·¦ä¾§ä¸º `false`ï¼Œåˆ™è¿”å›å³ä¾§ã€‚
- `??` è¿ç®—ç¬¦ï¼šå¦‚æœå·¦ä¾§ä¸º `null` æˆ– `undefined`ï¼Œåˆ™è¿”å›å³ä¾§ï¼Œå¦åˆ™è¿”å›å·¦ä¾§ã€‚

```js
const a = 0 || 'steins gate' // "steins gate"
const b = '' || 'steins gate' // "steins gate"
const c = null || 'steins gate' // "steins gate"
const d = undefined || 'steins gate' // "steins gate"
```

:::

### é€»è¾‘èµ‹å€¼è¿ç®—ç¬¦

[<u>`ES2021`</u>](https://tc39.es/proposal-logical-assignment/) å¼•å…¥äº†é€»è¾‘èµ‹å€¼è¿ç®—ç¬¦ï¼Œç”¨äºç®€åŒ–é€»è¾‘èµ‹å€¼æ“ä½œã€‚

#### `??=`

```js
a ??= b
// ç­‰åŒäº
a ?? (a = b)
```

#### `||=`

```js
a ||= b
// ç­‰åŒäº
a || (a = b)
```

#### `&&=`

```js
a &&= b
// ç­‰åŒäº
a && (a = b)
```
