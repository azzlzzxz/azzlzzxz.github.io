import{_ as a,o as e,c as o,N as n}from"./chunks/framework.2673bc46.js";const y=JSON.parse('{"title":"Hooks ç›¸å…³çŸ¥è¯†","description":"","frontmatter":{},"headers":[],"relativePath":"frame/react/base/hooks.md","lastUpdated":1727500876000}'),l={name:"frame/react/base/hooks.md"};function c(t,s,p,r,d,i){return e(),o("div",null,s[0]||(s[0]=[n(`<h1 id="hooks-ç›¸å…³çŸ¥è¯†" tabindex="-1">Hooks ç›¸å…³çŸ¥è¯† <a class="header-anchor" href="#hooks-ç›¸å…³çŸ¥è¯†" aria-label="Permalink to &quot;Hooks ç›¸å…³çŸ¥è¯†&quot;">â€‹</a></h1><h2 id="hooks-è¦éµå®ˆçš„è§„åˆ™" tabindex="-1"><code>Hooks</code> è¦éµå®ˆçš„è§„åˆ™ <a class="header-anchor" href="#hooks-è¦éµå®ˆçš„è§„åˆ™" aria-label="Permalink to &quot;\`Hooks\` è¦éµå®ˆçš„è§„åˆ™&quot;">â€‹</a></h2><ul><li>åªåœ¨å‡½æ•°æœ€é¡¶å±‚è°ƒç”¨ <code>Hooks</code></li></ul><p>ä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ <code>Hooks</code>ã€‚ç¡®ä¿æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶ <code>Hooks</code> çš„è°ƒç”¨é¡ºåºä¸€è‡´ã€‚è¿™æ˜¯å› ä¸º <code>React</code> ä¾èµ–äº <code>Hooks</code> çš„è°ƒç”¨é¡ºåºæ¥ç®¡ç†ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€</p><ul><li>åªåœ¨ <code>React</code> å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨ <code>Hooks</code></li></ul><p>ä¸è¦åœ¨æ™®é€šçš„ <code>JavaScript</code> å‡½æ•°ä¸­è°ƒç”¨ <code>Hooks</code>ã€‚<code>Hooks</code> åªèƒ½åœ¨ <code>React</code> çš„å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰çš„ <code>Hookï¼ˆå‡½æ•°åä»¥</code> <code>use</code> å¼€å¤´ï¼‰ä¸­è°ƒç”¨</p><h2 id="setstate-æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥" tabindex="-1">setState æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ <a class="header-anchor" href="#setstate-æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥" aria-label="Permalink to &quot;setState æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥&quot;">â€‹</a></h2><p><code>setState</code> åœ¨ç±»ç»„ä»¶ä¸­æ˜¯ <code>this.setState</code> æ–¹æ³•ï¼Œåœ¨å‡½æ•°ç»„ä»¶ä¸­æ˜¯ <code>useState</code> è¿”å›å€¼çš„ä¿®æ”¹å‡½æ•° <code>setState</code> ç”¨äºå˜æ›´çŠ¶æ€ï¼Œè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œæ›´æ–°è§†å›¾ <code>UI</code></p><ul><li>å…³äº<code>useState</code>çš„å®ç°å¯ä»¥çœ‹è¿™é‡Œ <a href="/rsource/react/useState"><u>React 18.2 | useState å®ç° ğŸš€</u></a></li></ul><h3 id="åœ¨-react-18-ä¹‹å‰" tabindex="-1">åœ¨ <code>React 18</code> ä¹‹å‰ <a class="header-anchor" href="#åœ¨-react-18-ä¹‹å‰" aria-label="Permalink to &quot;åœ¨ \`React 18\` ä¹‹å‰&quot;">â€‹</a></h3><p>åœ¨ <code>React 18</code> ä¹‹å‰ï¼Œåªè¦åœ¨ <code>React</code> å¯ä»¥æ§åˆ¶çš„åœ°æ–¹ï¼Œ<code>setState</code> çš„æ‰§è¡Œéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œæ¯”å¦‚åœ¨ <code>React</code> ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å’Œåˆæˆäº‹ä»¶ä¸­ï¼Œéƒ½ä¼šèµ°åˆå¹¶æ“ä½œï¼Œå»¶è¿Ÿæ›´æ–°çš„ç­–ç•¥</p><p>è€Œåœ¨ <code>React</code> æ— æ³•æ§åˆ¶çš„åœ°æ–¹ï¼Œå¦‚ç›‘å¬åŸç”Ÿäº‹ä»¶å’Œå¼‚æ­¥è°ƒç”¨çš„åœ°æ–¹ï¼Œ<code>setState</code> çš„æ‰§è¡Œéƒ½æ˜¯å°±æ˜¯åŒæ­¥çš„ã€‚æ¯”å¦‚åœ¨ <code>addEventListener</code>ã€<code>setTimeout</code>ã€<code>Promise</code> ç­‰çš„å›è°ƒå‡½æ•°ä¸­</p><h3 id="åœ¨-react-18-ä¹‹å" tabindex="-1">åœ¨ <code>React 18</code> ä¹‹å <a class="header-anchor" href="#åœ¨-react-18-ä¹‹å" aria-label="Permalink to &quot;åœ¨ \`React 18\` ä¹‹å&quot;">â€‹</a></h3><p>åœ¨ <code>concurrent</code> æ¨¡å¼ä¸‹ï¼Œç”±äºé»˜è®¤å¯ç”¨äº†å¹¶å‘æ›´æ–°ï¼Œæ‰€ä»¥ <code>setState</code> çš„æ‰§è¡Œéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œå³ä¸ç®¡æ˜¯åœ¨ <code>React</code> å¯ä»¥æ§åˆ¶çš„åœ°æ–¹è¿˜æ˜¯æ— æ³•æ§åˆ¶çš„åœ°æ–¹ï¼Œé»˜è®¤éƒ½ä¼šèµ°åˆå¹¶æ“ä½œï¼Œå»¶è¿Ÿæ›´æ–°çš„ç­–ç•¥</p><div class="tip custom-block"><p class="custom-block-title"><code>setState</code> ä¸ºä»€ä¹ˆæ˜¯å¼‚æ­¥çš„ï¼Ÿ</p><ul><li>æ€§èƒ½ä¼˜åŒ–ã€å‡å°‘æ¸²æŸ“æ¬¡æ•°</li></ul><p>ä»æºç çš„è§’åº¦åˆ†æï¼Œåœ¨æ‰§è¡Œä»»åŠ¡è°ƒåº¦ä¹‹å‰ï¼Œå›å»åˆ¤æ–­å½“å‰æ­£åœ¨æ›´æ–°çš„ lane ä¼˜å…ˆçº§å’Œè€çš„æ›´æ–°ä¼˜å…ˆçº§åšå¯¹æ¯”ï¼Œå¦‚æœä¼˜å…ˆçº§ä¸€æ ·å°±å¼€å¯äº†æ‰¹å¤„ç†ï¼Œå°±ä¸éœ€è¦å†æ¬¡è°ƒåº¦æ–°ä»»åŠ¡æ‰§è¡Œæ›´æ–°äº†ã€‚ï¼ˆæºç åœ°å€ <a href="https://github.com/azzlzzxz/react-v18.2.0/blob/75de845d69876d84a4a8b226c5f2e6203328b8ee/packages/react-reconciler/src/ReactFiberWorkLoop.old.js#L715" target="_blank" rel="noreferrer"><u>æ‰¹å¤„ç†</u></a>ï¼‰</p><ul><li>ä¿æŒå†…éƒ¨ä¸€è‡´æ€§</li></ul></div><h2 id="é—­åŒ…é™·é˜±" tabindex="-1">é—­åŒ…é™·é˜± <a class="header-anchor" href="#é—­åŒ…é™·é˜±" aria-label="Permalink to &quot;é—­åŒ…é™·é˜±&quot;">â€‹</a></h2><p>é—­åŒ…é™·é˜±å°±æ˜¯ <code>effect</code> å‡½æ•°ç­‰å¼•ç”¨äº† <code>state</code>ï¼Œå½¢æˆäº†é—­åŒ…ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æŠŠ <code>state</code> åŠ åˆ°ä¾èµ–æ•°ç»„é‡Œï¼Œå¯¼è‡´æ‰§è¡Œ <code>effect</code> æ—¶ç”¨çš„ <code>state</code> è¿˜æ˜¯ä¹‹å‰çš„ã€‚</p><blockquote><p>ä¸¾ä¸ª ğŸŒ°</p></blockquote><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">useEffect</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">useState</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">react</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">App</span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">count</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">setCount</span><span style="color:#89DDFF;">]</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useState</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">useEffect</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">setInterval</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">count</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">setCount</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">count</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> [])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;{</span><span style="color:#BABED8;">count</span><span style="color:#89DDFF;">}&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#BABED8;"> App</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><img src="https://steinsgate.oss-cn-hangzhou.aliyuncs.com/react/hook_trap.gif" alt="hook_trap"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>setCount</code> æ—¶æ‹¿åˆ°çš„ <code>count</code> ä¸€ç›´æ˜¯ <code>0</code></p><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li><p>ä½¿ç”¨ <code>setState</code> çš„å‡½æ•°çš„å½¢å¼ï¼Œä»å‚æ•°æ‹¿åˆ°ä¸Šæ¬¡çš„ <code>state</code>ï¼Œè¿™æ ·å°±ä¸ä¼šå½¢æˆé—­åŒ…äº†ï¼Œæˆ–è€…ç”¨ <code>useReducer</code>ï¼Œç›´æ¥ <code>dispatch action</code>ï¼Œè€Œä¸æ˜¯ç›´æ¥æ“ä½œ <code>state</code>ï¼Œè¿™æ ·ä¹Ÿä¸ä¼šå½¢æˆé—­åŒ…</p></li><li><p>æŠŠç”¨åˆ°çš„ <code>state</code> åŠ åˆ°ä¾èµ–æ•°ç»„é‡Œï¼Œè¿™æ · <code>state</code> å˜äº†å°±ä¼šé‡æ–°è·‘ <code>effect</code> å‡½æ•°ï¼Œå¼•ç”¨æ–°çš„ <code>state</code></p></li><li><p>ä½¿ç”¨ <code>useRef</code> ä¿å­˜æ¯æ¬¡æ¸²æŸ“çš„å€¼ï¼Œç”¨åˆ°çš„æ—¶å€™ä» <code>ref.current</code> å–</p></li></ul>`,23)]))}const u=a(l,[["render",c]]);export{y as __pageData,u as default};
